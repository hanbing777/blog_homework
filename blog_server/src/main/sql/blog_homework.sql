/*
 Navicat Premium Data Transfer

 Source Server         : blog_homework
 Source Server Type    : MySQL
 Source Server Version : 80027
 Source Host           : 47.99.49.255:3307
 Source Schema         : blog_homework

 Target Server Type    : MySQL
 Target Server Version : 80027
 File Encoding         : 65001

 Date: 15/12/2022 14:21:06
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for t_attach
-- ----------------------------
DROP TABLE IF EXISTS `t_attach`;
CREATE TABLE `t_attach`  (
                             `id` int(0) UNSIGNED NOT NULL AUTO_INCREMENT,
                             `fname` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '',
                             `ftype` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '',
                             `fkey` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '',
                             `author_id` int(0) NULL DEFAULT NULL,
                             `created` int(0) NOT NULL,
                             PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 12 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of t_attach
-- ----------------------------
INSERT INTO `t_attach` VALUES (2, '22è€ƒç ”è®¡ç®—æœºå­¦é™¢ä¸“ä¸šç›®å½•.PNG', 'PNG', 'http://110.40.220.17:18001/group1/M00/00/00/CgAMDWOYXRWAaairAAG5YQF40YI597.PNG', NULL, 1670929685);
INSERT INTO `t_attach` VALUES (4, '22è€ƒç ”è®¡ç®—æœºå­¦é™¢ä¸“ä¸šç›®å½•.PNG', 'PNG', 'http://110.40.220.17:18001/group1/M00/00/00/CgAMDWOYZ8KALBsYAAG5YQF40YI489.PNG', NULL, 1670932418);
INSERT INTO `t_attach` VALUES (6, 'a8bdd866-adef-469e-8a39-aef59df3bf6a_01.png', 'png', 'http://110.40.220.17:18001/group1/M00/00/00/CgAMDWOYk46AZXAjAACj0lFlsRQ381.png', NULL, 1670943630);
INSERT INTO `t_attach` VALUES (7, '22å¹´æœ€æ–°æ•™èµ„.txt', 'txt', 'http://110.40.220.17:18001/group1/M00/00/00/CgAMDWOZJ0KAZLZIAAAIxY8vi9o868.txt', NULL, 1670981442);
INSERT INTO `t_attach` VALUES (8, 'ç”Ÿå‘½å‘¨æœŸ.png', 'png', 'http://110.40.220.17:18001/group1/M00/00/00/CgAMDWOZKE2ASOBxAAWz8I8cbSE970.png', NULL, 1670981709);
INSERT INTO `t_attach` VALUES (9, '22å¹´æœ€æ–°æ•™èµ„.txt', 'txt', 'http://110.40.220.17:18001/group1/M00/00/00/CgAMDWOZK3mACPDzAAAIxY8vi9o477.txt', NULL, 1670982521);
INSERT INTO `t_attach` VALUES (10, 'vuex.png', 'png', 'http://110.40.220.17:18001/group1/M00/00/00/CgAMDWOZLNeAbAADAAVwHd_6SBw388.png', NULL, 1670982871);

-- ----------------------------
-- Table structure for t_comments
-- ----------------------------
DROP TABLE IF EXISTS `t_comments`;
CREATE TABLE `t_comments`  (
                               `coid` int(0) UNSIGNED NOT NULL AUTO_INCREMENT,
                               `cid` int(0) UNSIGNED NULL DEFAULT 0,
                               `created` int(0) UNSIGNED NULL DEFAULT 0,
                               `author` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL,
                               `author_id` int(0) UNSIGNED NULL DEFAULT 0,
                               `owner_id` int(0) UNSIGNED NULL DEFAULT 0,
                               `mail` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL,
                               `url` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL,
                               `ip` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL,
                               `agent` varchar(200) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL,
                               `content` mediumtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL,
                               `type` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT 'comment',
                               `status` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT 'approved',
                               `parent` int(0) UNSIGNED NULL DEFAULT 0,
                               `deleted` int(0) NULL DEFAULT 0 COMMENT 'é€»è¾‘åˆ é™¤',
                               PRIMARY KEY (`coid`) USING BTREE,
                               INDEX `cid`(`cid`) USING BTREE,
                               INDEX `created`(`created`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 6 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_bin ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of t_comments
-- ----------------------------
INSERT INTO `t_comments` VALUES (4, 3, 1669775417, 'çƒ­å¿ƒç½‘å‹', 0, 1, '', '', '0:0:0:0:0:0:0:1', NULL, '11111', 'comment', 'approved', 0, 1);
INSERT INTO `t_comments` VALUES (5, 1, 1669775417, '12223', 0, 0, '', '', NULL, NULL, '12', 'comment', 'approved', 0, 0);
INSERT INTO `t_comments` VALUES (6, 1, 1671072049, '12', 0, 0, '', '', NULL, NULL, 'ğŸ˜€', 'comment', 'approved', 0, 0);

-- ----------------------------
-- Table structure for t_contents
-- ----------------------------
DROP TABLE IF EXISTS `t_contents`;
CREATE TABLE `t_contents`  (
                               `cid` int(0) UNSIGNED NOT NULL AUTO_INCREMENT,
                               `title` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                               `slug` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                               `created` int(0) UNSIGNED NULL DEFAULT 0,
                               `modified` int(0) UNSIGNED NULL DEFAULT 0,
                               `content` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT 'å†…å®¹æ–‡å­—',
                               `author_id` int(0) UNSIGNED NULL DEFAULT 0,
                               `type` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT 'post',
                               `status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT 'publish',
                               `tags` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                               `categories` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                               `hits` int(0) UNSIGNED NULL DEFAULT 0,
                               `comments_num` int(0) UNSIGNED NULL DEFAULT 0,
                               `allow_comment` tinyint(1) NULL DEFAULT 1,
                               `allow_ping` tinyint(1) NULL DEFAULT 1,
                               `allow_feed` tinyint(1) NULL DEFAULT 1,
                               `deleted` int(0) NULL DEFAULT 0 COMMENT 'é€»è¾‘åˆ é™¤',
                               PRIMARY KEY (`cid`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 26 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of t_contents
-- ----------------------------
INSERT INTO `t_contents` VALUES (1, 'about my blog', 'about', 1670932505, 1669740067, '## Blog\n\n[Blog](https://github.com/zhisheng17/blog)  fork from [My Blog](https://github.com/ZHENFENG13/My-Blog) , è¯¥ä½œè€…æ˜¯åœ¨ [Tale](https://github.com/otale/tale) åšå®¢ç³»ç»ŸåŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹çš„ã€‚\n\n`Tale` ä½¿ç”¨äº†è½»é‡çº§ mvc æ¡†æ¶ `Blade` å¼€å‘ï¼Œé»˜è®¤ä¸»é¢˜ä½¿ç”¨äº†æ¼‚äº®çš„ `pinghsu` ã€‚\n\n`My-Blog` ä½¿ç”¨çš„æ˜¯ Docker + SpringBoot + Mybatis + thymeleaf æ‰“é€ çš„ä¸€ä¸ªä¸ªäººåšå®¢æ¨¡æ¿ã€‚\n\n***\n\n[Blog](https://github.com/zhisheng17/blog)  åœ¨  [My Blog](https://github.com/ZHENFENG13/My-Blog)  çš„åŸºç¡€ä¸Šå»é™¤äº† Dockerï¼Œé‡‡ç”¨çš„æ˜¯ SpringBoot + Mybatis + thymeleaf  + MySQL æ­å»ºçš„ä¸€ä¸ªåšå®¢ï¼Œå…¶ä¸­åœ¨åŸæ¥ä½œè€…çš„åŸºç¡€ä¸Šä¼˜åŒ–äº†ã€‚\n\n## å¼€æºåè®®\n\n[MIT](./LICENSE)\n\n## æ„Ÿè°¢\n\n[ZHENFENG13](https://github.com/ZHENFENG13)\n\n[otale](https://github.com/otale)\n![22è€ƒç ”è®¡ç®—æœºå­¦é™¢ä¸“ä¸šç›®å½•.PNG](http://110.40.220.17:18001/group1/M00/00/00/CgAMDWOYaAaAF7akAAG5YQF40YI043.PNG)\n', 1, 'page', 'publish', 'blog', 'é»˜è®¤åˆ†ç±»', 137, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (3, 'ã€ŠJava å¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯ã€‹å­¦ä¹ ç¬”è®°åŠæ€»ç»“', 'Java-Thread', 1669740067, 1669740067, '## ç¬¬ä¸€ç«  â€”â€” Java å¤šçº¿ç¨‹æŠ€èƒ½\r\n\r\nçº¿ç¨‹æŠ€æœ¯ç‚¹ï¼š\r\n\r\n+ çº¿ç¨‹çš„å¯åŠ¨\r\n+ å¦‚ä½•ä½¿çº¿ç¨‹æš‚åœ\r\n+ å¦‚ä½•ä½¿çº¿ç¨‹åœæ­¢\r\n+ çº¿ç¨‹çš„ä¼˜å…ˆçº§\r\n+ çº¿ç¨‹å®‰å…¨ç›¸å…³é—®é¢˜\r\n<!-- more -->\r\n### è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µåŠå¤šçº¿ç¨‹çš„ä¼˜ç‚¹\r\n\r\nè¿›ç¨‹ï¼šæ¯”å¦‚æˆ‘ä»¬ç”µè„‘è¿è¡Œçš„ QQ.exe ç¨‹åºï¼Œæ˜¯æ“ä½œç³»ç»Ÿç®¡ç†çš„åŸºæœ¬è¿è¡Œå•å…ƒ\r\n\r\nçº¿ç¨‹ï¼šåœ¨è¿›ç¨‹ä¸­ç‹¬ç«‹è¿è¡Œçš„å­ä»»åŠ¡ï¼Œæ¯”å¦‚ QQ.exe è¿›ç¨‹ä¸­å°±æœ‰å¾ˆå¤šçº¿ç¨‹åœ¨è¿è¡Œï¼Œä¸‹è½½æ–‡ä»¶çº¿ç¨‹ã€å‘é€æ¶ˆæ¯çº¿ç¨‹ã€è¯­éŸ³çº¿ç¨‹ã€è§†é¢‘çº¿ç¨‹ç­‰ã€‚\r\n\r\nå¤šçº¿ç¨‹ä¼˜ç‚¹ï¼šæˆ‘ä»¬ç”µè„‘å¯ä»¥åŒæ—¶æ“ä½œä¸åŒçš„è½¯ä»¶ï¼Œè¾¹å¬ç€æ­Œï¼Œæ•²ç€ä»£ç ï¼ŒæŸ¥çœ‹ pdf æ–‡æ¡£ï¼Œæµè§ˆç½‘é¡µç­‰ï¼ŒCPU åœ¨è¿™äº›ä»»åŠ¡ä¹‹é—´ä¸åœçš„åˆ‡æ¢ï¼Œåˆ‡æ¢éå¸¸å¿«ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±è§‰å¾—ä»–ä»¬æ˜¯åœ¨åŒæ—¶è¿è¡Œçš„ã€‚\r\n\r\n### ä½¿ç”¨å¤šçº¿ç¨‹\r\n\r\n#### ç»§æ‰¿ Thread ç±»\r\n\r\nJDK æºç æ³¨é‡Šï¼ˆThread.javaï¼‰å¦‚ä¸‹ï¼š\r\n\r\n```java\r\nOne is to declare a class to be a subclass(å­ç±») of <code>Thread</code>. This subclass should override the <code>run</code> method of class <code>Thread</code>. An instance of the subclass can then be allocated and started. For example, a thread that computes primes\r\nlarger than a stated value could be written as follows:\r\n//ç»§æ‰¿ Thread ç±»\r\nclass PrimeThread extends Thread {\r\n         long minPrime;\r\n         PrimeThread(long minPrime) {\r\n          this.minPrime = minPrime;\r\n         }\r\n\r\n         public void run() {\r\n             // compute primes larger than minPrime\r\n             é‡å†™ Thread ç±»çš„ run æ–¹æ³•\r\n          }\r\n     }\r\n\r\nThe following code would then create a thread and start it running:\r\n//å¼€å¯çº¿ç¨‹\r\n    PrimeThread p = new PrimeThread(143);\r\n    p.start();\r\n```\r\n\r\n#### å®ç° Runnable æ¥å£\r\n\r\nJDK æºç æ³¨é‡Šï¼ˆThread.javaï¼‰å¦‚ä¸‹ï¼š\r\n\r\n```java\r\nThe other way to create a thread is to declare a class that implements the <code>Runnable</code> interface. That class then implements the <code>run</code> method. An instance of the class can then be allocated, passed as an argument when creating\r\n<code>Thread</code>, and started. The same example in this other style looks like the following:\r\n//å®ç° Runnable æ¥å£\r\n    class PrimeRun implements Runnable {\r\n        long minPrime;\r\n        PrimeRun(long minPrime) {\r\n            this.minPrime = minPrime;\r\n         }\r\n\r\n         public void run() {\r\n            // compute primes larger than minPrime\r\n            //é‡å†™ run æ–¹æ³•\r\n        }\r\n    }\r\n\r\nThe following code would then create a thread and start it running:\r\n//å¼€å¯çº¿ç¨‹\r\n     PrimeRun p = new PrimeRun(143);\r\n     new Thread(p).start();\r\n```\r\n\r\n\r\n\r\n### currentThread() æ–¹æ³•\r\n\r\nè¯¥æ–¹æ³•è¿”å›ä»£ç æ®µæ­£åœ¨è¢«å“ªä¸ªçº¿ç¨‹è°ƒç”¨çš„ä¿¡æ¯ã€‚\r\n\r\n### isAlive() æ–¹æ³•\r\n\r\nåˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ï¼ˆå·²ç»å¯åŠ¨ä½†æœªç»ˆæ­¢ï¼‰\r\n\r\n### sleep() æ–¹æ³•\r\n\r\nåœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…è®©å½“å‰â€œæ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ï¼ˆthis.currentThread() è¿”å›çš„çº¿ç¨‹ï¼‰â€ä¼‘çœ ï¼ˆæš‚åœæ‰§è¡Œï¼‰ã€‚\r\n\r\n### getId() æ–¹æ³•\r\n\r\nè·å–çº¿ç¨‹çš„å”¯ä¸€æ ‡è¯†\r\n\r\n### åœæ­¢çº¿ç¨‹\r\n\r\nå¯ä»¥ä½¿ç”¨ <del>Thread.stop()</del> æ–¹æ³•ï¼Œä½†æœ€å¥½ä¸è¦ç”¨ï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ³•æ˜¯ä¸å®‰å…¨çš„ï¼Œå·²ç»å¼ƒç”¨ä½œåºŸäº†ã€‚\r\n\r\nå¤§å¤šæ•°åœæ­¢ä¸€ä¸ªçº¿ç¨‹æ˜¯ä½¿ç”¨ Thread.interrupt() æ–¹æ³•\r\n\r\n#### åˆ¤æ–­çº¿ç¨‹æ˜¯å¦æ˜¯åœæ­¢çŠ¶æ€\r\n\r\n+    interrupted()\r\n```java\r\n     //æµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­äº†ï¼Œè¿™ä¸ªçº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ä¼šè¢«è¿™ä¸ªæ–¹æ³•æ¸…é™¤ã€‚\r\n     //æ¢å¥è¯è¯´ï¼Œå¦‚æœè¿ç»­ä¸¤æ¬¡è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨çš„æ—¶å€™å°†ä¼šè¿”å› false ï¼Œ\r\n     public static boolean interrupted() {\r\n             return currentThread().isInterrupted(true);\r\n     }\r\n```\r\n\r\n+    isInterrupted()\r\n\r\n```java\r\n        //æµ‹è¯•çº¿ç¨‹æ˜¯å¦å·²ç»ä¸­æ–­äº†ï¼Œçº¿ç¨‹çš„çŠ¶æ€ä¸ä¼šå—è¿™ä¸ªæ–¹æ³•çš„å½±å“\r\n        //çº¿ç¨‹ä¸­æ–­è¢«å¿½ç•¥ï¼Œå› ä¸ºçº¿ç¨‹å¤„äºä¸­æ–­ä¸‹ä¸å¤„äºæ´»åŠ¨çŠ¶æ€çš„çº¿ç¨‹ç”±æ­¤è¿”å›falseçš„æ–¹æ³•åæ˜ å‡ºæ¥\r\n         public boolean isInterrupted() {\r\n                return isInterrupted(false);\r\n        }\r\n        /**\r\n     * Tests if some Thread has been interrupted.  The interrupted state\r\n     * is reset or not based on the value of ClearInterrupted that is\r\n     * passed.\r\n     */\r\n     private native boolean isInterrupted(boolean ClearInterrupted);\r\n```\r\n\r\n#### åœ¨æ²‰ç¡ä¸­åœæ­¢\r\n\r\n```java\r\npublic class MyThread2 extends Thread\r\n{\r\n    @Override\r\n    public void run() {\r\n        try {\r\n            System.out.println(\"run start\");\r\n            Thread.sleep(20000);\r\n            System.out.println(\"run end\");\r\n        } catch (InterruptedException e) {\r\n            System.out.println(\"run catch \"+this.isInterrupted());\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    public static void main(String[] args) {\r\n        try {\r\n            MyThread2 t2 = new MyThread2();\r\n            t2.start();\r\n            Thread.sleep(200);\r\n            t2.interrupt();\r\n        } catch (InterruptedException e) {\r\n            System.out.println(\"main catch\");\r\n            e.printStackTrace();\r\n        }\r\n        System.out.println(\"main end\");\r\n    }\r\n}\r\n```\r\n\r\nè¿è¡Œç»“æœï¼š\r\n\r\n```java\r\nrun start\r\nmain end\r\nrun catch false\r\njava.lang.InterruptedException: sleep interrupted\r\n	at java.lang.Thread.sleep(Native Method)\r\n	at com.zhisheng.thread.thread1.MyThread2.run(MyThread2.java:12)\r\n```\r\n\r\nä»è¿è¡Œç»“æœæ¥çœ‹ï¼Œå¦‚æœåœ¨ sleep çŠ¶æ€ä¸‹åœæ­¢æŸä¸€çº¿ç¨‹ï¼Œä¼šè¿›å…¥ catch è¯­å¥ï¼Œå¹¶æ¸…é™¤åœæ­¢çŠ¶æ€å€¼ï¼Œä½¿ä¹‹å˜æˆ falseã€‚\r\n\r\n#### åœ¨åœæ­¢ä¸­æ²‰ç¡\r\n\r\n```java\r\npublic class MyThread3 extends Thread\r\n{\r\n    @Override\r\n    public void run() {\r\n        try {\r\n            System.out.println(\"run start\");\r\n            Thread.sleep(20000);\r\n            System.out.println(\"run end\");\r\n        } catch (InterruptedException e) {\r\n            System.out.println(\"run catch \"+this.isInterrupted());\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    public static void main(String[] args) {\r\n            MyThread3 t3 = new MyThread3();\r\n            t3.start();\r\n            t3.interrupt();\r\n    }\r\n}\r\n```\r\n\r\nè¿è¡Œç»“æœï¼š\r\n\r\n```java\r\nrun start\r\nrun catch false\r\njava.lang.InterruptedException: sleep interrupted\r\n	at java.lang.Thread.sleep(Native Method)\r\n	at com.zhisheng.thread.thread1.MyThread3.run(MyThread3.java:12)\r\n```\r\n\r\n#### èƒ½åœæ­¢çš„çº¿ç¨‹ â€”â€” æš´åŠ›åœæ­¢\r\n\r\nä½¿ç”¨ stop() æ–¹æ³•åœæ­¢çº¿ç¨‹\r\n\r\n### æš‚åœçº¿ç¨‹\r\n\r\nå¯ä½¿ç”¨ suspend æ–¹æ³•æš‚åœçº¿ç¨‹ï¼Œä½¿ç”¨ resume() æ–¹æ³•æ¢å¤çº¿ç¨‹çš„æ‰§è¡Œã€‚\r\n\r\n#### suspend å’Œ resume æ–¹æ³•çš„ä½¿ç”¨\r\n\r\n```java\r\npublic class MyThread4 extends Thread\r\n{\r\n    private int i;\r\n    public int getI() {\r\n        return i;\r\n    }\r\n    public void setI(int i) {\r\n        this.i = i;\r\n    }\r\n    @Override\r\n    public void run() {\r\n        while (true) {\r\n            i++;\r\n        }\r\n    }\r\n    public static void main(String[] args) throws InterruptedException {\r\n        MyThread4 t4 = new MyThread4();\r\n        t4.start();\r\n        System.out.println(\"A----- \" + System.currentTimeMillis() + \" ---- \" + t4.getI());\r\n        Thread.sleep(2000);\r\n        System.out.println(\"A----- \" + System.currentTimeMillis() + \" ---- \" + t4.getI());\r\n        t4.suspend();\r\n        Thread.sleep(2000);\r\n        t4.resume();\r\n        System.out.println(\"B----- \" + System.currentTimeMillis() + \" ---- \" + t4.getI());\r\n        Thread.sleep(2000);\r\n        System.out.println(\"B----- \" + System.currentTimeMillis() + \" ---- \" + t4.getI());\r\n    }\r\n}\r\n```\r\n\r\nä»è¿è¡Œç»“æœæ¥çœ‹ï¼Œçº¿ç¨‹çš„ç¡®èƒ½å¤Ÿæš‚åœå’Œæ¢å¤ã€‚\r\n\r\nä½†æ˜¯ suspend å’Œ resume æ–¹æ³•çš„ç¼ºç‚¹å°±æ˜¯ï¼š**ä¸åŒæ­¥**ï¼Œå› ä¸ºçº¿ç¨‹çš„æš‚åœå¯¼è‡´æ•°æ®çš„ä¸åŒæ­¥ã€‚\r\n\r\n### yield æ–¹æ³•\r\n\r\n```java\r\n/**\r\n     * A hint to the scheduler that the current thread is willing to yield\r\n     * its current use of a processor. The scheduler is free to ignore this\r\n     * hint.\r\n     *\r\n     * <p> Yield is a heuristic attempt to improve relative progression\r\n     * between threads that would otherwise over-utilise a CPU. Its use\r\n     * should be combined with detailed profiling and benchmarking to\r\n     * ensure that it actually has the desired effect.\r\n     *\r\n     * <p> It is rarely appropriate to use this method. It may be useful\r\n     * for debugging or testing purposes, where it may help to reproduce\r\n     * bugs due to race conditions. It may also be useful when designing\r\n     * concurrency control constructs such as the ones in the\r\n     * {@link java.util.concurrent.locks} package.\r\n     */\r\n    //æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œå…¶ä»–çº¿ç¨‹ã€‚æš‚åœçš„æ—¶é—´ä¸ç¡®å®šã€‚\r\n    public static native void yield();\r\n```\r\n\r\n```java\r\npublic class MyThread5 extends Thread\r\n{\r\n    @Override\r\n    public void run() {\r\n        double start = System.currentTimeMillis();\r\n        for (int i = 0; i < 200000; i++) {\r\n            //yield();//æš‚åœçš„æ—¶é—´ä¸ç¡®å®š\r\n            i++;\r\n        }\r\n        double end = System.currentTimeMillis();\r\n        System.out.println(\"time is \"+(end - start));\r\n    }\r\n    public static void main(String[] args) {\r\n        MyThread5  t5 = new MyThread5();\r\n        t5.start();\r\n    }\r\n}\r\n```\r\n\r\n### çº¿ç¨‹çš„ä¼˜å…ˆçº§\r\n\r\nè®¾ç½®ä¼˜å…ˆçº§çš„æ–¹æ³•ï¼šsetPriority() æ–¹æ³•\r\n\r\n```java\r\npublic final void setPriority(int newPriority) {\r\n        ThreadGroup g;\r\n        checkAccess();\r\n        if (newPriority > MAX_PRIORITY || newPriority < MIN_PRIORITY) {\r\n            throw new IllegalArgumentException();\r\n        }\r\n        if((g = getThreadGroup()) != null) {\r\n            if (newPriority > g.getMaxPriority()) {\r\n                newPriority = g.getMaxPriority();\r\n            }\r\n            setPriority0(priority = newPriority);\r\n        }\r\n    }\r\n```\r\n\r\nä¸ä¸€å®šä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å°±å…ˆæ‰§è¡Œã€‚\r\n\r\n### å®ˆæŠ¤çº¿ç¨‹\r\n\r\nå½“è¿›ç¨‹ä¸­ä¸å­˜åœ¨éå®ˆæŠ¤çº¿ç¨‹äº†ï¼Œåˆ™å®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨é”€æ¯ã€‚åƒåœ¾å›æ”¶çº¿ç¨‹å°±æ˜¯å…¸å‹çš„å®ˆæŠ¤çº¿ç¨‹ï¼Œå½“è¿›ç¨‹ä¸­æ²¡æœ‰éå®ˆæŠ¤çº¿ç¨‹äº†ï¼Œåˆ™åƒåœ¾å›æ”¶çº¿ç¨‹ä¹Ÿå°±æ²¡æœ‰å­˜åœ¨çš„å¿…è¦äº†ï¼Œè‡ªåŠ¨é”€æ¯ã€‚\r\n\r\n```java\r\n /**\r\n     * Marks this thread as either a {@linkplain #isDaemon daemon} thread\r\n     * or a user thread. The Java Virtual Machine exits when the only\r\n     * threads running are all daemon threads.\r\n     *\r\n     * <p> This method must be invoked before the thread is started.\r\n     *\r\n     * @param  on\r\n     *         if {@code true}, marks this thread as a daemon thread\r\n     * @throws  IllegalThreadStateException\r\n     *          if this thread is {@linkplain #isAlive alive}\r\n     * @throws  SecurityException\r\n     *          if {@link #checkAccess} determines that the current\r\n     *          thread cannot modify this thread\r\n     */\r\n    public final void setDaemon(boolean on) {\r\n        checkAccess();\r\n        if (isAlive()) {\r\n            throw new IllegalThreadStateException();\r\n        }\r\n        daemon = on;\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\n\r\n## ç¬¬äºŒç«  â€”â€” å¯¹è±¡åŠå˜é‡çš„å¹¶å‘è®¿é—®\r\n\r\næŠ€æœ¯ç‚¹ï¼š\r\n\r\n+ synchronized å¯¹è±¡ç›‘è§†å™¨ä¸º Object æ—¶çš„ä½¿ç”¨\r\n+ synchronized å¯¹è±¡ç›‘è§†å™¨ä¸º Class æ—¶çš„ä½¿ç”¨\r\n+ éçº¿ç¨‹å®‰å…¨æ˜¯å¦‚ä½•å‡ºç°çš„\r\n+ å…³é”®å­— volatile çš„ä¸»è¦ä½œç”¨\r\n+ å…³é”®å­— volatile ä¸ synchronized çš„åŒºåˆ«åŠä½¿ç”¨æƒ…å†µ\r\n\r\n### synchronized åŒæ­¥æ–¹æ³•\r\n\r\n#### æ–¹æ³•å†…çš„å˜é‡ä¸ºçº¿ç¨‹å®‰å…¨\r\n\r\nâ€œéçº¿ç¨‹å®‰å…¨â€é—®é¢˜å­˜åœ¨äºâ€œå®ä¾‹å˜é‡â€ä¸­ï¼Œå¦‚æœæ˜¯æ–¹æ³•å†…éƒ¨çš„ç§æœ‰å˜é‡ï¼Œåˆ™ä¸å­˜åœ¨â€œéçº¿ç¨‹å®‰å…¨â€é—®é¢˜ï¼Œæ‰€å¾—ç»“æœä¹Ÿå°±æ˜¯â€œçº¿ç¨‹å®‰å…¨â€äº†ã€‚\r\n\r\n#### å®ä¾‹å˜é‡éçº¿ç¨‹å®‰å…¨\r\n\r\nå¦‚æœå¤šçº¿ç¨‹å…±åŒè®¿é—®ä¸€ä¸ªå¯¹è±¡ä¸­çš„å®ä¾‹å˜é‡ï¼Œåˆ™æœ‰å¯èƒ½å‡ºç°â€œéçº¿ç¨‹å®‰å…¨â€é—®é¢˜ã€‚\r\n\r\nåœ¨ä¸¤ä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå¯¹è±¡ä¸­çš„åŒæ­¥æ–¹æ³•æ—¶ä¸€å®šæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\r\n\r\n#### è„è¯»\r\n\r\nå‘ç”Ÿè„è¯»çš„æƒ…å†µæ˜¯åœ¨è¯»å–å®ä¾‹å˜é‡æ—¶ï¼Œæ­¤å€¼å·²ç»è¢«å…¶ä»–çº¿ç¨‹æ›´æ”¹è¿‡äº†ã€‚\r\n\r\nå¦‚ä¸‹ä¾‹å­å°±å¯ä»¥è¯´æ˜ï¼Œå¦‚æœä¸åŠ  synchronized å…³é”®å­—åœ¨ setValue å’Œ getValue æ–¹æ³•ä¸Šï¼Œå°±ä¼šå‡ºç°æ•°æ®è„è¯»ã€‚\r\n\r\n```java\r\nclass VarName\r\n{\r\n    private String userName = \"A\";\r\n    private String password = \"AA\";\r\n    synchronized public void setValue(String userName, String password) {\r\n        try {\r\n            this.userName = userName;\r\n            Thread.sleep(500);\r\n            this.password = password;\r\n            System.out.println(\"setValue method Thread name is :  \" + Thread.currentThread().getName() + \" userName = \" + userName + \" password = \" + password);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    //synchronized\r\n    public void getValue() {\r\n        System.out.println(\"getValue method Thread name is :  \" + Thread.currentThread().getName() + \" userName = \" + userName + \" password = \" + password);\r\n    }\r\n}\r\n\r\nclass Thread1 extends Thread\r\n{\r\n    private VarName varName;\r\n    public Thread1(VarName varName) {\r\n        this.varName = varName;\r\n    }\r\n    @Override\r\n    public void run() {\r\n        varName.setValue(\"B\", \"BB\");\r\n    }\r\n}\r\n\r\npublic class Test\r\n{\r\n    public static void main(String[] args) throws InterruptedException {\r\n        VarName v = new VarName();\r\n        Thread1 thread1 = new Thread1(v);\r\n        thread1.start();\r\n        Thread.sleep(200);//æ‰“å°ç»“æœå—ç¡çœ æ—¶é—´çš„å½±å“\r\n        v.getValue();\r\n    }\r\n}\r\n```\r\n\r\n#### synchronized é”é‡å…¥\r\n\r\nå…³é”®å­— synchronized æ‹¥æœ‰é”é‡å…¥çš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯åœ¨ä½¿ç”¨ synchronized æ—¶ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹å¾—åˆ°ä¸€ä¸ªå¯¹è±¡é”åï¼Œå†æ¬¡è¯·æ±‚æ­¤å¯¹è±¡é”æ˜¯å¯ä»¥å†æ¬¡å¾—åˆ°è¯¥å¯¹è±¡çš„é”çš„ã€‚è¿™ä¹Ÿè¯æ˜äº†åœ¨ä¸€ä¸ª synchronized æ–¹æ³•/å—çš„å†…éƒ¨è°ƒç”¨æœ¬ç±»çš„å…¶ä»– synchronized æ–¹æ³•/å—æ—¶ï¼Œæ˜¯æ°¸è¿œå¯ä»¥å¾—åˆ°é”çš„ã€‚\r\n\r\n```java\r\nclass Service\r\n{\r\n    synchronized public void service1() {\r\n        System.out.println(\"service 1\");\r\n        service2();\r\n    }\r\n    synchronized public void service2() {\r\n        System.out.println(\"service 2\");\r\n        service3();\r\n    }\r\n    synchronized public void service3() {\r\n        System.out.println(\"service 3\");\r\n    }\r\n}\r\n\r\nclass Thread2 extends Thread\r\n{\r\n    @Override\r\n    public void run() {\r\n        Service s = new Service();\r\n        s.service1();\r\n    }\r\n}\r\n\r\npublic class Test2\r\n{\r\n    public static void main(String[] args) {\r\n        Thread2 t2 = new Thread2();\r\n        t2.start();\r\n    }\r\n}\r\n```\r\n\r\nè¿è¡Œç»“æœï¼š\r\n\r\n```\r\nservice 1\r\nservice 2\r\nservice 3\r\n```\r\n\r\n#### åŒæ­¥ä¸å…·æœ‰ç»§æ‰¿æ€§\r\n\r\nåŒæ­¥ä¸å¯ä»¥ç»§æ‰¿ã€‚\r\n\r\n### synchronized åŒæ­¥è¯­å¥å—\r\n\r\n#### synchronized ä»£ç å—é—´çš„åŒæ­¥æ€§\r\n\r\nå½“ä¸€ä¸ªçº¿ç¨‹è®¿é—® object çš„ä¸€ä¸ª synchronized(this) åŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¯¹åŒä¸€ä¸ª object ä¸­æ‰€æœ‰å…¶ä»– synchronized(this) åŒæ­¥ä»£ç å—çš„è®¿é—®å°†è¢«é˜»å¡ï¼Œè¿™è¯´æ˜ synchronized ä½¿ç”¨çš„ â€œå¯¹è±¡ç›‘è§†å™¨â€ æ˜¯ä¸€ä¸ªã€‚\r\n\r\n#### å°†ä»»æ„å¯¹è±¡ä½œä¸ºå¯¹è±¡ç›‘è§†å™¨\r\n\r\nå¤šä¸ªçº¿ç¨‹è°ƒç”¨åŒä¸€ä¸ªå¯¹è±¡ä¸­çš„ä¸åŒåç§°çš„ synchronized åŒæ­¥æ–¹æ³•æˆ–è€… synchronized(this) åŒæ­¥ä»£ç å—æ—¶ï¼Œè°ƒç”¨çš„æ•ˆæœå°±æ˜¯æŒ‰é¡ºåºæ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åŒæ­¥çš„ï¼Œé˜»å¡çš„ã€‚\r\n\r\n#### é™æ€åŒæ­¥ synchronized æ–¹æ³•ä¸  synchronized(class) ä»£ç å—\r\n\r\nå…³é”®å­— synchronized è¿˜å¯ä»¥åº”ç”¨åœ¨ static é™æ€æ–¹æ³•ä¸Šï¼Œå¦‚æœè¿™æ ·å†™å°±æ˜¯å¯¹å½“å‰çš„ *.java æ–‡ä»¶å¯¹åº”çš„ Class ç±»è¿›è¡ŒåŠ é”ã€‚è€Œ synchronized å…³é”®å­—åŠ åˆ°é static é™æ€æ–¹æ³•ä¸Šå°±æ˜¯ç»™å¯¹è±¡åŠ é”ã€‚\r\n\r\n#### å¤šçº¿ç¨‹çš„æ­»é”\r\n\r\n\r\n\r\n### volatile å…³é”®å­—\r\n\r\nä½œç”¨ï¼šä½¿å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹é—´å¯è§ã€‚\r\n\r\né€šè¿‡ä½¿ç”¨ volatile å…³é”®å­—ï¼Œå¼ºåˆ¶çš„ä»å…¬å…±å†…å­˜ä¸­è¯»å–å˜é‡çš„å€¼ã€‚ä½¿ç”¨ volatile å…³é”®å­—å¢åŠ äº†å®ä¾‹å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼Œä½† volatile å…³é”®å­—æœ€è‡´å‘½çš„ç¼ºç‚¹å°±æ˜¯ä¸æ”¯æŒåŸå­æ€§ã€‚\r\n\r\nå…³é”®å­— synchronized å’Œ volatile æ¯”è¾ƒï¼š\r\n\r\n+ å…³é”®å­— volatile æ˜¯çº¿ç¨‹åŒæ­¥çš„è½»é‡å®ç°ï¼Œæ‰€ä»¥ volatile æ€§èƒ½è‚¯å®šè¦æ¯” synchronized è¦å¥½ï¼Œå¹¶ä¸” volatile åªèƒ½ä¿®é¥°äºå˜é‡ï¼Œè€Œ synchronized å¯ä»¥ä¿®é¥°æ–¹æ³•ï¼Œä»¥åŠä»£ç å—ã€‚\r\n\r\n+ å¤šçº¿ç¨‹è®¿é—® volatile ä¸ä¼šå‘ç”Ÿé˜»å¡ï¼Œè€Œ synchronized ä¼šå‡ºç°é˜»å¡ã€‚\r\n\r\n+ volatile èƒ½ä¿è¯æ•°æ®çš„å¯è§æ€§ï¼Œä½†ä¸èƒ½ä¿è¯åŸå­æ€§ï¼›è€Œ synchronized å¯ä»¥ä¿è¯åŸå­æ€§ï¼Œä¹Ÿå¯ä»¥é—´æ¥ä¿è¯å¯è§æ€§ï¼Œå› ä¸ºå®ƒä¼šå°†ç§æœ‰å†…å­˜å’Œå…¬æœ‰å†…å­˜ä¸­çš„æ•°æ®åšåŒæ­¥ã€‚\r\n\r\n+ å…³é”®å­— volatile è§£å†³çš„æ˜¯å˜é‡åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´çš„å¯è§æ€§ï¼›è€Œ synchronized å…³é”®å­—è§£å†³çš„æ˜¯å¤šä¸ªçº¿ç¨‹ä¹‹é—´è®¿é—®èµ„æºçš„åŒæ­¥æ€§ã€‚\r\n\r\n  â€‹\r\n\r\n\r\n\r\n## ç¬¬ä¸‰ç«  â€”â€” çº¿ç¨‹é—´é€šä¿¡\r\n\r\næŠ€æœ¯ç‚¹ï¼š\r\n\r\n+ ä½¿ç”¨ wait/notify å®ç°çº¿ç¨‹é—´çš„é€šä¿¡\r\n+ ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼çš„å®ç°\r\n+ æ–¹æ³• join çš„ä½¿ç”¨\r\n+ ThreadLocal ç±»çš„ä½¿ç”¨\r\n\r\n\r\n### ç­‰å¾…/é€šçŸ¥æœºåˆ¶\r\n\r\nwait ä½¿çº¿ç¨‹åœæ­¢è¿è¡Œï¼Œnotify ä½¿åœæ­¢çš„çº¿ç¨‹ç»§ç»­è¿è¡Œã€‚\r\n\r\nå…³é”®å­— synchronized å¯ä»¥å°†ä»»ä½•ä¸€ä¸ª Object å¯¹è±¡ä½œä¸ºåŒæ­¥å¯¹è±¡çœ‹å¾…ï¼Œè€Œ Java ä¸ºæ¯ä¸ª Object éƒ½å®ç°äº† wait() å’Œ notify() æ–¹æ³•ï¼Œä»–ä»¬å¿…é¡»ç”¨åœ¨è¢« synchronized åŒæ­¥çš„ Object çš„ä¸´ç•ŒåŒºå†…ã€‚é€šè¿‡è°ƒç”¨ wait æ–¹æ³•å¯ä»¥ä½¿å¤„äºä¸´ç•ŒåŒºå†…çš„çº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼ŒåŒæ—¶é‡Šæ”¾è¢«åŒæ­¥å¯¹è±¡çš„é”ã€‚è€Œ notify æ“ä½œå¯ä»¥å”¤é†’ä¸€ä¸ªå› è°ƒç”¨äº† wait æ–¹æ³•è€Œå¤„äºé˜»å¡çŠ¶æ€çš„çº¿ç¨‹ï¼Œä½¿å…¶è¿›å…¥å°±ç»ªçŠ¶æ€ã€‚è¢«é‡æ–°å”¤é†’çš„çº¿ç¨‹ä¼šè¯•å›¾é‡æ–°è·å¾—ä¸´ç•ŒåŒºçš„æ§åˆ¶æƒï¼Œç»§ç»­æ‰§è¡Œä¸´ç•ŒåŒºå†… wait ä¹‹åçš„ä»£ç ã€‚\r\n\r\nwait æ–¹æ³•å¯ä»¥ä½¿è°ƒç”¨è¯¥æ–¹æ³•çš„çº¿ç¨‹é‡Šæ”¾å…±äº«èµ„æºçš„é”ï¼Œä»è¿è¡ŒçŠ¶æ€é€€å‡ºï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°å†æ¬¡è¢«å”¤é†’ã€‚\r\n\r\nnotify() æ–¹æ³•å¯ä»¥éšæœºå”¤é†’ç­‰å¾…å¯¹åˆ—ä¸­ç­‰å¾…åŒä¸€å…±äº«èµ„æºçš„ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä½¿è¯¥çº¿ç¨‹é€€å‡ºç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚\r\n\r\nnotifyAll() æ–¹æ³•å¯ä»¥éšæœºå”¤é†’ç­‰å¾…å¯¹åˆ—ä¸­ç­‰å¾…åŒä¸€å…±äº«èµ„æºçš„æ‰€æœ‰çº¿ç¨‹ï¼Œå¹¶ä½¿è¿™äº›çº¿ç¨‹é€€å‡ºç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚\r\n\r\n#### çº¿ç¨‹çŠ¶æ€ç¤ºæ„å›¾ï¼š\r\n\r\n![](http://ohfk1r827.bkt.clouddn.com/thread-state.jpg)\r\n\r\n+ æ–°åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å¯¹è±¡åï¼Œåœ¨è°ƒç”¨å®ƒçš„ start() æ–¹æ³•ï¼Œç³»ç»Ÿä¼šä¸ºæ­¤çº¿ç¨‹åˆ†é… CPU èµ„æºï¼Œä½¿å…¶å¤„äº Runnableï¼ˆå¯è¿è¡Œï¼‰çŠ¶æ€ï¼Œå¦‚æœçº¿ç¨‹æŠ¢å åˆ° CPU èµ„æºï¼Œæ­¤çº¿ç¨‹å°±ä¼šå¤„äº Running ï¼ˆè¿è¡Œï¼‰çŠ¶æ€\r\n\r\n+ Runnable å’Œ Running çŠ¶æ€ä¹‹é—´å¯ä»¥ç›¸äº’åˆ‡æ¢ï¼Œå› ä¸ºçº¿ç¨‹æœ‰å¯èƒ½è¿è¡Œä¸€æ®µæ—¶é—´åï¼Œæœ‰å…¶ä»–ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹æŠ¢å äº† CPU èµ„æºï¼Œæ­¤æ—¶çº¿ç¨‹å°±ä» Running çŠ¶æ€å˜æˆäº† Runnable çŠ¶æ€ã€‚\r\n\r\n  çº¿ç¨‹è¿›å…¥ Runnable çŠ¶æ€æœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µï¼š\r\n\r\n  + è°ƒç”¨ sleep() æ–¹æ³•åç»è¿‡çš„æ—¶é—´è¶…è¿‡äº†æŒ‡å®šçš„ä¼‘çœ æ—¶é—´\r\n  + çº¿ç¨‹è°ƒç”¨çš„é˜»å¡ IO å·²ç»è¿”å›ï¼Œé˜»å¡æ–¹æ³•æ‰§è¡Œå®Œæ¯•\r\n  + çº¿ç¨‹æˆåŠŸçš„è·å¾—äº†è¯•å›¾åŒæ­¥çš„ç›‘è§†å™¨\r\n  + çº¿ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸ªé€šçŸ¥ï¼Œå…¶ä»–çº¿ç¨‹å‘å‡ºäº†é€šçŸ¥\r\n  + å¤„äºæŒ‚çŠ¶æ€çš„çº¿ç¨‹è°ƒç”¨äº† resume æ¢å¤æ–¹æ³•\r\n\r\n+ Blocked æ˜¯é˜»å¡çš„æ„æ€ï¼Œä¾‹å¦‚çº¿ç¨‹é‡åˆ°ä¸€ä¸ª IO æ“ä½œï¼Œæ­¤æ—¶ CPU å¤„äºç©ºé—²çŠ¶æ€ï¼Œå¯èƒ½ä¼šè½¬è€ŒæŠŠ CPU æ—¶é—´ç‰‡åˆ†é…ç»™å…¶ä»–çº¿ç¨‹ï¼Œè¿™æ—¶ä¹Ÿå¯ä»¥ç§°ä¸º â€œæš‚åœâ€çŠ¶æ€ã€‚Blocked çŠ¶æ€ç»“æŸä¹‹åï¼Œè¿›å…¥ Runnable çŠ¶æ€ï¼Œç­‰å¾…ç³»ç»Ÿé‡æ–°åˆ†é…èµ„æºã€‚\r\n\r\n  å‡ºç°é˜»å¡çŠ¶æ€çš„æœ‰å¦‚ä¸‹å‡ ç§æƒ…å†µï¼š\r\n\r\n  + çº¿ç¨‹è°ƒç”¨ sleep æ–¹æ³•ï¼Œä¸»åŠ¨æ”¾å¼ƒå ç”¨çš„å¤„ç†å™¨èµ„æº\r\n  + çº¿ç¨‹è°ƒç”¨äº†é˜»å¡å¼ IO æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•è¿”å›ä¹‹å‰ï¼Œè¯¥çº¿ç¨‹è¢«é˜»å¡\r\n  + çº¿ç¨‹è¯•å›¾è·å¾—ä¸€ä¸ªåŒæ­¥ç›‘è§†å™¨ï¼Œä½†è¯¥åŒæ­¥ç›‘è§†å™¨æ­£åœ¨è¢«å…¶ä»–çº¿ç¨‹æ‰€æŒæœ‰\r\n  + çº¿ç¨‹ç­‰å¾…æŸä¸ªé€šçŸ¥\r\n  + ç¨‹åºè°ƒç”¨äº† suspend æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ·\r\n\r\n+ run æ–¹æ³•è¿è¡Œç»“æŸåè¿›å…¥é”€æ¯é˜¶æ®µï¼Œæ•´ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œæ¯•ã€‚\r\n\r\n#### ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¨¡å¼å®ç°\r\n\r\nä¸€ä¸ªç”Ÿäº§è€…ï¼Œä¸€ä¸ªæ¶ˆè´¹è€…\r\n\r\nå­˜å‚¨å€¼å¯¹è±¡ï¼š\r\n\r\n```java\r\npackage com.zhisheng.thread.thread5;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/3.\r\n * å­˜å‚¨å€¼å¯¹è±¡\r\n */\r\npublic class ValueObject\r\n{\r\n    public static String value = \"\";\r\n}\r\n```\r\n\r\nç”Ÿäº§è€…ï¼š\r\n\r\n```java\r\npackage com.zhisheng.thread.thread5;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/3.\r\n * ç”Ÿäº§è€…\r\n */\r\npublic class Product\r\n{\r\n    private String lock;\r\n\r\n    public Product(String lock) {\r\n        this.lock = lock;\r\n    }\r\n\r\n    public void setValue() {\r\n        synchronized (lock) {\r\n            if (!ValueObject.value.equals(\"\")) {\r\n                try {\r\n                    lock.wait();\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            String value = System.currentTimeMillis() + \"_\" + System.nanoTime();\r\n            System.out.println(\"ç”Ÿäº§è€… set çš„å€¼æ˜¯ï¼š\" + value);\r\n            ValueObject.value = value;\r\n            lock.notify();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\næ¶ˆè´¹è€…ï¼š\r\n\r\n```java\r\npackage com.zhisheng.thread.thread5;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/3.\r\n * æ¶ˆè´¹è€…\r\n */\r\npublic class Resume\r\n{\r\n    private String lock;\r\n\r\n    public Resume(String lock) {\r\n        this.lock = lock;\r\n    }\r\n\r\n    public void getValue() {\r\n        synchronized (lock) {\r\n            if (ValueObject.value.equals(\"\")) {\r\n                try {\r\n                    lock.wait();\r\n                } catch (InterruptedException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            System.out.println(\"æ¶ˆè´¹è€… get çš„å€¼ï¼š\" + ValueObject.value);\r\n            ValueObject.value = \"\";\r\n            lock.notify();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nç”Ÿäº§è€…çº¿ç¨‹ï¼š\r\n\r\n```java\r\npackage com.zhisheng.thread.thread5;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/3.\r\n * ç”Ÿäº§è€…çº¿ç¨‹\r\n */\r\npublic class ProductThread extends Thread\r\n{\r\n    private Product p;\r\n\r\n    public ProductThread(Product p) {\r\n        this.p = p;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        while (true) {\r\n            p.setValue();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\næ¶ˆè´¹è€…çº¿ç¨‹ï¼š\r\n\r\n```java\r\npackage com.zhisheng.thread.thread5;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/3.\r\n * æ¶ˆè´¹è€…çº¿ç¨‹\r\n */\r\npublic class ResumeThread extends Thread\r\n{\r\n    private Resume r;\r\n\r\n    public ResumeThread(Resume r) {\r\n        this.r = r;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        while (true) {\r\n            r.getValue();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nä¸»å‡½æ•°ï¼š\r\n\r\n```java\r\npackage com.zhisheng.thread.thread5;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/3.\r\n * ä¸€ä¸ªç”Ÿäº§è€…ä¸€ä¸ªæ¶ˆè´¹è€…æµ‹è¯•\r\n */\r\npublic class Test\r\n{\r\n    public static void main(String[] args) {\r\n        String str = new String(\"\");\r\n        Product p = new Product(str);\r\n        Resume r = new Resume(str);;\r\n        ProductThread pt = new ProductThread(p);\r\n        ResumeThread rt = new ResumeThread(r);\r\n        pt.start();\r\n        rt.start();\r\n    }\r\n}\r\n```\r\n\r\né¢˜ç›®ï¼šåˆ›å»º20ä¸ªçº¿ç¨‹ï¼Œå…¶ä¸­10ä¸ªçº¿ç¨‹æ˜¯å°†æ•°æ®å¤‡ä»½åˆ°æ•°æ®åº“Aï¼Œå¦å¤–10ä¸ªçº¿ç¨‹å°†æ•°æ®å¤‡ä»½åˆ°æ•°æ®åº“Bä¸­å»ï¼Œå¹¶ä¸”å¤‡ä»½æ•°æ®åº“Aå’Œå¤‡ä»½æ•°æ®åº“Bæ˜¯äº¤å‰è¿›è¡Œçš„ã€‚\r\n\r\nå·¥å…·ç±»ï¼š\r\n\r\n```java\r\npackage com.zhisheng.thread.thread6;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/3.\r\n * åˆ›å»º20ä¸ªçº¿ç¨‹ï¼Œå…¶ä¸­10ä¸ªçº¿ç¨‹æ˜¯å°†æ•°æ®å¤‡ä»½åˆ°æ•°æ®åº“Aï¼Œå¦å¤–10ä¸ªçº¿ç¨‹å°†æ•°æ®å¤‡ä»½åˆ°æ•°æ®åº“Bä¸­å»ï¼Œå¹¶ä¸”\r\n * å¤‡ä»½æ•°æ®åº“Aå’Œå¤‡ä»½æ•°æ®åº“Bæ˜¯äº¤å‰è¿›è¡Œçš„\r\n */\r\npublic class DBTools\r\n{\r\n    volatile private boolean prevIsA = false;\r\n\r\n    //ç¡®ä¿Aå¤‡ä»½å…ˆè¿›è¡Œ\r\n    synchronized public void backA() {\r\n        while (prevIsA == true) {\r\n            try {\r\n                wait();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        for (int i = 0; i < 5; i++) {\r\n            System.out.println(\"AAAAA\");\r\n        }\r\n        prevIsA = true;\r\n        notifyAll();\r\n    }\r\n\r\n    synchronized public void backB() {\r\n        while (prevIsA == false) {\r\n            try {\r\n                wait();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        for (int i = 0; i < 5; i++) {\r\n            System.out.println(\"BBBBB\");\r\n        }\r\n        prevIsA = false;\r\n        notifyAll();\r\n    }\r\n}\r\n```\r\n\r\nå¤‡ä»½Aå…ˆçº¿ç¨‹ï¼š\r\n\r\n```java\r\npackage com.zhisheng.thread.thread6;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/3.\r\n */\r\npublic class ThreadA extends Thread\r\n{\r\n    private DBTools dbTools;\r\n\r\n    public ThreadA(DBTools dbTools) {\r\n        this.dbTools = dbTools;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        dbTools.backA();\r\n    }\r\n}\r\n```\r\n\r\nå¤‡ä»½Bçº¿ç¨‹ï¼š\r\n\r\n```java\r\npackage com.zhisheng.thread.thread6;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/3.\r\n */\r\npublic class ThreadB extends Thread\r\n{\r\n    private DBTools dbTools;\r\n\r\n    public ThreadB(DBTools dbTools) {\r\n        this.dbTools = dbTools;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        dbTools.backB();\r\n    }\r\n}\r\n```\r\n\r\næµ‹è¯•ï¼š\r\n\r\n```java\r\npackage com.zhisheng.thread.thread6;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/3.\r\n */\r\npublic class Test\r\n{\r\n    public static void main(String[] args) {\r\n        DBTools dbTools = new DBTools();\r\n        for (int i = 0; i < 20; i++) {\r\n            ThreadB tb = new ThreadB(dbTools);\r\n            tb.start();\r\n            ThreadA ta = new ThreadA(dbTools);\r\n            ta.start();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n### Join æ–¹æ³•çš„ä½¿ç”¨\r\n\r\nä½œç”¨ï¼šç­‰å¾…çº¿ç¨‹å¯¹è±¡é”€æ¯\r\n\r\njoin æ–¹æ³•å…·æœ‰ä½¿çº¿ç¨‹æ’é˜Ÿè¿è¡Œçš„ä½œç”¨ï¼Œæœ‰äº›ç±»ä¼¼åŒæ­¥çš„è¿è¡Œæ•ˆæœã€‚join ä¸ synchronized çš„åŒºåˆ«æ˜¯ï¼šjoin åœ¨å†…éƒ¨ä½¿ç”¨ wait() æ–¹æ³•è¿›è¡Œç­‰å¾…ï¼Œè€Œ synchronized å…³é”®å­—ä½¿ç”¨çš„æ˜¯ â€œå¯¹è±¡ç›‘è§†å™¨â€ åŸç†åšä¸ºåŒæ­¥ã€‚\r\n\r\nåœ¨ join è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå½“å‰çº¿ç¨‹å¯¹è±¡è¢«ä¸­æ–­ï¼Œåˆ™å½“å‰çº¿ç¨‹å‡ºç°å¼‚å¸¸ã€‚\r\n\r\næ–¹æ³• join(long) ä¸­çš„å‚æ•°æ˜¯è®¾å®šç­‰å¾…çš„æ—¶é—´ã€‚\r\n\r\n```java\r\n/**\r\n     * ç­‰å¾…è¯¥çº¿ç¨‹ç»ˆæ­¢çš„æ—¶é—´æœ€é•¿ä¸º millis æ¯«ç§’ã€‚è¶…æ—¶ä¸º 0 æ„å‘³ç€è¦ä¸€ç›´ç­‰ä¸‹å»ã€‚\r\n     * Waits at most {@code millis} milliseconds for this thread to\r\n     * die. A timeout of {@code 0} means to wait forever.\r\n     *\r\n     * <p> This implementation uses a loop of {@code this.wait} calls\r\n     * conditioned on {@code this.isAlive}. As a thread terminates the\r\n     * {@code this.notifyAll} method is invoked. It is recommended that\r\n     * applications not use {@code wait}, {@code notify}, or\r\n     * {@code notifyAll} on {@code Thread} instances.\r\n     *\r\n     * @param  millis\r\n     *         the time to wait in milliseconds\r\n     *\r\n     * @throws  IllegalArgumentException\r\n     *          if the value of {@code millis} is negative\r\n     *\r\n     * @throws  InterruptedException\r\n     *          if any thread has interrupted the current thread. The\r\n     *          <i>interrupted status</i> of the current thread is\r\n     *          cleared when this exception is thrown.\r\n     */\r\n    public final synchronized void join(long millis)\r\n    throws InterruptedException {\r\n        long base = System.currentTimeMillis();\r\n        long now = 0;\r\n        if (millis < 0) {\r\n            throw new IllegalArgumentException(\"timeout value is negative\");\r\n        if (millis == 0) {\r\n            while (isAlive()) {\r\n                wait(0);\r\n            }\r\n        } else {\r\n            while (isAlive()) {\r\n                long delay = millis - now;\r\n                if (delay <= 0) {\r\n                    break;\r\n                }\r\n                wait(delay);\r\n                now = System.currentTimeMillis() - base;\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\n### ç±»  ThreadLocal  çš„ä½¿ç”¨\r\n\r\nè¯¥ç±»æä¾›äº†çº¿ç¨‹å±€éƒ¨ (thread-local) å˜é‡ã€‚è¿™äº›å˜é‡ä¸åŒäºå®ƒä»¬çš„æ™®é€šå¯¹åº”ç‰©ï¼Œå› ä¸ºè®¿é—®æŸä¸ªå˜é‡ï¼ˆé€šè¿‡å…¶ get æˆ–\r\nset æ–¹æ³•ï¼‰çš„æ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å±€éƒ¨å˜é‡ï¼Œå®ƒç‹¬ç«‹äºå˜é‡çš„åˆå§‹åŒ–å‰¯æœ¬ã€‚ThreadLocal å®ä¾‹é€šå¸¸æ˜¯ç±»ä¸­çš„\r\nprivate static å­—æ®µï¼Œå®ƒä»¬å¸Œæœ›å°†çŠ¶æ€ä¸æŸä¸€ä¸ªçº¿ç¨‹ï¼ˆä¾‹å¦‚ï¼Œç”¨æˆ· ID æˆ–äº‹åŠ¡ IDï¼‰ç›¸å…³è”ã€‚\r\n\r\n#### get() æ–¹æ³•\r\n\r\n```java\r\npublic T get() {\r\n        Thread t = Thread.currentThread();\r\n        ThreadLocalMap map = getMap(t);\r\n        if (map != null) {\r\n            ThreadLocalMap.Entry e = map.getEntry(this);\r\n            if (e != null) {\r\n                @SuppressWarnings(\"unchecked\")\r\n                T result = (T)e.value;\r\n                return result;\r\n            }\r\n        }\r\n        return setInitialValue();\r\n    }\r\n```\r\n\r\nè¿”å›æ­¤çº¿ç¨‹å±€éƒ¨å˜é‡çš„å½“å‰çº¿ç¨‹å‰¯æœ¬ä¸­çš„å€¼ã€‚å¦‚æœå˜é‡æ²¡æœ‰ç”¨äºå½“å‰çº¿ç¨‹çš„å€¼ï¼Œåˆ™å…ˆå°†å…¶åˆå§‹åŒ–ä¸ºè°ƒç”¨ initialValue() æ–¹æ³•è¿”å›çš„å€¼ã€‚\r\n\r\n### InheritableThreadLocal ç±»çš„ä½¿ç”¨\r\n\r\nè¯¥ç±»æ‰©å±•äº† ThreadLocalï¼Œä¸ºå­çº¿ç¨‹æä¾›ä»çˆ¶çº¿ç¨‹é‚£é‡Œç»§æ‰¿çš„å€¼ï¼šåœ¨åˆ›å»ºå­çº¿ç¨‹æ—¶ï¼Œå­çº¿ç¨‹ä¼šæ¥æ”¶æ‰€æœ‰å¯ç»§æ‰¿çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„åˆå§‹å€¼ï¼Œä»¥è·å¾—çˆ¶çº¿ç¨‹æ‰€å…·æœ‰çš„å€¼ã€‚é€šå¸¸ï¼Œå­çº¿ç¨‹çš„å€¼ä¸çˆ¶çº¿ç¨‹çš„å€¼æ˜¯ä¸€è‡´çš„ï¼›ä½†æ˜¯ï¼Œé€šè¿‡é‡å†™è¿™ä¸ªç±»ä¸­çš„ childValue æ–¹æ³•ï¼Œå­çº¿ç¨‹çš„å€¼å¯ä»¥ä½œä¸ºçˆ¶çº¿ç¨‹å€¼çš„ä¸€ä¸ªä»»æ„å‡½æ•°ã€‚\r\n\r\nå½“å¿…é¡»å°†å˜é‡ï¼ˆå¦‚ç”¨æˆ· ID å’Œ äº‹åŠ¡ IDï¼‰ä¸­ç»´æŠ¤çš„æ¯çº¿ç¨‹å±æ€§ï¼ˆper-thread-attributeï¼‰è‡ªåŠ¨ä¼ é€ç»™åˆ›å»ºçš„æ‰€æœ‰å­çº¿ç¨‹æ—¶ï¼Œåº”å°½å¯èƒ½åœ°é‡‡ç”¨å¯ç»§æ‰¿çš„çº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œè€Œä¸æ˜¯é‡‡ç”¨æ™®é€šçš„çº¿ç¨‹å±€éƒ¨å˜é‡ã€‚\r\n\r\n\r\n\r\n## ç¬¬å››ç«  â€”â€”  Lock çš„ä½¿ç”¨\r\n\r\n### ä½¿ç”¨ ReentrantLock ç±»\r\n\r\nä¸€ä¸ªå¯é‡å…¥çš„äº’æ–¥é” Lockï¼Œå®ƒå…·æœ‰ä¸ä½¿ç”¨ `synchronized` æ–¹æ³•å’Œè¯­å¥æ‰€è®¿é—®çš„éšå¼ç›‘è§†å™¨é”ç›¸åŒçš„ä¸€äº›åŸºæœ¬è¡Œä¸ºå’Œè¯­ä¹‰ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€‚\r\n\r\n`ReentrantLock` å°†ç”±æœ€è¿‘æˆåŠŸè·å¾—é”ï¼Œå¹¶ä¸”è¿˜æ²¡æœ‰é‡Šæ”¾è¯¥é”çš„çº¿ç¨‹æ‰€*æ‹¥æœ‰*ã€‚å½“é”æ²¡æœ‰è¢«å¦ä¸€ä¸ªçº¿ç¨‹æ‰€æ‹¥æœ‰æ—¶ï¼Œè°ƒç”¨ `lock` çš„çº¿ç¨‹å°†æˆåŠŸè·å–è¯¥é”å¹¶è¿”å›ã€‚å¦‚æœå½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰è¯¥é”ï¼Œæ­¤æ–¹æ³•å°†ç«‹å³è¿”å›ã€‚å¯ä»¥ä½¿ç”¨ `isHeldByCurrentThread()`å’Œ `getHoldCount()`æ–¹æ³•æ¥æ£€æŸ¥æ­¤æƒ…å†µæ˜¯å¦å‘ç”Ÿã€‚\r\n\r\næ­¤ç±»çš„æ„é€ æ–¹æ³•æ¥å—ä¸€ä¸ªå¯é€‰çš„*å…¬å¹³* å‚æ•°ã€‚å½“è®¾ç½®ä¸º `true` æ—¶ï¼Œåœ¨å¤šä¸ªçº¿ç¨‹çš„äº‰ç”¨ä¸‹ï¼Œè¿™äº›é”å€¾å‘äºå°†è®¿é—®æƒæˆäºˆç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹ã€‚å¦åˆ™æ­¤é”å°†æ— æ³•ä¿è¯ä»»ä½•ç‰¹å®šè®¿é—®é¡ºåºã€‚ä¸é‡‡ç”¨é»˜è®¤è®¾ç½®ï¼ˆä½¿ç”¨ä¸å…¬å¹³é”ï¼‰ç›¸æ¯”ï¼Œä½¿ç”¨å…¬å¹³é”çš„ç¨‹åºåœ¨è®¸å¤šçº¿ç¨‹è®¿é—®æ—¶è¡¨ç°ä¸ºå¾ˆä½çš„æ€»ä½“ååé‡ï¼ˆå³é€Ÿåº¦å¾ˆæ…¢ï¼Œå¸¸å¸¸æå…¶æ…¢ï¼‰ï¼Œä½†æ˜¯åœ¨è·å¾—é”å’Œä¿è¯é”åˆ†é…çš„å‡è¡¡æ€§æ—¶å·®å¼‚è¾ƒå°ã€‚ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œå…¬å¹³é”ä¸èƒ½ä¿è¯çº¿ç¨‹è°ƒåº¦çš„å…¬å¹³æ€§ã€‚å› æ­¤ï¼Œä½¿ç”¨å…¬å¹³é”çš„ä¼—å¤šçº¿ç¨‹ä¸­çš„ä¸€å‘˜å¯èƒ½è·å¾—å¤šå€çš„æˆåŠŸæœºä¼šï¼Œè¿™ç§æƒ…å†µå‘ç”Ÿåœ¨å…¶ä»–æ´»åŠ¨çº¿ç¨‹æ²¡æœ‰è¢«å¤„ç†å¹¶ä¸”ç›®å‰å¹¶æœªæŒæœ‰é”æ—¶ã€‚è¿˜è¦æ³¨æ„çš„æ˜¯ï¼Œæœªå®šæ—¶çš„ `tryLock`æ–¹æ³•å¹¶æ²¡æœ‰ä½¿ç”¨å…¬å¹³è®¾ç½®ã€‚å› ä¸ºå³ä½¿å…¶ä»–çº¿ç¨‹æ­£åœ¨ç­‰å¾…ï¼Œåªè¦è¯¥é”æ˜¯å¯ç”¨çš„ï¼Œæ­¤æ–¹æ³•å°±å¯ä»¥è·å¾—æˆåŠŸã€‚\r\n\r\nå»ºè®®*æ€»æ˜¯* ç«‹å³å®è·µï¼Œä½¿ç”¨ `lock` å—æ¥è°ƒç”¨ `try`ï¼Œåœ¨ä¹‹å‰/ä¹‹åçš„æ„é€ ä¸­ï¼Œæœ€å…¸å‹çš„ä»£ç å¦‚ä¸‹ï¼š\r\n\r\n```java\r\nclass X {\r\n   private final ReentrantLock lock = new ReentrantLock();\r\n   // ...\r\n\r\n   public void m() {\r\n     lock.lock();  // block until condition holds\r\n     try {\r\n       // ... method body\r\n     } finally {\r\n       lock.unlock()\r\n     }\r\n   }\r\n }\r\n```\r\n\r\n### Condition\r\n\r\nCondition å°† Object ç›‘è§†å™¨æ–¹æ³•ï¼ˆwaitã€notify å’Œ notifyAllï¼‰åˆ†è§£æˆæˆªç„¶ä¸åŒçš„å¯¹è±¡ï¼Œä»¥ä¾¿é€šè¿‡å°†è¿™äº›å¯¹è±¡ä¸ä»»æ„ Lock å®ç°ç»„åˆä½¿ç”¨ï¼Œä¸ºæ¯ä¸ªå¯¹è±¡æä¾›å¤šä¸ªç­‰å¾… setï¼ˆwait-setï¼‰ã€‚å…¶ä¸­ï¼ŒLock æ›¿ä»£äº† synchronized æ–¹æ³•å’Œè¯­å¥çš„ä½¿ç”¨ï¼ŒCondition æ›¿ä»£äº† Object ç›‘è§†å™¨æ–¹æ³•çš„ä½¿ç”¨ã€‚\r\n\r\nå‡å®šæœ‰ä¸€ä¸ªç»‘å®šçš„ç¼“å†²åŒºï¼Œå®ƒæ”¯æŒ put å’Œ take æ–¹æ³•ã€‚å¦‚æœè¯•å›¾åœ¨ç©ºçš„ç¼“å†²åŒºä¸Šæ‰§è¡Œ take æ“ä½œï¼Œåˆ™åœ¨æŸä¸€ä¸ªé¡¹å˜å¾—å¯ç”¨ä¹‹å‰ï¼Œçº¿ç¨‹å°†ä¸€ç›´é˜»å¡ï¼›å¦‚æœè¯•å›¾åœ¨æ»¡çš„ç¼“å†²åŒºä¸Šæ‰§è¡Œ put æ“ä½œï¼Œåˆ™åœ¨æœ‰ç©ºé—´å˜å¾—å¯ç”¨ä¹‹å‰ï¼Œçº¿ç¨‹å°†ä¸€ç›´é˜»å¡ã€‚æˆ‘ä»¬å–œæ¬¢åœ¨å•ç‹¬çš„ç­‰å¾… set ä¸­ä¿å­˜ put çº¿ç¨‹å’Œ take çº¿ç¨‹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ç¼“å†²åŒºä¸­çš„é¡¹æˆ–ç©ºé—´å˜å¾—å¯ç”¨æ—¶åˆ©ç”¨æœ€ä½³è§„åˆ’ï¼Œä¸€æ¬¡åªé€šçŸ¥ä¸€ä¸ªçº¿ç¨‹ã€‚å¯ä»¥ä½¿ç”¨ä¸¤ä¸ª Condition å®ä¾‹æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚\r\n\r\n```java\r\nclass BoundedBuffer {\r\n   final Lock lock = new ReentrantLock();\r\n   final Condition notFull  = lock.newCondition();\r\n   final Condition notEmpty = lock.newCondition();\r\n\r\n   final Object[] items = new Object[100];\r\n   int putptr, takeptr, count;\r\n\r\n   public void put(Object x) throws InterruptedException {\r\n     lock.lock();\r\n     try {\r\n       while (count == items.length)\r\n         notFull.await();\r\n       items[putptr] = x;\r\n       if (++putptr == items.length) putptr = 0;\r\n       ++count;\r\n       notEmpty.signal();\r\n     } finally {\r\n       lock.unlock();\r\n     }\r\n   }\r\n\r\n   public Object take() throws InterruptedException {\r\n     lock.lock();\r\n     try {\r\n       while (count == 0)\r\n         notEmpty.await();\r\n       Object x = items[takeptr];\r\n       if (++takeptr == items.length) takeptr = 0;\r\n       --count;\r\n       notFull.signal();\r\n       return x;\r\n     } finally {\r\n       lock.unlock();\r\n     }\r\n   }\r\n }\r\n```\r\n\r\n### æ­£ç¡®ä½¿ç”¨ Condition å®ç°ç­‰å¾…/é€šçŸ¥\r\n\r\nMyService.java\r\n\r\n```java\r\npackage com.zhisheng.thread.Thread9;\r\n\r\nimport java.util.concurrent.locks.Condition;\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class MyService\r\n{\r\n    private Lock lock = new ReentrantLock();\r\n    private Condition condition = lock.newCondition();\r\n\r\n    public void await() {\r\n        lock.lock();\r\n        try {\r\n            System.out.println(\"await A\");\r\n            condition.await();//ä½¿å½“å‰æ‰§è¡Œçš„çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ waiting\r\n            System.out.println(\"await B\");\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }finally {\r\n            lock.unlock();\r\n            System.out.println(\"é‡Šæ”¾é”\");\r\n        }\r\n    }\r\n\r\n    public void signal() {\r\n        lock.lock();\r\n        System.out.println(\"signal A\");\r\n        condition.signal();\r\n        System.out.println(\"signal B\");\r\n        lock.unlock();\r\n    }\r\n}\r\n```\r\n\r\nThreadA.java\r\n\r\n```java\r\npackage com.zhisheng.thread.Thread9;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class ThreadA extends Thread\r\n{\r\n    private MyService service;\r\n\r\n    public ThreadA(MyService service) {\r\n        this.service = service;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        service.await();\r\n    }\r\n}\r\n```\r\n\r\nTest.java\r\n\r\n```java\r\npackage com.zhisheng.thread.Thread9;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class Test\r\n{\r\n    public static void main(String[] args) throws InterruptedException {\r\n        MyService service = new MyService();\r\n        ThreadA ta = new ThreadA(service);\r\n        ta.start();\r\n        Thread.sleep(5000);\r\n        service.signal();\r\n    }\r\n}\r\n```\r\n\r\nè¿è¡Œç»“æœï¼š\r\n\r\n```java\r\nawait A\r\nsignal A\r\nsignal B\r\nawait B\r\né‡Šæ”¾é”\r\n```\r\n\r\nObject ç±»ä¸­çš„ wait() æ–¹æ³•ç›¸å½“äº Condition ç±»ä¸­ await() æ–¹æ³•\r\n\r\nObject ç±»ä¸­çš„ wait(long time) æ–¹æ³•ç›¸å½“äº Condition ç±»ä¸­ await(long time, TimeUnit unit) æ–¹æ³•\r\n\r\nObject ç±»ä¸­çš„ notify() æ–¹æ³•ç›¸å½“äº Condition ç±»ä¸­ signal() æ–¹æ³•\r\n\r\nObject ç±»ä¸­çš„ notifyAll() æ–¹æ³•ç›¸å½“äº Condition ç±»ä¸­ signalAll() æ–¹æ³•\r\n\r\n\r\n\r\né¢˜ç›®ï¼šå®ç°ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…  ä¸€å¯¹ä¸€äº¤æ›¿æ‰“å°\r\n\r\nMyService.java\r\n\r\n```java\r\npackage com.zhisheng.thread.thread10;\r\n\r\nimport java.util.concurrent.locks.Condition;\r\nimport java.util.concurrent.locks.Lock;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n * å®ç°ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…  ä¸€å¯¹ä¸€Â·äº¤æ›¿æ‰“å°\r\n */\r\npublic class MyService\r\n{\r\n    private Lock lock = new ReentrantLock();\r\n    private Condition condition = lock.newCondition();\r\n    private  boolean flag = false;\r\n\r\n    public void setValue() {\r\n        lock.lock();\r\n        while (flag == true) {\r\n            try {\r\n                condition.await();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        System.out.println(\"SetValue  AAAAAA\");\r\n        flag = true;\r\n        condition.signal();\r\n        lock.unlock();\r\n    }\r\n\r\n    public void getValue() {\r\n        lock.lock();\r\n        while (flag == false) {\r\n            try {\r\n                condition.await();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        System.out.println(\"GetValue BBBB\");\r\n        flag = false;\r\n        condition.signal();\r\n        lock.unlock();\r\n    }\r\n}\r\n```\r\n\r\nThreadA.java\r\n\r\n```java\r\npackage com.zhisheng.thread.thread10;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class ThreadA extends Thread\r\n{\r\n    private MyService service;\r\n\r\n    public ThreadA(MyService service) {\r\n        this.service = service;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        for (int i = 0; i < Integer.MAX_VALUE; i++) {\r\n            service.setValue();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThreadB.java\r\n\r\n```java\r\npackage com.zhisheng.thread.thread10;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class ThreadB extends Thread\r\n{\r\n    private MyService service;\r\n\r\n    public ThreadB(MyService service) {\r\n        this.service = service;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        for (int i = 0; i < Integer.MAX_VALUE; i++) {\r\n            service.getValue();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nTest.java\r\n\r\n```java\r\npackage com.zhisheng.thread.thread10;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class Test\r\n{\r\n    public static void main(String[] args) {\r\n        MyService service = new MyService();\r\n        ThreadA ta = new ThreadA(service);\r\n        ThreadB tb = new ThreadB(service);\r\n        ta.start();\r\n        tb.start();\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\ngetHoldCount() æŸ¥è¯¢å½“å‰çº¿ç¨‹ä¿æŒæ­¤é”å®šçš„ä¸ªæ•°ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ lock() çš„æ–¹æ³•\r\n\r\ngetQueueLength() è¿”å›æ­£ç­‰å¾…è·å–æ­¤é”å®šçš„çº¿ç¨‹ä¼°è®¡æ•°\r\n\r\ngetWaitQueueLength() è¿”å›ç­‰å¾…ä¸æ­¤é”å®šç›¸å…³çš„ç»™å®šæ¡ä»¶ Condition çš„çº¿ç¨‹ä¼°è®¡æ•°\r\n\r\nhasQueuedThread() æŸ¥è¯¢æŒ‡å®šçš„çº¿ç¨‹æ˜¯å¦æ­£åœ¨ç­‰å¾…è·å–æ­¤é”å®š\r\n\r\nhasQueuedThreads() æŸ¥è¯¢æ˜¯å¦æœ‰çº¿ç¨‹æ­£åœ¨ç­‰å¾…è·å–æ­¤é”å®š\r\n\r\nhasWaiters() æŸ¥è¯¢æ˜¯å¦æœ‰çº¿ç¨‹æ­£åœ¨ç­‰å¾…ä¸æ­¤é”å®šæœ‰å…³çš„ condition æ¡ä»¶\r\n\r\nisFair() åˆ¤æ–­æ˜¯å¦æ˜¯å…¬å¹³é”ï¼ˆé»˜è®¤ä¸‹ ReentrantLockç±»ä½¿ç”¨çš„æ˜¯éå…¬å¹³é”ï¼‰\r\n\r\nisHeldByCurrentThread() æŸ¥è¯¢å½“å‰çº¿ç¨‹æ˜¯å¦ä¿æŒæ­¤é”å®š\r\n\r\nisLocked() æŸ¥è¯¢æ­¤é”å®šæ˜¯å¦ç”±ä»»æ„çº¿ç¨‹ä¿æŒ\r\n\r\nlockInterruptibly() å¦‚æœå½“å‰çº¿ç¨‹æœªè¢«ä¸­æ–­ï¼Œåˆ™è·å–é”å®šï¼Œå¦‚æœå·²ç»è¢«ä¸­æ–­åˆ™å‡ºç°å¼‚å¸¸\r\n\r\ntryLock() ä»…åœ¨è°ƒç”¨æ—¶é”å®šæœªè¢«å¦ä¸€ä¸ªçº¿ç¨‹ä¿æŒçš„æƒ…å†µä¸‹ï¼Œæ‰è·å–è¯¥é”å®š\r\n\r\ntryLock(long time, TimeUtil util) å¦‚æœé”å®šåœ¨ç»™å®šçš„ç­‰å¾…æ—¶é—´å†…æ²¡æœ‰è¢«å¦ä¸€ä¸ªçº¿ç¨‹ä¿æŒï¼Œä¸”å½“å‰çº¿ç¨‹æœªè¢«ä¸­æ–­ï¼Œåˆ™è·å–è¯¥é”å®šã€‚\r\n\r\n### ä½¿ç”¨ ReentrantReadWriteLock ç±»\r\n\r\nè¯»å†™äº’æ–¥ï¼š\r\n\r\nMyService.java\r\n\r\n```java\r\npackage com.zhisheng.thread.Thread11;\r\n\r\nimport java.util.concurrent.locks.ReentrantReadWriteLock;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class MyService\r\n{\r\n    private ReentrantReadWriteLock lock = new ReentrantReadWriteLock();\r\n\r\n    public void read() {\r\n        lock.readLock().lock();\r\n        System.out.println(Thread.currentThread().getName() + \" Read AAA  \" + System.currentTimeMillis());\r\n        try {\r\n            Thread.sleep(10000);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n        lock.readLock().unlock();\r\n    }\r\n\r\n    public void write() {\r\n        lock.writeLock().lock();\r\n        System.out.println(Thread.currentThread().getName() + \" write BBB \" + System.currentTimeMillis());\r\n        try {\r\n            Thread.sleep(10000);\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n        lock.writeLock().unlock();\r\n    }\r\n}\r\n```\r\n\r\nThreadA.java\r\n\r\n```java\r\npackage com.zhisheng.thread.Thread11;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class ThreadA extends Thread\r\n{\r\n    private MyService service;\r\n\r\n    public ThreadA(MyService service) {\r\n        this.service = service;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        service.read();\r\n    }\r\n}\r\n```\r\n\r\nThreadB.java\r\n\r\n```java\r\npackage com.zhisheng.thread.Thread11;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class ThreadB extends Thread\r\n{\r\n    private MyService service;\r\n\r\n    public ThreadB(MyService service) {\r\n        this.service = service;\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        service.write();\r\n    }\r\n}\r\n```\r\n\r\nTest.java\r\n\r\n```java\r\npackage com.zhisheng.thread.Thread11;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class Test\r\n{\r\n    public static void main(String[] args) throws InterruptedException {\r\n        MyService service = new MyService();\r\n        ThreadA ta = new ThreadA(service);\r\n        ta.setName(\"A\");\r\n        ta.start();\r\n        Thread.sleep(1000);\r\n        ThreadB tb = new ThreadB(service);\r\n        tb.setName(\"B\");\r\n        tb.start();\r\n    }\r\n}\r\n```\r\n\r\nè¿è¡Œç»“æœï¼š\r\n\r\n```\r\nA Read AAA  1496556770402\r\nB write BBB 1496556780402\r\n```\r\n\r\n\r\n\r\n\r\n\r\n## ç¬¬å…­ç«  â€”â€” å•ä¾‹æ¨¡å¼ä¸å¤šçº¿ç¨‹\r\n\r\næ¨èæ–‡ç«  [ã€Šæ·±å…¥æµ…å‡ºå•å®ä¾‹Singletonè®¾è®¡æ¨¡å¼ã€‹](http://blog.csdn.net/tzs_1041218129/article/details/51246419)\r\n\r\n### ç«‹å³åŠ è½½æ¨¡å¼ / â€œé¥¿æ±‰æ¨¡å¼â€\r\n\r\nç«‹å³åŠ è½½ï¼šä½¿ç”¨ç±»çš„æ—¶å€™å·²ç»å°†å¯¹è±¡åˆ›å»ºå®Œæ¯•ï¼Œnew å®ä¾‹åŒ–\r\n\r\n```java\r\npublic class MyObject\r\n{\r\n    private static MyObject object = new MyObject();\r\n    private MyObject() {\r\n    }\r\n    public static MyObject getInstance() {\r\n        return object;\r\n    }\r\n}\r\n```\r\n\r\n### å»¶è¿ŸåŠ è½½ / â€œ æ‡’æ±‰æ¨¡å¼ â€\r\n\r\nå°±æ˜¯åœ¨è°ƒç”¨ get çš„æ—¶å€™å®ä¾‹æ‰è¢«åˆ›å»ºã€‚åœ¨ get() æ–¹æ³•ä¸­è¿›è¡Œ new å®ä¾‹åŒ–ã€‚\r\n\r\n```java\r\npublic class MyObject\r\n{\r\n    private  static  MyObject object;\r\n    private MyObject() {\r\n    }\r\n    public static MyObject getInstance() {\r\n        if (object != null) {\r\n        } else {\r\n            object = new MyObject();\r\n        }\r\n        return object;\r\n    }\r\n}\r\n```\r\n\r\nä½¿ç”¨ DCL åŒé‡æ£€æŸ¥é”ï¼Œè§£å†³â€œæ‡’æ±‰æ¨¡å¼â€é‡åˆ°çš„å¤šçº¿ç¨‹é—®é¢˜\r\n\r\n```java\r\npublic class MyObject\r\n{\r\n    private  volatile static  MyObject object;\r\n    private MyObject() {\r\n    }\r\n    //synchronized\r\n    public static MyObject getInstance() {\r\n        if (object != null) {\r\n        } else {\r\n            synchronized (MyObject.class) {\r\n                if (object == null) {\r\n                    object = new MyObject();\r\n                }\r\n            }\r\n        }\r\n        return object;\r\n    }\r\n}\r\n```\r\n\r\n### ä½¿ç”¨é™æ€å†…éƒ¨ç±»å®ç°å•ä¾‹æ¨¡å¼\r\n\r\n```java\r\npublic class MyObject\r\n{\r\n    private static class MyObjectHandler\r\n    {\r\n        private static MyObject object = new MyObject();\r\n    }\r\n    private MyObject() {\r\n    }\r\n    public static MyObject getInstance() {\r\n        return MyObjectHandler.object;\r\n    }\r\n}\r\n```\r\n\r\n### åºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„å•ä¾‹æ¨¡å¼å®ç°\r\n\r\nMyObject.java\r\n\r\n```java\r\npackage com.zhisheng.thread.thread15;\r\n\r\nimport java.io.ObjectStreamException;\r\nimport java.io.Serializable;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class MyObject implements Serializable\r\n{\r\n    private static final long serialVersionUID =  888L;\r\n    private static class MyObjectHandler\r\n    {\r\n        private static final MyObject object = new MyObject();\r\n    }\r\n    private MyObject() {\r\n    }\r\n    public static  MyObject getInstance() {\r\n        return MyObjectHandler.object;\r\n    }\r\n    protected Object readResolve() throws ObjectStreamException {\r\n        System.out.println(\"è°ƒç”¨äº†readResolveæ–¹æ³•ï¼\");\r\n        return MyObjectHandler.object;\r\n    }\r\n}\r\n```\r\n\r\nSaveAndRead.java\r\n\r\n```java\r\npackage com.zhisheng.thread.thread15;\r\n\r\nimport java.io.*;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class SaveAndRead\r\n{\r\n    public static void main(String[] args) {\r\n        try {\r\n            MyObject object = MyObject.getInstance();\r\n            FileOutputStream fos = new FileOutputStream(new File(\"fos.txt\"));\r\n            ObjectOutputStream oos = new ObjectOutputStream(fos);\r\n            oos.writeObject(object);\r\n            oos.close();\r\n            fos.close();\r\n            System.out.println(object.hashCode());\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        try {\r\n            FileInputStream fis = new FileInputStream(new File(\"fos.txt\"));\r\n            ObjectInputStream ois = new ObjectInputStream(fis);\r\n            MyObject o = (MyObject) ois.readObject();\r\n            ois.close();\r\n            fis.close();\r\n            System.out.println(o.hashCode());\r\n        } catch (FileNotFoundException e) {\r\n            e.printStackTrace();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } catch (ClassNotFoundException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nè¿™é‡Œä¸»è¦è¦æŒ‡å‡º MyObject.java ä¸­ readResolve æ–¹æ³•\r\n\r\n```java\r\n protected Object readResolve() throws ObjectStreamException {\r\n        System.out.println(\"è°ƒç”¨äº†readResolveæ–¹æ³•ï¼\");\r\n        return MyObjectHandler.object;\r\n    }\r\n```\r\n\r\næ–¹æ³• readResolve å…è®¸ class åœ¨ååºåˆ—åŒ–è¿”å›å¯¹è±¡å‰æ›¿æ¢ã€è§£æåœ¨æµä¸­è¯»å‡ºæ¥çš„å¯¹è±¡ã€‚å®ç° readResolve æ–¹æ³•ï¼Œä¸€ä¸ª class å¯ä»¥ç›´æ¥æ§åˆ¶ååºåŒ–è¿”å›çš„ç±»å‹å’Œå¯¹è±¡å¼•ç”¨ã€‚\r\n\r\næ–¹æ³• readResolve ä¼šåœ¨ ObjectInputStream å·²ç»è¯»å–ä¸€ä¸ªå¯¹è±¡å¹¶åœ¨å‡†å¤‡è¿”å›å‰è°ƒç”¨ã€‚ObjectInputStream ä¼šæ£€æŸ¥å¯¹è±¡çš„ class æ˜¯å¦å®šä¹‰äº† readResolve æ–¹æ³•ã€‚å¦‚æœå®šä¹‰äº†ï¼Œå°†ç”± readResolve æ–¹æ³•æŒ‡å®šè¿”å›çš„å¯¹è±¡ã€‚è¿”å›å¯¹è±¡çš„ç±»å‹ä¸€å®šè¦æ˜¯å…¼å®¹çš„ï¼Œå¦åˆ™ä¼šæŠ›å‡º ClassCastException ã€‚\r\n\r\n### ä½¿ç”¨ static ä»£ç å—å®ç°å•ä¾‹æ¨¡å¼\r\n\r\n```java\r\npackage com.zhisheng.thread.thread16;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class MyObject\r\n{\r\n    private static MyObject instance = null;\r\n    private MyObject() {\r\n    }\r\n    static {\r\n        instance = new MyObject();\r\n    }\r\n    public static MyObject getInstance() {\r\n        return instance;\r\n    }\r\n}\r\n```\r\n\r\nThreadA.java\r\n\r\n```java\r\npackage com.zhisheng.thread.thread16;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class ThreadA extends Thread\r\n{\r\n    @Override\r\n    public void run() {\r\n        for (int i = 0; i < 5; i++) {\r\n            System.out.println(MyObject.getInstance().hashCode());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nTest.java\r\n\r\n```java\r\npackage com.zhisheng.thread.thread16;\r\n\r\n/**\r\n * Created by 10412 on 2022/11/4.\r\n */\r\npublic class Test\r\n{\r\n    public static void main(String[] args) {\r\n        ThreadA ta1 = new ThreadA();\r\n        ThreadA ta2 = new ThreadA();\r\n        ThreadA ta3 = new ThreadA();\r\n        ta1.start();\r\n        ta2.start();\r\n        ta3.start();\r\n    }\r\n}\r\n```\r\n\r\n### ä½¿ç”¨æšä¸¾æ•°æ®ç±»å‹å®ç°å•ä¾‹æ¨¡å¼\r\n\r\nåœ¨ä½¿ç”¨æšä¸¾ç±»æ—¶ï¼Œæ„é€ æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥åº”ç”¨è¿™ä¸ªç‰¹æ€§å®ç°å•ä¾‹æ¨¡å¼ã€‚\r\n\r\n```java\r\npublic class MyObject {\r\n    private enum MyEnumSingleton{\r\n        INSTANCE;\r\n        private Resource resource;\r\n        private MyEnumSingleton(){\r\n            resource = new Resource();\r\n        }\r\n        public Resource getResource(){\r\n            return resource;\r\n        }\r\n    }\r\n    public static Resource getResource(){\r\n        return MyEnumSingleton.INSTANCE.getResource();\r\n    }\r\n}\r\n```\r\n\r\næµ‹è¯•ï¼š\r\n\r\n```java\r\nimport test.MyObject;\r\n\r\npublic class Run {\r\n    class MyThread extends Thread {\r\n        @Override\r\n        public void run() {\r\n            for (int i = 0; i < 5; i++) {\r\n                System.out.println(MyObject.getResource().hashCode());\r\n            }\r\n        }\r\n    }\r\n    public static void main(String[] args) {\r\n        Run.MyThread t1 = new Run().new MyThread();\r\n        Run.MyThread t2 = new Run().new MyThread();\r\n        Run.MyThread t3 = new Run().new MyThread();\r\n        t1.start();\r\n        t2.start();\r\n        t3.start();\r\n\r\n    }\r\n}\r\n```\r\n\r\nè¿™é‡Œå†æ¨èä¸€ç¯‡ stackoverflow ä¸Šçš„ä¸€ä¸ªé—®é¢˜å›ç­”ï¼š [What is an efficient way to implement a singleton pattern in Java?](https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java)\r\n\r\n\r\n\r\n## æ€»ç»“\r\n\r\næœ¬ç¯‡æ–‡ç« æ˜¯æˆ‘è¯» ã€ŠJavaå¤šçº¿ç¨‹ç¼–ç¨‹æ ¸å¿ƒæŠ€æœ¯ã€‹ çš„ç¬”è®°åŠè‡ªå·±çš„ä¸€äº›æ€»ç»“ï¼Œè§‰å¾—ä¸é”™ï¼Œæ¬¢è¿ç‚¹èµå’Œè½¬å‘ã€‚\r\n\r\n\r\n', 1, 'post', 'publish', 'Java', 'Java', 25, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (4, 'HashMapã€Hashtableã€HashSet å’Œ ConcurrentHashMap çš„æ¯”è¾ƒ', 'HashMap-HashTable', 1669740067, 1669740067, 'HashMap å’Œ Hashtable çš„æ¯”è¾ƒæ˜¯ Java é¢è¯•ä¸­çš„å¸¸è§é—®é¢˜ï¼Œç”¨æ¥è€ƒéªŒç¨‹åºå‘˜æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®ä½¿ç”¨é›†åˆç±»ä»¥åŠæ˜¯å¦å¯ä»¥éšæœºåº”å˜ä½¿ç”¨å¤šç§æ€è·¯è§£å†³é—®é¢˜ã€‚HashMap çš„å·¥ä½œåŸç†ã€ArrayList ä¸ Vector çš„æ¯”è¾ƒä»¥åŠè¿™ä¸ªé—®é¢˜æ˜¯æœ‰å…³ Java é›†åˆæ¡†æ¶çš„æœ€ç»å…¸çš„é—®é¢˜ã€‚Hashtable æ˜¯ä¸ªè¿‡æ—¶çš„é›†åˆç±»ï¼Œå­˜åœ¨äº Java API ä¸­å¾ˆä¹…äº†ã€‚åœ¨ Java 4 ä¸­è¢«é‡å†™äº†ï¼Œå®ç°äº† Map æ¥å£ï¼Œæ‰€ä»¥è‡ªæ­¤ä»¥åä¹Ÿæˆäº† Java é›†åˆæ¡†æ¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚Hashtable å’Œ HashMap åœ¨ Java é¢è¯•ä¸­ç›¸å½“å®¹æ˜“è¢«é—®åˆ°ï¼Œç”šè‡³æˆä¸ºäº†é›†åˆæ¡†æ¶é¢è¯•é¢˜ä¸­æœ€å¸¸è¢«è€ƒçš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨å‚åŠ ä»»ä½• Java é¢è¯•ä¹‹å‰ï¼Œéƒ½ä¸è¦å¿˜äº†å‡†å¤‡è¿™ä¸€é¢˜ã€‚\r\n<!-- more -->\r\nè¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…å°†ä¼šçœ‹åˆ° HashMap å’Œ Hashtable çš„åŒºåˆ«ï¼Œè¿˜å°†çœ‹åˆ°å®ƒä»¬ä¹‹é—´çš„ç›¸ä¼¼ä¹‹å¤„ã€‚\r\n\r\n### HashMap å’Œ Hashtable çš„åŒºåˆ«\r\n\r\nHashMap å’Œ Hashtable éƒ½å®ç°äº† Map æ¥å£ï¼Œä½†å†³å®šç”¨å“ªä¸€ä¸ªä¹‹å‰å…ˆè¦å¼„æ¸…æ¥šå®ƒä»¬ä¹‹é—´çš„åˆ†åˆ«ã€‚ä¸»è¦çš„åŒºåˆ«æœ‰ï¼šçº¿ç¨‹å®‰å…¨æ€§ï¼ŒåŒæ­¥ (synchronization)ï¼Œä»¥åŠé€Ÿåº¦ã€‚\r\n\r\n1. HashMap å‡ ä¹å¯ä»¥ç­‰ä»·äº Hashtableï¼Œé™¤äº† HashMap æ˜¯é synchronized çš„ï¼Œå¹¶å¯ä»¥æ¥å— null(HashMap å¯ä»¥æ¥å—ä¸º null çš„é”®å€¼ (key) å’Œå€¼ (value)ï¼Œè€Œ Hashtable åˆ™ä¸è¡Œ)ã€‚\r\n2. HashMap æ˜¯é synchronizedï¼Œè€Œ Hashtable æ˜¯ synchronizedï¼Œè¿™æ„å‘³ç€ Hashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«ä¸€ä¸ª Hashtableï¼›è€Œå¦‚æœæ²¡æœ‰æ­£ç¡®çš„åŒæ­¥çš„è¯ï¼Œå¤šä¸ªçº¿ç¨‹æ˜¯ä¸èƒ½å…±äº« HashMap çš„ã€‚Java 5 æä¾›äº† ConcurrentHashMapï¼Œå®ƒæ˜¯ HashTable çš„æ›¿ä»£ï¼Œæ¯” HashTable çš„æ‰©å±•æ€§æ›´å¥½ã€‚\r\n3. å¦ä¸€ä¸ªåŒºåˆ«æ˜¯ HashMap çš„è¿­ä»£å™¨ (Iterator) æ˜¯ fail-fast è¿­ä»£å™¨ï¼Œè€Œ Hashtable çš„ enumerator è¿­ä»£å™¨ä¸æ˜¯ fail-fast çš„ã€‚æ‰€ä»¥å½“æœ‰å…¶å®ƒçº¿ç¨‹æ”¹å˜äº† HashMap çš„ç»“æ„ï¼ˆå¢åŠ æˆ–è€…ç§»é™¤å…ƒç´ ï¼‰ï¼Œå°†ä¼šæŠ›å‡ºConcurrentModificationExceptionï¼Œä½†è¿­ä»£å™¨æœ¬èº«çš„ remove() æ–¹æ³•ç§»é™¤å…ƒç´ åˆ™ä¸ä¼šæŠ›å‡ºConcurrentModificationException å¼‚å¸¸ã€‚ä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªä¸€å®šå‘ç”Ÿçš„è¡Œä¸ºï¼Œè¦çœ‹ JVMã€‚è¿™æ¡åŒæ ·ä¹Ÿæ˜¯Enumeration å’Œ Iterato rçš„åŒºåˆ«ã€‚\r\n4. ç”±äº Hashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹Ÿæ˜¯ synchronizedï¼Œæ‰€ä»¥åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹å®ƒæ¯” HashMap è¦æ…¢ã€‚å¦‚æœä½ ä¸éœ€è¦åŒæ­¥ï¼Œåªéœ€è¦å•ä¸€çº¿ç¨‹ï¼Œé‚£ä¹ˆä½¿ç”¨ HashMap æ€§èƒ½è¦å¥½è¿‡ Hashtableã€‚\r\n5. HashMap ä¸èƒ½ä¿è¯éšç€æ—¶é—´çš„æ¨ç§» Map ä¸­çš„å…ƒç´ æ¬¡åºæ˜¯ä¸å˜çš„ã€‚\r\n\r\n### è¦æ³¨æ„çš„ä¸€äº›é‡è¦æœ¯è¯­ï¼š\r\n\r\n1) sychronized æ„å‘³ç€åœ¨ä¸€æ¬¡ä»…æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿæ›´æ”¹ Hashtableã€‚å°±æ˜¯è¯´ä»»ä½•çº¿ç¨‹è¦æ›´æ–° Hashtable æ—¶è¦é¦–å…ˆè·å¾—åŒæ­¥é”ï¼Œå…¶å®ƒçº¿ç¨‹è¦ç­‰åˆ°åŒæ­¥é”è¢«é‡Šæ”¾ä¹‹åæ‰èƒ½å†æ¬¡è·å¾—åŒæ­¥é”æ›´æ–° Hashtableã€‚\r\n\r\n2) Fail-safe å’Œ iterator è¿­ä»£å™¨ç›¸å…³ã€‚å¦‚æœæŸä¸ªé›†åˆå¯¹è±¡åˆ›å»ºäº† Iterator æˆ–è€… ListIteratorï¼Œç„¶åå…¶å®ƒçš„çº¿ç¨‹è¯•å›¾â€œç»“æ„ä¸Šâ€æ›´æ”¹é›†åˆå¯¹è±¡ï¼Œå°†ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ã€‚ä½†å…¶å®ƒçº¿ç¨‹å¯ä»¥é€šè¿‡ set() æ–¹æ³•æ›´æ”¹é›†åˆå¯¹è±¡æ˜¯å…è®¸çš„ï¼Œå› ä¸ºè¿™å¹¶æ²¡æœ‰ä»â€œç»“æ„ä¸Šâ€æ›´æ”¹é›†åˆã€‚ä½†æ˜¯å‡å¦‚å·²ç»ä»ç»“æ„ä¸Šè¿›è¡Œäº†æ›´æ”¹ï¼Œå†è°ƒç”¨ set() æ–¹æ³•ï¼Œå°†ä¼šæŠ›å‡º IllegalArgumentException å¼‚å¸¸ã€‚\r\n\r\n3) ç»“æ„ä¸Šçš„æ›´æ”¹æŒ‡çš„æ˜¯åˆ é™¤æˆ–è€…æ’å…¥ä¸€ä¸ªå…ƒç´ ï¼Œè¿™æ ·ä¼šå½±å“åˆ° map çš„ç»“æ„ã€‚\r\n\r\n### æˆ‘ä»¬èƒ½å¦è®© HashMap åŒæ­¥ï¼Ÿ\r\n\r\nHashMap å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¯­å¥è¿›è¡ŒåŒæ­¥ï¼š\r\nMap m = Collections.synchronizeMap(hashMap);\r\n\r\n### ç»“è®º\r\n\r\nHashtable å’Œ HashMap æœ‰å‡ ä¸ªä¸»è¦çš„ä¸åŒï¼šçº¿ç¨‹å®‰å…¨ä»¥åŠé€Ÿåº¦ã€‚ä»…åœ¨ä½ éœ€è¦å®Œå…¨çš„çº¿ç¨‹å®‰å…¨çš„æ—¶å€™ä½¿ç”¨Hashtableï¼Œè€Œå¦‚æœä½ ä½¿ç”¨ Java 5 æˆ–ä»¥ä¸Šçš„è¯ï¼Œè¯·ä½¿ç”¨ ConcurrentHashMap å§ã€‚\r\n\r\nè½¬è½½è‡ªï¼š[HashMapå’ŒHashtableçš„åŒºåˆ«](http://www.importnew.com/7010.html)\r\n\r\n***\r\n\r\nå…³äº HashMap çº¿ç¨‹ä¸å®‰å…¨è¿™ä¸€ç‚¹ï¼Œã€ŠJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯ã€‹ä¸€ä¹¦ä¸­æ˜¯è¿™æ ·è¯´çš„ï¼š\r\n\r\n> HashMap åœ¨å¹¶å‘æ‰§è¡Œ put æ“ä½œæ—¶ä¼šå¼•èµ·æ­»å¾ªç¯ï¼Œå¯¼è‡´ CPU åˆ©ç”¨ç‡æ¥è¿‘ 100%ã€‚å› ä¸ºå¤šçº¿ç¨‹ä¼šå¯¼è‡´ HashMap çš„ Node é“¾è¡¨å½¢æˆç¯å½¢æ•°æ®ç»“æ„ï¼Œä¸€æ—¦å½¢æˆç¯å½¢æ•°æ®ç»“æ„ï¼ŒNode çš„ next èŠ‚ç‚¹æ°¸è¿œä¸ä¸ºç©ºï¼Œå°±ä¼šåœ¨è·å– Node æ—¶äº§ç”Ÿæ­»å¾ªç¯ã€‚\r\n\r\nåŸå› ï¼š\r\n\r\n+ [ç–«è‹—ï¼šJAVA HASHMAPçš„æ­»å¾ªç¯ â€”â€” é…·å£³](http://coolshell.cn/articles/9606.html)\r\n+ [HashMapåœ¨javaå¹¶å‘ä¸­å¦‚ä½•å‘ç”Ÿæ­»å¾ªç¯](http://firezhfox.iteye.com/blog/2241043)\r\n+ [How does a HashMap work in JAVA](http://coding-geek.com/how-does-a-hashmap-work-in-java/)\r\n\r\n***\r\n\r\nä¸‹é¢çš„æ˜¯è‡ªå·±æœ‰é“äº‘ç¬”è®°ä¸­è®°å½•çš„ï¼š\r\n\r\n**HashMap ï¼Œ HashTable å’Œ HashSet åŒºåˆ«**\r\n\r\n1.Â  å…³äº HashMap çš„ä¸€äº›è¯´æ³•ï¼š\r\n\r\na)Â  HashMap å®é™…ä¸Šæ˜¯ä¸€ä¸ªâ€œé“¾è¡¨æ•£åˆ—â€çš„æ•°æ®ç»“æ„ï¼Œå³æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆä½“ã€‚HashMap çš„åº•å±‚ç»“æ„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹æ˜¯ä¸€æ¡é“¾è¡¨ã€‚\r\n\r\nb)Â  HashMap çš„å®ä¾‹æœ‰ä¿©ä¸ªå‚æ•°å½±å“å…¶æ€§èƒ½ï¼š â€œåˆå§‹å®¹é‡â€ å’Œ è£…å¡«å› å­ã€‚\r\n\r\nc)Â  HashMap å®ç°ä¸åŒæ­¥ï¼Œçº¿ç¨‹ä¸å®‰å…¨ã€‚ Â HashTable çº¿ç¨‹å®‰å…¨\r\n\r\nd)Â  HashMap ä¸­çš„ key-value éƒ½æ˜¯å­˜å‚¨åœ¨ Entry ä¸­çš„ã€‚\r\n\r\ne)Â  HashMap å¯ä»¥å­˜ null é”®å’Œ null å€¼ï¼Œä¸ä¿è¯å…ƒç´ çš„é¡ºåºæ’ä¹…ä¸å˜ï¼Œå®ƒçš„åº•å±‚ä½¿ç”¨çš„æ˜¯æ•°ç»„å’Œé“¾è¡¨ï¼Œé€šè¿‡hashCode() æ–¹æ³•å’Œ equals æ–¹æ³•ä¿è¯é”®çš„å”¯ä¸€æ€§\r\n\r\nf)Â  è§£å†³å†²çªä¸»è¦æœ‰ä¸‰ç§æ–¹æ³•ï¼šå®šå€æ³•ï¼Œæ‹‰é“¾æ³•ï¼Œå†æ•£åˆ—æ³•ã€‚HashMap æ˜¯é‡‡ç”¨æ‹‰é“¾æ³•è§£å†³å“ˆå¸Œå†²çªçš„ã€‚\r\n\r\næ³¨ï¼š é“¾è¡¨æ³•æ˜¯å°†ç›¸åŒ hash å€¼çš„å¯¹è±¡ç»„æˆä¸€ä¸ªé“¾è¡¨æ”¾åœ¨ hash å€¼å¯¹åº”çš„æ§½ä½ï¼›\r\n\r\nç”¨å¼€æ”¾å®šå€æ³•è§£å†³å†²çªçš„åšæ³•æ˜¯ï¼šå½“å†²çªå‘ç”Ÿæ—¶ï¼Œä½¿ç”¨æŸç§æ¢æŸ¥(äº¦ç§°æ¢æµ‹)æŠ€æœ¯åœ¨æ•£åˆ—è¡¨ä¸­å½¢æˆä¸€ä¸ªæ¢æŸ¥(æµ‹)åºåˆ—ã€‚ æ²¿æ­¤åºåˆ—é€ä¸ªå•å…ƒåœ°æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç»™å®š çš„å…³é”®å­—ï¼Œæˆ–è€…ç¢°åˆ°ä¸€ä¸ªå¼€æ”¾çš„åœ°å€(å³è¯¥åœ°å€å•å…ƒä¸ºç©º)ä¸ºæ­¢ï¼ˆè‹¥è¦æ’å…¥ï¼Œåœ¨æ¢æŸ¥åˆ°å¼€æ”¾çš„åœ°å€ï¼Œåˆ™å¯å°†å¾…æ’å…¥çš„æ–°ç»“ç‚¹å­˜äººè¯¥åœ°å€å•å…ƒï¼‰ã€‚\r\n\r\næ‹‰é“¾æ³•è§£å†³å†²çªçš„åšæ³•æ˜¯ï¼š å°†æ‰€æœ‰å…³é”®å­—ä¸ºåŒä¹‰è¯çš„ç»“ç‚¹é“¾æ¥åœ¨åŒä¸€ä¸ªå•é“¾è¡¨ä¸­ ã€‚è‹¥é€‰å®šçš„æ•£åˆ—è¡¨é•¿åº¦ä¸ºmï¼Œåˆ™å¯å°†æ•£åˆ—è¡¨å®šä¹‰ä¸ºä¸€ä¸ªç”±mä¸ªå¤´æŒ‡é’ˆç»„æˆçš„æŒ‡é’ˆæ•° ç»„T[0..m-1]ã€‚å‡¡æ˜¯æ•£åˆ—åœ°å€ä¸ºiçš„ç»“ç‚¹ï¼Œå‡æ’å…¥åˆ°ä»¥T[i]ä¸ºå¤´æŒ‡é’ˆçš„å•é“¾è¡¨ä¸­ã€‚Tä¸­å„åˆ†é‡çš„åˆå€¼å‡åº”ä¸ºç©ºæŒ‡é’ˆã€‚åœ¨æ‹‰é“¾æ³•ä¸­ï¼Œè£…å¡«å› å­Î±å¯ä»¥å¤§äº1ï¼Œä½†ä¸€èˆ¬å‡å–Î±â‰¤1ã€‚æ‹‰é“¾æ³•é€‚åˆæœªè§„å®šå…ƒç´ çš„å¤§å°ã€‚\r\n\r\nÂ Â Â \r\n\r\n2.Â  Hashtable å’Œ HashMap çš„åŒºåˆ«ï¼š\r\n\r\na)Â  Â ç»§æ‰¿ä¸åŒã€‚\r\n\r\nÂ public class Hashtable extends Dictionary implements Map\r\n\r\npublic class HashMap extends Â AbstractMap implements Map\r\n\r\nb)Â  Hashtable ä¸­çš„æ–¹æ³•æ˜¯åŒæ­¥çš„ï¼Œè€Œ HashMap ä¸­çš„æ–¹æ³•åœ¨ç¼ºçœæƒ…å†µä¸‹æ˜¯éåŒæ­¥çš„ã€‚åœ¨å¤šçº¿ç¨‹å¹¶å‘çš„ç¯å¢ƒä¸‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ Hashtableï¼Œä½†æ˜¯è¦ä½¿ç”¨ HashMap çš„è¯å°±è¦è‡ªå·±å¢åŠ åŒæ­¥å¤„ç†äº†ã€‚\r\n\r\nc)Â  Hashtable ä¸­ï¼Œ key å’Œ value éƒ½ä¸å…è®¸å‡ºç° null å€¼ã€‚ åœ¨ HashMap ä¸­ï¼Œ null å¯ä»¥ä½œä¸ºé”®ï¼Œè¿™æ ·çš„é”®åªæœ‰ä¸€ä¸ªï¼›å¯ä»¥æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªé”®æ‰€å¯¹åº”çš„å€¼ä¸º null ã€‚å½“ get() æ–¹æ³•è¿”å› null å€¼æ—¶ï¼Œå³å¯ä»¥è¡¨ç¤º HashMap ä¸­æ²¡æœ‰è¯¥é”®ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºè¯¥é”®æ‰€å¯¹åº”çš„å€¼ä¸º null ã€‚å› æ­¤ï¼Œåœ¨ HashMap ä¸­ä¸èƒ½ç”± get() æ–¹æ³•æ¥åˆ¤æ–­ HashMap ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªé”®ï¼Œ è€Œåº”è¯¥ç”¨ containsKey() æ–¹æ³•æ¥åˆ¤æ–­ã€‚\r\n\r\nd)Â  ä¸¤ä¸ªéå†æ–¹å¼çš„å†…éƒ¨å®ç°ä¸Šä¸åŒã€‚Hashtableã€HashMap éƒ½ä½¿ç”¨äº†Iteratorã€‚è€Œç”±äºå†å²åŸå› ï¼ŒHashtableè¿˜ä½¿ç”¨äº† Enumeration çš„æ–¹å¼ ã€‚\r\n\r\ne)Â  å“ˆå¸Œå€¼çš„ä½¿ç”¨ä¸åŒï¼ŒHashTable ç›´æ¥ä½¿ç”¨å¯¹è±¡çš„ hashCodeã€‚è€Œ HashMap é‡æ–°è®¡ç®— hash å€¼ã€‚\r\n\r\nf)Â  Hashtable å’Œ HashMap å®ƒä»¬ä¸¤ä¸ªå†…éƒ¨å®ç°æ–¹å¼çš„æ•°ç»„çš„åˆå§‹å¤§å°å’Œæ‰©å®¹çš„æ–¹å¼ã€‚HashTable ä¸­ hash æ•°ç»„é»˜è®¤å¤§å°æ˜¯11ï¼Œå¢åŠ çš„æ–¹å¼æ˜¯ old*2+1ã€‚HashMap ä¸­ hash æ•°ç»„çš„é»˜è®¤å¤§å°æ˜¯ 16ï¼Œè€Œä¸”ä¸€å®šæ˜¯2çš„æŒ‡æ•°ã€‚\r\n\r\næ³¨ï¼š Â HashSet å­ç±»ä¾é  hashCode() å’Œ equal() æ–¹æ³•æ¥åŒºåˆ†é‡å¤å…ƒç´ ã€‚\r\n\r\nHashSet å†…éƒ¨ä½¿ç”¨ Map ä¿å­˜æ•°æ®ï¼Œå³å°† HashSet çš„æ•°æ®ä½œä¸º Map çš„ key å€¼ä¿å­˜ï¼Œè¿™ä¹Ÿæ˜¯ HashSet ä¸­å…ƒç´ ä¸èƒ½é‡å¤çš„åŸå› ã€‚è€Œ Map ä¸­ä¿å­˜ key å€¼çš„,ä¼šå»åˆ¤æ–­å½“å‰ Map ä¸­æ˜¯å¦å«æœ‰è¯¥ Key å¯¹è±¡ï¼Œå†…éƒ¨æ˜¯å…ˆé€šè¿‡ key çš„hashCode, ç¡®å®šæœ‰ç›¸åŒçš„ hashCode ä¹‹åï¼Œå†é€šè¿‡ equals æ–¹æ³•åˆ¤æ–­æ˜¯å¦ç›¸åŒã€‚\r\n\r\n***\r\n\r\nã€ŠHashMap çš„å·¥ä½œåŸç†ã€‹\r\n\r\nHashMapçš„å·¥ä½œåŸç†æ˜¯è¿‘å¹´æ¥å¸¸è§çš„Javaé¢è¯•é¢˜ã€‚å‡ ä¹æ¯ä¸ªJavaç¨‹åºå‘˜éƒ½çŸ¥é“HashMapï¼Œéƒ½çŸ¥é“å“ªé‡Œè¦ç”¨HashMapï¼ŒçŸ¥é“ Hashtableå’ŒHashMapä¹‹é—´çš„åŒºåˆ«ï¼Œé‚£ä¹ˆä¸ºä½•è¿™é“é¢è¯•é¢˜å¦‚æ­¤ç‰¹æ®Šå‘¢ï¼Ÿæ˜¯å› ä¸ºè¿™é“é¢˜è€ƒå¯Ÿçš„æ·±åº¦å¾ˆæ·±ã€‚è¿™é¢˜ç»å¸¸å‡ºç°åœ¨é«˜çº§æˆ–ä¸­é«˜çº§é¢è¯•ä¸­ã€‚æŠ•èµ„é“¶è¡Œæ›´å–œæ¬¢é—®è¿™ä¸ªé—®é¢˜ï¼Œç”šè‡³ä¼šè¦æ±‚ä½ å®ç°HashMapæ¥è€ƒå¯Ÿä½ çš„ç¼–ç¨‹èƒ½åŠ›ã€‚ConcurrentHashMapå’Œå…¶å®ƒåŒæ­¥é›†åˆçš„å¼•å…¥è®©è¿™é“é¢˜å˜å¾—æ›´åŠ å¤æ‚ã€‚è®©æˆ‘ä»¬å¼€å§‹æ¢ç´¢çš„æ—…ç¨‹å§ï¼\r\n\r\n### å…ˆæ¥äº›ç®€å•çš„é—®é¢˜\r\n\r\n**â€œä½ ç”¨è¿‡HashMapå—ï¼Ÿâ€ â€œä»€ä¹ˆæ˜¯HashMapï¼Ÿä½ ä¸ºä»€ä¹ˆç”¨åˆ°å®ƒï¼Ÿâ€**\r\n\r\nå‡ ä¹æ¯ä¸ªäººéƒ½ä¼šå›ç­”â€œæ˜¯çš„â€ï¼Œç„¶åå›ç­”HashMapçš„ä¸€äº›ç‰¹æ€§ï¼Œè­¬å¦‚HashMapå¯ä»¥æ¥å—nullé”®å€¼å’Œå€¼ï¼Œè€ŒHashtableåˆ™ä¸èƒ½ï¼›HashMapæ˜¯ésynchronized;HashMapå¾ˆå¿«ï¼›ä»¥åŠHashMapå‚¨å­˜çš„æ˜¯é”®å€¼å¯¹ç­‰ç­‰ã€‚è¿™æ˜¾ç¤ºå‡ºä½ å·²ç»ç”¨è¿‡HashMapï¼Œè€Œä¸”å¯¹å®ƒç›¸å½“çš„ç†Ÿæ‚‰ã€‚ä½†æ˜¯é¢è¯•å®˜æ¥ä¸ªæ€¥è½¬ç›´ä¸‹ï¼Œä»æ­¤åˆ»å¼€å§‹é—®å‡ºä¸€äº›åˆé’»çš„é—®é¢˜ï¼Œå…³äºHashMapçš„æ›´å¤šåŸºç¡€çš„ç»†èŠ‚ã€‚é¢è¯•å®˜å¯èƒ½ä¼šé—®å‡ºä¸‹é¢çš„é—®é¢˜ï¼š\r\n\r\n**â€œä½ çŸ¥é“HashMapçš„å·¥ä½œåŸç†å—ï¼Ÿâ€ â€œä½ çŸ¥é“HashMapçš„get()æ–¹æ³•çš„å·¥ä½œåŸç†å—ï¼Ÿâ€**\r\n\r\nä½ ä¹Ÿè®¸ä¼šå›ç­”â€œæˆ‘æ²¡æœ‰è¯¦æŸ¥æ ‡å‡†çš„Java APIï¼Œä½ å¯ä»¥çœ‹çœ‹Javaæºä»£ç æˆ–è€…Open JDKã€‚â€â€œæˆ‘å¯ä»¥ç”¨Googleæ‰¾åˆ°ç­”æ¡ˆã€‚â€\r\n\r\nä½†ä¸€äº›é¢è¯•è€…å¯èƒ½å¯ä»¥ç»™å‡ºç­”æ¡ˆï¼Œâ€œHashMapæ˜¯åŸºäºhashingçš„åŸç†ï¼Œæˆ‘ä»¬ä½¿ç”¨put(key, value)å­˜å‚¨å¯¹è±¡åˆ°HashMapä¸­ï¼Œä½¿ç”¨get(key)ä»HashMapä¸­è·å–å¯¹è±¡ã€‚å½“æˆ‘ä»¬ç»™put()æ–¹æ³•ä¼ é€’é”®å’Œå€¼æ—¶ï¼Œæˆ‘ä»¬å…ˆå¯¹é”®è°ƒç”¨hashCode()æ–¹æ³•ï¼Œè¿”å›çš„hashCodeç”¨äºæ‰¾åˆ°bucketä½ç½®æ¥å‚¨å­˜Entryå¯¹è±¡ã€‚â€è¿™é‡Œå…³é”®ç‚¹åœ¨äºæŒ‡å‡ºï¼ŒHashMapæ˜¯åœ¨bucketä¸­å‚¨å­˜é”®å¯¹è±¡å’Œå€¼å¯¹è±¡ï¼Œä½œä¸ºMap.Entryã€‚è¿™ä¸€ç‚¹æœ‰åŠ©äºç†è§£è·å–å¯¹è±¡çš„é€»è¾‘ã€‚å¦‚æœä½ æ²¡æœ‰æ„è¯†åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ–è€…é”™è¯¯çš„è®¤ä¸ºä»…ä»…åªåœ¨bucketä¸­å­˜å‚¨å€¼çš„è¯ï¼Œä½ å°†ä¸ä¼šå›ç­”å¦‚ä½•ä»HashMapä¸­è·å–å¯¹è±¡çš„é€»è¾‘ã€‚è¿™ä¸ªç­”æ¡ˆç›¸å½“çš„æ­£ç¡®ï¼Œä¹Ÿæ˜¾ç¤ºå‡ºé¢è¯•è€…ç¡®å®çŸ¥é“hashingä»¥åŠHashMapçš„å·¥ä½œåŸç†ã€‚ä½†æ˜¯è¿™ä»…ä»…æ˜¯æ•…äº‹çš„å¼€å§‹ï¼Œå½“é¢è¯•å®˜åŠ å…¥ä¸€äº›Javaç¨‹åºå‘˜æ¯å¤©è¦ç¢°åˆ°çš„å®é™…åœºæ™¯çš„æ—¶å€™ï¼Œé”™è¯¯çš„ç­”æ¡ˆé¢‘ç°ã€‚ä¸‹ä¸ªé—®é¢˜å¯èƒ½æ˜¯å…³äºHashMapä¸­çš„ç¢°æ’æ¢æµ‹(collision detection)ä»¥åŠç¢°æ’çš„è§£å†³æ–¹æ³•ï¼š\r\n\r\n**â€œå½“ä¸¤ä¸ªå¯¹è±¡çš„hashcodeç›¸åŒä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿâ€**Â \r\n\r\nä»è¿™é‡Œå¼€å§‹ï¼ŒçœŸæ­£çš„å›°æƒ‘å¼€å§‹äº†ï¼Œä¸€äº›é¢è¯•è€…ä¼šå›ç­”å› ä¸ºhashcodeç›¸åŒï¼Œæ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„ï¼ŒHashMapå°†ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæˆ–è€…ä¸ä¼šå­˜å‚¨å®ƒä»¬ã€‚ç„¶åé¢è¯•å®˜å¯èƒ½ä¼šæé†’ä»–ä»¬æœ‰equals()å’ŒhashCode()ä¸¤ä¸ªæ–¹æ³•ï¼Œå¹¶å‘Šè¯‰ä»–ä»¬ä¸¤ä¸ªå¯¹è±¡å°±ç®—hashcodeç›¸åŒï¼Œä½†æ˜¯å®ƒä»¬å¯èƒ½å¹¶ä¸ç›¸ç­‰ã€‚ä¸€äº›é¢è¯•è€…å¯èƒ½å°±æ­¤æ”¾å¼ƒï¼Œè€Œå¦å¤–ä¸€äº›è¿˜èƒ½ç»§ç»­æŒºè¿›ï¼Œä»–ä»¬å›ç­”â€œå› ä¸ºhashcodeç›¸åŒï¼Œæ‰€ä»¥å®ƒä»¬çš„bucketä½ç½®ç›¸åŒï¼Œâ€˜ç¢°æ’â€™ä¼šå‘ç”Ÿã€‚å› ä¸ºHashMapä½¿ç”¨é“¾è¡¨å­˜å‚¨å¯¹è±¡ï¼Œè¿™ä¸ªEntry(åŒ…å«æœ‰é”®å€¼å¯¹çš„Map.Entryå¯¹è±¡)ä¼šå­˜å‚¨åœ¨é“¾è¡¨ä¸­ã€‚â€è¿™ä¸ªç­”æ¡ˆéå¸¸çš„åˆç†ï¼Œè™½ç„¶æœ‰å¾ˆå¤šç§å¤„ç†ç¢°æ’çš„æ–¹æ³•ï¼Œè¿™ç§æ–¹æ³•æ˜¯æœ€ç®€å•çš„ï¼Œä¹Ÿæ­£æ˜¯HashMapçš„å¤„ç†æ–¹æ³•ã€‚ä½†æ•…äº‹è¿˜æ²¡æœ‰å®Œç»“ï¼Œé¢è¯•å®˜ä¼šç»§ç»­é—®ï¼š\r\n\r\n**â€œå¦‚æœä¸¤ä¸ªé”®çš„hashcodeç›¸åŒï¼Œä½ å¦‚ä½•è·å–å€¼å¯¹è±¡ï¼Ÿâ€**\r\n\r\nÂ é¢è¯•è€…ä¼šå›ç­”ï¼šå½“æˆ‘ä»¬è°ƒç”¨get()æ–¹æ³•ï¼ŒHashMapä¼šä½¿ç”¨é”®å¯¹è±¡çš„hashcodeæ‰¾åˆ°bucketä½ç½®ï¼Œç„¶åè·å–å€¼å¯¹è±¡ã€‚é¢è¯•å®˜æé†’ä»–å¦‚æœæœ‰ä¸¤ä¸ªå€¼å¯¹è±¡å‚¨å­˜åœ¨åŒä¸€ä¸ªbucketï¼Œä»–ç»™å‡ºç­”æ¡ˆ:å°†ä¼šéå†é“¾è¡¨ç›´åˆ°æ‰¾åˆ°å€¼å¯¹è±¡ã€‚é¢è¯•å®˜ä¼šé—®å› ä¸ºä½ å¹¶æ²¡æœ‰å€¼å¯¹è±¡å»æ¯”è¾ƒï¼Œä½ æ˜¯å¦‚ä½•ç¡®å®šç¡®å®šæ‰¾åˆ°å€¼å¯¹è±¡çš„ï¼Ÿé™¤éé¢è¯•è€…ç›´åˆ°HashMapåœ¨é“¾è¡¨ä¸­å­˜å‚¨çš„æ˜¯é”®å€¼å¯¹ï¼Œå¦åˆ™ä»–ä»¬ä¸å¯èƒ½å›ç­”å‡ºè¿™ä¸€é¢˜ã€‚\r\n\r\nå…¶ä¸­ä¸€äº›è®°å¾—è¿™ä¸ªé‡è¦çŸ¥è¯†ç‚¹çš„é¢è¯•è€…ä¼šè¯´ï¼Œæ‰¾åˆ°bucketä½ç½®ä¹‹åï¼Œä¼šè°ƒç”¨keys.equals()æ–¹æ³•å»æ‰¾åˆ°é“¾è¡¨ä¸­æ­£ç¡®çš„èŠ‚ç‚¹ï¼Œæœ€ç»ˆæ‰¾åˆ°è¦æ‰¾çš„å€¼å¯¹è±¡ã€‚å®Œç¾çš„ç­”æ¡ˆï¼\r\n\r\nè®¸å¤šæƒ…å†µä¸‹ï¼Œé¢è¯•è€…ä¼šåœ¨è¿™ä¸ªç¯èŠ‚ä¸­å‡ºé”™ï¼Œå› ä¸ºä»–ä»¬æ··æ·†äº†hashCode()å’Œequals()æ–¹æ³•ã€‚å› ä¸ºåœ¨æ­¤ä¹‹å‰hashCode()å±¡å±¡å‡ºç°ï¼Œè€Œequals()æ–¹æ³•ä»…ä»…åœ¨è·å–å€¼å¯¹è±¡çš„æ—¶å€™æ‰å‡ºç°ã€‚ä¸€äº›ä¼˜ç§€çš„å¼€å‘è€…ä¼šæŒ‡å‡ºä½¿ç”¨ä¸å¯å˜çš„ã€å£°æ˜ä½œfinalçš„å¯¹è±¡ï¼Œå¹¶ä¸”é‡‡ç”¨åˆé€‚çš„equals()å’ŒhashCode()æ–¹æ³•çš„è¯ï¼Œå°†ä¼šå‡å°‘ç¢°æ’çš„å‘ç”Ÿï¼Œæé«˜æ•ˆç‡ã€‚ä¸å¯å˜æ€§ä½¿å¾—èƒ½å¤Ÿç¼“å­˜ä¸åŒé”®çš„hashcodeï¼Œè¿™å°†æé«˜æ•´ä¸ªè·å–å¯¹è±¡çš„é€Ÿåº¦ï¼Œä½¿ç”¨Stringï¼ŒIntergerè¿™æ ·çš„wrapperç±»ä½œä¸ºé”®æ˜¯éå¸¸å¥½çš„é€‰æ‹©ã€‚\r\n\r\nå¦‚æœä½ è®¤ä¸ºåˆ°è¿™é‡Œå·²ç»å®Œç»“äº†ï¼Œé‚£ä¹ˆå¬åˆ°ä¸‹é¢è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œä½ ä¼šå¤§åƒä¸€æƒŠã€‚\r\n\r\n**â€œå¦‚æœHashMapçš„å¤§å°è¶…è¿‡äº†è´Ÿè½½å› å­(load factor)å®šä¹‰çš„å®¹é‡ï¼Œæ€ä¹ˆåŠï¼Ÿâ€**\r\n\r\né™¤éä½ çœŸæ­£çŸ¥é“HashMapçš„å·¥ä½œåŸç†ï¼Œå¦åˆ™ä½ å°†å›ç­”ä¸å‡ºè¿™é“é¢˜ã€‚é»˜è®¤çš„è´Ÿè½½å› å­å¤§å°ä¸º0.75ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ä¸€ä¸ªmapå¡«æ»¡äº†75%çš„bucketæ—¶å€™ï¼Œå’Œå…¶å®ƒé›†åˆç±»(å¦‚ArrayListç­‰)ä¸€æ ·ï¼Œå°†ä¼šåˆ›å»ºåŸæ¥HashMapå¤§å°çš„ä¸¤å€çš„bucketæ•°ç»„ï¼Œæ¥é‡æ–°è°ƒæ•´mapçš„å¤§å°ï¼Œå¹¶å°†åŸæ¥çš„å¯¹è±¡æ”¾å…¥æ–°çš„bucketæ•°ç»„ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹å«ä½œrehashingï¼Œå› ä¸ºå®ƒè°ƒç”¨hashæ–¹æ³•æ‰¾åˆ°æ–°çš„bucketä½ç½®ã€‚\r\n\r\nå¦‚æœä½ èƒ½å¤Ÿå›ç­”è¿™é“é—®é¢˜ï¼Œä¸‹é¢çš„é—®é¢˜æ¥äº†ï¼š\r\n\r\n**â€œä½ äº†è§£é‡æ–°è°ƒæ•´HashMapå¤§å°å­˜åœ¨ä»€ä¹ˆé—®é¢˜å—ï¼Ÿâ€**\r\n\r\nä½ å¯èƒ½å›ç­”ä¸ä¸Šæ¥ï¼Œè¿™æ—¶é¢è¯•å®˜ä¼šæé†’ä½ å½“å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½äº§ç”Ÿæ¡ä»¶ç«äº‰(race condition)ã€‚\r\n\r\nå½“é‡æ–°è°ƒæ•´HashMapå¤§å°çš„æ—¶å€™ï¼Œç¡®å®å­˜åœ¨æ¡ä»¶ç«äº‰ï¼Œå› ä¸ºå¦‚æœä¸¤ä¸ªçº¿ç¨‹éƒ½å‘ç°HashMapéœ€è¦é‡æ–°è°ƒæ•´å¤§å°äº†ï¼Œå®ƒä»¬ä¼šåŒæ—¶è¯•ç€è°ƒæ•´å¤§å°ã€‚åœ¨è°ƒæ•´å¤§å°çš„è¿‡ç¨‹ä¸­ï¼Œå­˜å‚¨åœ¨é“¾è¡¨ä¸­çš„å…ƒç´ çš„æ¬¡åºä¼šåè¿‡æ¥ï¼Œå› ä¸ºç§»åŠ¨åˆ°æ–°çš„bucketä½ç½®çš„æ—¶å€™ï¼ŒHashMapå¹¶ä¸ä¼šå°†å…ƒç´ æ”¾åœ¨é“¾è¡¨çš„å°¾éƒ¨ï¼Œè€Œæ˜¯æ”¾åœ¨å¤´éƒ¨ï¼Œè¿™æ˜¯ä¸ºäº†é¿å…å°¾éƒ¨éå†(tail traversing)ã€‚å¦‚æœæ¡ä»¶ç«äº‰å‘ç”Ÿäº†ï¼Œé‚£ä¹ˆå°±æ­»å¾ªç¯äº†ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ å¯ä»¥è´¨é—®é¢è¯•å®˜ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆå¥‡æ€ªï¼Œè¦åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸‹ä½¿ç”¨HashMapå‘¢ï¼Ÿï¼šï¼‰\r\n\r\nçƒ­å¿ƒçš„è¯»è€…è´¡çŒ®äº†æ›´å¤šçš„å…³äºHashMapçš„é—®é¢˜ï¼š\r\n\r\n1. **ä¸ºä»€ä¹ˆString, Intergerè¿™æ ·çš„wrapperç±»é€‚åˆä½œä¸ºé”®ï¼Ÿ**Â \r\n\r\n   String, Intergerè¿™æ ·çš„wrapperç±»ä½œä¸ºHashMapçš„é”®æ˜¯å†é€‚åˆä¸è¿‡äº†ï¼Œè€Œä¸”Stringæœ€ä¸ºå¸¸ç”¨ã€‚å› ä¸ºStringæ˜¯ä¸å¯å˜çš„ï¼Œä¹Ÿæ˜¯finalçš„ï¼Œè€Œä¸”å·²ç»é‡å†™äº†equals()å’ŒhashCode()æ–¹æ³•äº†ã€‚å…¶ä»–çš„wrapperç±»ä¹Ÿæœ‰è¿™ä¸ªç‰¹ç‚¹ã€‚ä¸å¯å˜æ€§æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºä¸ºäº†è¦è®¡ç®—hashCode()ï¼Œå°±è¦é˜²æ­¢é”®å€¼æ”¹å˜ï¼Œå¦‚æœé”®å€¼åœ¨æ”¾å…¥æ—¶å’Œè·å–æ—¶è¿”å›ä¸åŒçš„hashcodeçš„è¯ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä»HashMapä¸­æ‰¾åˆ°ä½ æƒ³è¦çš„å¯¹è±¡ã€‚ä¸å¯å˜æ€§è¿˜æœ‰å…¶ä»–çš„ä¼˜ç‚¹å¦‚çº¿ç¨‹å®‰å…¨ã€‚å¦‚æœä½ å¯ä»¥ä»…ä»…é€šè¿‡å°†æŸä¸ªfieldå£°æ˜æˆfinalå°±èƒ½ä¿è¯hashCodeæ˜¯ä¸å˜çš„ï¼Œé‚£ä¹ˆè¯·è¿™ä¹ˆåšå§ã€‚å› ä¸ºè·å–å¯¹è±¡çš„æ—¶å€™è¦ç”¨åˆ°equals()å’ŒhashCode()æ–¹æ³•ï¼Œé‚£ä¹ˆé”®å¯¹è±¡æ­£ç¡®çš„é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯éå¸¸é‡è¦çš„ã€‚å¦‚æœä¸¤ä¸ªä¸ç›¸ç­‰çš„å¯¹è±¡è¿”å›ä¸åŒçš„hashcodeçš„è¯ï¼Œé‚£ä¹ˆç¢°æ’çš„å‡ ç‡å°±ä¼šå°äº›ï¼Œè¿™æ ·å°±èƒ½æé«˜HashMapçš„æ€§èƒ½ã€‚\r\n\r\n2. **æˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„å¯¹è±¡ä½œä¸ºé”®å—ï¼Ÿ**Â \r\n\r\n   è¿™æ˜¯å‰ä¸€ä¸ªé—®é¢˜çš„å»¶ä¼¸ã€‚å½“ç„¶ä½ å¯èƒ½ä½¿ç”¨ä»»ä½•å¯¹è±¡ä½œä¸ºé”®ï¼Œåªè¦å®ƒéµå®ˆäº†equals()å’ŒhashCode()æ–¹æ³•çš„å®šä¹‰è§„åˆ™ï¼Œå¹¶ä¸”å½“å¯¹è±¡æ’å…¥åˆ°Mapä¸­ä¹‹åå°†ä¸ä¼šå†æ”¹å˜äº†ã€‚å¦‚æœè¿™ä¸ªè‡ªå®šä¹‰å¯¹è±¡æ—¶ä¸å¯å˜çš„ï¼Œé‚£ä¹ˆå®ƒå·²ç»æ»¡è¶³äº†ä½œä¸ºé”®çš„æ¡ä»¶ï¼Œå› ä¸ºå½“å®ƒåˆ›å»ºä¹‹åå°±å·²ç»ä¸èƒ½æ”¹å˜äº†ã€‚\r\n\r\n3. **æˆ‘ä»¬å¯ä»¥ä½¿ç”¨CocurrentHashMapæ¥ä»£æ›¿Hashtableå—ï¼Ÿ**\r\n\r\n   è¿™æ˜¯å¦å¤–ä¸€ä¸ªå¾ˆçƒ­é—¨çš„é¢è¯•é¢˜ï¼Œå› ä¸ºConcurrentHashMapè¶Šæ¥è¶Šå¤šäººç”¨äº†ã€‚æˆ‘ä»¬çŸ¥é“Hashtableæ˜¯synchronizedçš„ï¼Œä½†æ˜¯ConcurrentHashMapåŒæ­¥æ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºå®ƒä»…ä»…æ ¹æ®åŒæ­¥çº§åˆ«å¯¹mapçš„ä¸€éƒ¨åˆ†è¿›è¡Œä¸Šé”ã€‚ConcurrentHashMapå½“ç„¶å¯ä»¥ä»£æ›¿HashTableï¼Œä½†æ˜¯HashTableæä¾›æ›´å¼ºçš„çº¿ç¨‹å®‰å…¨æ€§ã€‚çœ‹çœ‹ [è¿™ç¯‡åšå®¢](http://javarevisited.blogspot.sg/2011/04/difference-between-concurrenthashmap.html) æŸ¥çœ‹Hashtableå’ŒConcurrentHashMapçš„åŒºåˆ«ã€‚\r\n\r\næˆ‘ä¸ªäººå¾ˆå–œæ¬¢è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜çš„æ·±åº¦å’Œå¹¿åº¦ï¼Œä¹Ÿä¸ç›´æ¥çš„æ¶‰åŠåˆ°ä¸åŒçš„æ¦‚å¿µã€‚è®©æˆ‘ä»¬å†æ¥çœ‹çœ‹è¿™äº›é—®é¢˜è®¾è®¡å“ªäº›çŸ¥è¯†ç‚¹ï¼š\r\n\r\n- hashingçš„æ¦‚å¿µ\r\n- HashMapä¸­è§£å†³ç¢°æ’çš„æ–¹æ³•\r\n- equals()å’ŒhashCode()çš„åº”ç”¨ï¼Œä»¥åŠå®ƒä»¬åœ¨HashMapä¸­çš„é‡è¦æ€§\r\n- ä¸å¯å˜å¯¹è±¡çš„å¥½å¤„\r\n- HashMapå¤šçº¿ç¨‹çš„æ¡ä»¶ç«äº‰\r\n- é‡æ–°è°ƒæ•´HashMapçš„å¤§å°\r\n\r\n### æ€»ç»“\r\n\r\n#### HashMapçš„å·¥ä½œåŸç†\r\n\r\nHashMapåŸºäºhashingåŸç†ï¼Œæˆ‘ä»¬é€šè¿‡put()å’Œget()æ–¹æ³•å‚¨å­˜å’Œè·å–å¯¹è±¡ã€‚å½“æˆ‘ä»¬å°†é”®å€¼å¯¹ä¼ é€’ç»™put()æ–¹æ³•æ—¶ï¼Œå®ƒè°ƒç”¨é”®å¯¹è±¡çš„hashCode()æ–¹æ³•æ¥è®¡ç®—hashcodeï¼Œè®©åæ‰¾åˆ°bucketä½ç½®æ¥å‚¨å­˜å€¼å¯¹è±¡ã€‚å½“è·å–å¯¹è±¡æ—¶ï¼Œé€šè¿‡é”®å¯¹è±¡çš„equals()æ–¹æ³•æ‰¾åˆ°æ­£ç¡®çš„é”®å€¼å¯¹ï¼Œç„¶åè¿”å›å€¼å¯¹è±¡ã€‚HashMapä½¿ç”¨é“¾è¡¨æ¥è§£å†³ç¢°æ’é—®é¢˜ï¼Œå½“å‘ç”Ÿç¢°æ’äº†ï¼Œå¯¹è±¡å°†ä¼šå‚¨å­˜åœ¨é“¾è¡¨çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸­ã€‚ HashMapåœ¨æ¯ä¸ªé“¾è¡¨èŠ‚ç‚¹ä¸­å‚¨å­˜é”®å€¼å¯¹å¯¹è±¡ã€‚\r\n\r\nå½“ä¸¤ä¸ªä¸åŒçš„é”®å¯¹è±¡çš„hashcodeç›¸åŒæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ å®ƒä»¬ä¼šå‚¨å­˜åœ¨åŒä¸€ä¸ªbucketä½ç½®çš„é“¾è¡¨ä¸­ã€‚é”®å¯¹è±¡çš„equals()æ–¹æ³•ç”¨æ¥æ‰¾åˆ°é”®å€¼å¯¹ã€‚\r\n\r\nå› ä¸ºHashMapçš„å¥½å¤„éå¸¸å¤šï¼Œæˆ‘æ›¾ç»åœ¨ç”µå­å•†åŠ¡çš„åº”ç”¨ä¸­ä½¿ç”¨HashMapä½œä¸ºç¼“å­˜ã€‚å› ä¸ºé‡‘èé¢†åŸŸéå¸¸å¤šçš„è¿ç”¨Javaï¼Œä¹Ÿå‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œæˆ‘ä»¬ä¼šç»å¸¸ç”¨åˆ°HashMapå’ŒConcurrentHashMapã€‚ä½ å¯ä»¥æŸ¥çœ‹æ›´å¤šçš„å…³äºHashMapçš„æ–‡ç« :\r\n\r\n- [HashMapå’ŒHashtableçš„åŒºåˆ«](http://www.importnew.com/7010.html)\r\n- [HashMapå’ŒHashSetçš„åŒºåˆ«](http://www.importnew.com/11931.html)\r\n\r\nè½¬è½½è‡ªï¼š[HashMapçš„å·¥ä½œåŸç†](http://www.importnew.com/7099.html)\r\n\r\n***\r\n\r\nå…¶ä»–çš„ HashMap å­¦ä¹ èµ„æ–™ï¼š\r\n\r\n+ [jdk7ä¸­HashMapçŸ¥è¯†ç‚¹æ•´ç†](https://segmentfault.com/a/1190000003617333)\r\n+ [HashMapæºç åˆ†æï¼ˆå››ï¼‰put-jdk8-çº¢é»‘æ ‘çš„å¼•å…¥](http://blog.csdn.net/q291611265/article/details/46797557)\r\n+ [JDK7ä¸JDK8ä¸­HashMapçš„å®ç°](https://my.oschina.net/hosee/blog/1118953)\r\n+ [JDK1.8HashMapåŸç†å’Œæºç åˆ†æ(javaé¢è¯•æ”¶è—)](https://wenku.baidu.com/view/11e1035943968011ca30091cd.html)\r\n+ [è°ˆè°ˆConcurrentHashMap1.7å’Œ1.8çš„ä¸åŒå®ç°](http://www.jianshu.com/p/e694f1e868ec)\r\n+ [jdk1.8çš„HashMapå’ŒConcurrentHashMap](https://my.oschina.net/pingpangkuangmo/blog/817973)\r\n+ [ConcurrentHashMapæºç åˆ†æï¼ˆJDK8ç‰ˆæœ¬ï¼‰](http://blog.csdn.net/u010723709/article/details/48007881)\r\n\r\n***\r\n\r\n### æœ€å\r\n\r\nè°¢è°¢é˜…è¯»ï¼Œå¦‚æœå¯ä»¥çš„è¯æ¬¢è¿å¤§å®¶è½¬å‘å’Œç‚¹èµã€‚å¦‚éœ€è½¬è½½æ³¨æ˜[åŸåœ°å€](www.54tianzhisheng.cn/2022/06/10/HashMap-Hashtable/)å°±è¡Œã€‚\r\n\r\nç¾¤ 528776268 æ¬¢è¿å„ä½å¤§ç‰›è¿›ç¾¤ä¸€èµ·è®¨è®ºã€‚\r\n\r\n![](http://ohfk1r827.bkt.clouddn.com/1473414112000.png)', 1, 'post', 'publish', 'Java,HashMap,HashTable,HashSet,ConcurrentHashMap', 'Java', 2, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (5, 'Pyspideræ¡†æ¶ â€”â€” Pythonçˆ¬è™«å®æˆ˜ä¹‹çˆ¬å– V2EX ç½‘ç«™å¸–å­', 'Pyspider-v2ex', 1669740067, 1669740067, '**èƒŒæ™¯ï¼š**\r\n\r\n**PySpider**ï¼šä¸€ä¸ªå›½äººç¼–å†™çš„å¼ºå¤§çš„ç½‘ç»œçˆ¬è™«ç³»ç»Ÿå¹¶å¸¦æœ‰å¼ºå¤§çš„WebUIã€‚é‡‡ç”¨Pythonè¯­è¨€ç¼–å†™ï¼Œåˆ†å¸ƒå¼æ¶æ„ï¼Œæ”¯æŒå¤šç§æ•°æ®åº“åç«¯ï¼Œå¼ºå¤§çš„WebUIæ”¯æŒè„šæœ¬ç¼–è¾‘å™¨ï¼Œä»»åŠ¡ç›‘è§†å™¨ï¼Œé¡¹ç›®ç®¡ç†å™¨ä»¥åŠç»“æœæŸ¥çœ‹å™¨ã€‚åœ¨çº¿ç¤ºä¾‹ï¼š **http://demo.pyspider.org/**\r\n\r\n**å®˜æ–¹æ–‡æ¡£ï¼š http://docs.pyspider.org/en/latest/** \r\n\r\n**Github :  https://github.com/binux/pyspider** \r\n\r\næœ¬æ–‡çˆ¬è™«ä»£ç  Github åœ°å€ï¼š**https://github.com/zhisheng17/Python-Projects/blob/master/v2ex/V2EX.py**\r\n\r\n<!-- more -->\r\n\r\n***\r\n\r\nè¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹æ­£æ–‡å§ï¼\r\n\r\n**å‰æ:** ä½ å·²ç»å®‰è£…å¥½äº†Pyspider å’Œ MySQL-pythonï¼ˆä¿å­˜æ•°æ®ï¼‰\r\n\r\nå¦‚æœä½ è¿˜æ²¡å®‰è£…çš„è¯ï¼Œè¯·çœ‹çœ‹æˆ‘çš„å‰ä¸€ç¯‡æ–‡ç« ï¼Œé˜²æ­¢ä½ ä¹Ÿèµ°å¼¯è·¯ã€‚\r\n\r\n1. [**Pyspider æ¡†æ¶å­¦ä¹ æ—¶èµ°è¿‡çš„ä¸€äº›å‘**](http://blog.csdn.net/tzs_1041218129/article/details/52877949)\r\n\r\n2. [**HTTP 599: SSL certificate problem: unable to get local issuer certificateé”™è¯¯**](http://blog.csdn.net/tzs_1041218129/article/details/52853465)\r\n\r\næˆ‘æ‰€é‡åˆ°çš„ä¸€äº›é”™è¯¯ï¼š\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022201123063)\r\n\r\n\r\né¦–å…ˆï¼Œ**æœ¬çˆ¬è™«ç›®æ ‡**ï¼šä½¿ç”¨ Pyspider æ¡†æ¶çˆ¬å– [V2EX](www.v2ex.com) ç½‘ç«™çš„å¸–å­ä¸­çš„é—®é¢˜å’Œå†…å®¹ï¼Œç„¶åå°†çˆ¬å–çš„æ•°æ®ä¿å­˜åœ¨æœ¬åœ°ã€‚\r\n\r\nV2EX ä¸­å¤§éƒ¨åˆ†çš„å¸–å­æŸ¥çœ‹æ˜¯ä¸éœ€è¦ç™»å½•çš„ï¼Œå½“ç„¶ä¹Ÿæœ‰äº›å¸–å­æ˜¯éœ€è¦ç™»é™†åæ‰èƒ½å¤ŸæŸ¥çœ‹çš„ã€‚ï¼ˆå› ä¸ºåæ¥çˆ¬å–çš„æ—¶å€™å‘ç°ä¸€ç›´ error ï¼ŒæŸ¥çœ‹å…·ä½“åŸå› åæ‰çŸ¥é“æ˜¯éœ€è¦ç™»å½•çš„æ‰å¯ä»¥æŸ¥çœ‹é‚£äº›å¸–å­çš„ï¼‰æ‰€ä»¥æˆ‘è§‰å¾—æ²¡å¿…è¦ç”¨åˆ° Cookieï¼Œå½“ç„¶å¦‚æœä½ éå¾—è¦ç™»å½•ï¼Œé‚£ä¹Ÿå¾ˆç®€å•ï¼Œç®€å•åœ°æ–¹æ³•å°±æ˜¯æ·»åŠ ä½ ç™»å½•åçš„ cookie äº†ã€‚\r\n\r\næˆ‘ä»¬åœ¨ https://www.v2ex.com/ æ‰«äº†ä¸€éï¼Œå‘ç°å¹¶æ²¡æœ‰ä¸€ä¸ªåˆ—è¡¨èƒ½åŒ…å«æ‰€æœ‰çš„å¸–å­ï¼Œåªèƒ½é€€è€Œæ±‚å…¶æ¬¡ï¼Œé€šè¿‡æŠ“å–åˆ†ç±»ä¸‹çš„æ‰€æœ‰çš„æ ‡ç­¾åˆ—è¡¨é¡µï¼Œæ¥éå†æ‰€æœ‰çš„å¸–å­ï¼š https://www.v2ex.com/?tab=tech ç„¶åæ˜¯ https://www.v2ex.com/go/programmer  æœ€åæ¯ä¸ªå¸–å­çš„è¯¦æƒ…åœ°å€æ˜¯ ï¼ˆä¸¾ä¾‹ï¼‰ï¼š https://www.v2ex.com/t/314683#reply1\r\n\r\n\r\n\r\n**åˆ›å»ºä¸€ä¸ªé¡¹ç›®**\r\n\r\nåœ¨ pyspider çš„ dashboard çš„å³ä¸‹è§’ï¼Œç‚¹å‡» â€œCreateâ€ æŒ‰é’®\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022193415047)\r\n\r\næ›¿æ¢ on_start å‡½æ•°çš„ self.crawl çš„ URLï¼š\r\n\r\n```\r\n@every(minutes=24 * 60)\r\n    def on_start(self):\r\n        self.crawl(\'https://www.v2ex.com/\', callback=self.index_page, validate_cert=False)\r\n```\r\n\r\n> + self.crawl å‘Šè¯‰ pyspider æŠ“å–æŒ‡å®šé¡µé¢ï¼Œç„¶åä½¿ç”¨ callback å‡½æ•°å¯¹ç»“æœè¿›è¡Œè§£æã€‚\r\n> + @every) ä¿®é¥°å™¨ï¼Œè¡¨ç¤º on_start æ¯å¤©ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè¿™æ ·å°±èƒ½æŠ“åˆ°æœ€æ–°çš„å¸–å­äº†ã€‚\r\n> + validate_cert=False ä¸€å®šè¦è¿™æ ·ï¼Œå¦åˆ™ä¼šæŠ¥ HTTP 599: SSL certificate problem: unable to get local issuer certificateé”™è¯¯\r\n\r\n**é¦–é¡µï¼š**\r\n\r\nç‚¹å‡»ç»¿è‰²çš„ run æ‰§è¡Œï¼Œä½ ä¼šçœ‹åˆ° follows ä¸Šé¢æœ‰ä¸€ä¸ªçº¢è‰²çš„ 1ï¼Œåˆ‡æ¢åˆ° follows é¢æ¿ï¼Œç‚¹å‡»ç»¿è‰²çš„æ’­æ”¾æŒ‰é’®ï¼š\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022194343052)\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022194412365)\r\n\r\nç¬¬äºŒå¼ æˆªå›¾ä¸€å¼€å§‹æ˜¯å‡ºç°è¿™ä¸ªé—®é¢˜äº†ï¼Œè§£å†³åŠæ³•çœ‹å‰é¢å†™çš„æ–‡ç« ï¼Œåæ¥é—®é¢˜å°±ä¸å†ä¼šå‡ºç°äº†ã€‚\r\n\r\n<br>\r\n**Tab åˆ—è¡¨é¡µ : **\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022194637692)\r\n\r\nåœ¨ tab åˆ—è¡¨é¡µ ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æå–å‡ºæ‰€æœ‰çš„ä¸»é¢˜åˆ—è¡¨é¡µ çš„ URLã€‚ä½ å¯èƒ½å·²ç»å‘ç°äº†ï¼Œsample handler å·²ç»æå–äº†éå¸¸å¤šå¤§çš„ URL\r\n\r\nä»£ç ï¼š\r\n```\r\n@config(age=10 * 24 * 60 * 60)\r\n    def index_page(self, response):\r\n        for each in response.doc(\'a[href^=\"https://www.v2ex.com/?tab=\"]\').items():\r\n            self.crawl(each.attr.href, callback=self.tab_page, validate_cert=False)\r\n```\r\n\r\n> + ç”±äºå¸–å­åˆ—è¡¨é¡µå’Œ tabåˆ—è¡¨é¡µé•¿çš„å¹¶ä¸ä¸€æ ·ï¼Œåœ¨è¿™é‡Œæ–°å»ºäº†ä¸€ä¸ª callback ä¸º self.tab_page\r\n> + @config(age=10 * 24 * 60 * 60) åœ¨è¿™è¡¨ç¤ºæˆ‘ä»¬è®¤ä¸º 10 å¤©å†…é¡µé¢æœ‰æ•ˆï¼Œä¸ä¼šå†æ¬¡è¿›è¡Œæ›´æ–°æŠ“å–\r\n\r\n\r\n**Goåˆ—è¡¨é¡µ : **\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022195235290)\r\n\r\nä»£ç ï¼š\r\n\r\n```\r\n@config(age=10 * 24 * 60 * 60)\r\n    def tab_page(self, response):\r\n        for each in response.doc(\'a[href^=\"https://www.v2ex.com/go/\"]\').items():\r\n            self.crawl(each.attr.href, callback=self.board_page, validate_cert=False)\r\n```\r\n\r\n**å¸–å­è¯¦æƒ…é¡µï¼ˆTï¼‰:**\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022200023793)\r\n\r\nä½ å¯ä»¥çœ‹åˆ°ç»“æœé‡Œé¢å‡ºç°äº†ä¸€äº›replyçš„ä¸œè¥¿ï¼Œå¯¹äºè¿™äº›æˆ‘ä»¬æ˜¯å¯ä»¥ä¸éœ€è¦çš„ï¼Œæˆ‘ä»¬å¯ä»¥å»æ‰ã€‚\r\n\r\nåŒæ—¶æˆ‘ä»¬è¿˜éœ€è¦è®©ä»–è‡ªå·±å®ç°è‡ªåŠ¨ç¿»é¡µåŠŸèƒ½ã€‚\r\n\r\nä»£ç ï¼š\r\n```\r\n@config(age=10 * 24 * 60 * 60)\r\n    def board_page(self, response):\r\n        for each in response.doc(\'a[href^=\"https://www.v2ex.com/t/\"]\').items():\r\n            url = each.attr.href\r\n            if url.find(\'#reply\')>0:\r\n                url = url[0:url.find(\'#\')]\r\n            self.crawl(url, callback=self.detail_page, validate_cert=False)\r\n        for each in response.doc(\'a.page_normal\').items():\r\n            self.crawl(each.attr.href, callback=self.board_page, validate_cert=False) #å®ç°è‡ªåŠ¨ç¿»é¡µåŠŸèƒ½\r\n```\r\n\r\nå»æ‰åçš„è¿è¡Œæˆªå›¾ï¼š\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022200324719)\r\n\r\nå®ç°è‡ªåŠ¨ç¿»é¡µåçš„æˆªå›¾ï¼š\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022201355970)\r\n\r\næ­¤æ—¶æˆ‘ä»¬å·²ç»å¯ä»¥åŒ¹é…äº†æ‰€æœ‰çš„å¸–å­çš„ url äº†ã€‚\r\n\r\nç‚¹å‡»æ¯ä¸ªå¸–å­åé¢çš„æŒ‰é’®å°±å¯ä»¥æŸ¥çœ‹å¸–å­å…·ä½“è¯¦æƒ…äº†ã€‚\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022200539973)\r\n\r\nä»£ç ï¼š\r\n\r\n```\r\n@config(priority=2)\r\n    def detail_page(self, response):\r\n        title = response.doc(\'h1\').text()\r\n        content = response.doc(\'div.topic_content\').html().replace(\'\"\', \'\\\\\"\')\r\n        self.add_question(title, content)  #æ’å…¥æ•°æ®åº“\r\n        return {\r\n            \"url\": response.url,\r\n            \"title\": title,\r\n            \"content\": content,\r\n        }\r\n```\r\n\r\næ’å…¥æ•°æ®åº“çš„è¯ï¼Œéœ€è¦æˆ‘ä»¬åœ¨ä¹‹å‰å®šä¹‰ä¸€ä¸ªadd_questionå‡½æ•°ã€‚\r\n\r\n```\r\n#è¿æ¥æ•°æ®åº“\r\ndef __init__(self):\r\n        self.db = MySQLdb.connect(\'localhost\', \'root\', \'root\', \'wenda\', charset=\'utf8\')\r\n\r\n    def add_question(self, title, content):\r\n        try:\r\n            cursor = self.db.cursor()\r\n            sql = \'insert into question(title, content, user_id, created_date, comment_count) values (\"%s\",\"%s\",%d, %s, 0)\' % (title, content, random.randint(1, 10) , \'now()\');   #æ’å…¥æ•°æ®åº“çš„SQLè¯­å¥\r\n            print sql\r\n            cursor.execute(sql)\r\n            print cursor.lastrowid\r\n            self.db.commit()\r\n        except Exception, e:\r\n            print e\r\n            self.db.rollback()\r\n```\r\n\r\næŸ¥çœ‹çˆ¬è™«è¿è¡Œç»“æœï¼š\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022202200801)\r\n\r\n> 1. å…ˆdebugä¸‹ï¼Œå†è°ƒæˆrunningã€‚pyspideræ¡†æ¶åœ¨windowsä¸‹çš„bug\r\n> 2. è®¾ç½®è·‘çš„é€Ÿåº¦ï¼Œå»ºè®®ä¸è¦è·‘çš„å¤ªå¿«ï¼Œå¦åˆ™å¾ˆå®¹æ˜“è¢«å‘ç°æ˜¯çˆ¬è™«çš„ï¼Œäººå®¶å°±ä¼šæŠŠä½ çš„IPç»™å°æ‰çš„\r\n> 3. æŸ¥çœ‹è¿è¡Œå·¥ä½œ\r\n> 4. æŸ¥çœ‹çˆ¬å–ä¸‹æ¥çš„å†…å®¹\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022202033227)\r\n\r\n![è¿™é‡Œå†™å›¾ç‰‡æè¿°](http://img.blog.csdn.net/20161022202048258)\r\n\r\nç„¶åå†æœ¬åœ°æ•°æ®åº“GUIè½¯ä»¶ä¸ŠæŸ¥è¯¢ä¸‹å°±å¯ä»¥çœ‹åˆ°æ•°æ®å·²ç»ä¿å­˜åˆ°æœ¬åœ°äº†ã€‚\r\n\r\nè‡ªå·±éœ€è¦ç”¨çš„è¯å°±å¯ä»¥å¯¼å…¥å‡ºæ¥äº†ã€‚\r\n\r\nåœ¨å¼€å¤´æˆ‘å°±å‘Šè¯‰å¤§å®¶çˆ¬è™«çš„ä»£ç äº†ï¼Œå¦‚æœè¯¦ç»†çš„çœ‹çœ‹é‚£ä¸ªprojectï¼Œä½ å°±ä¼šæ‰¾åˆ°æˆ‘ä¸Šä¼ çš„çˆ¬å–æ•°æ®äº†ã€‚ï¼ˆä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œåˆ‡å‹¿å•†ç”¨ï¼ï¼‰\r\n\r\nå½“ç„¶ä½ è¿˜ä¼šçœ‹åˆ°å…¶ä»–çš„çˆ¬è™«ä»£ç çš„äº†ï¼Œå¦‚æœä½ è§‰å¾—ä¸é”™å¯ä»¥ç»™ä¸ª Starï¼Œæˆ–è€…ä½ ä¹Ÿæ„Ÿå…´è¶£çš„è¯ï¼Œä½ å¯ä»¥forkæˆ‘çš„é¡¹ç›®ï¼Œå’Œæˆ‘ä¸€èµ·å­¦ä¹ ï¼Œè¿™ä¸ªé¡¹ç›®é•¿æœŸæ›´æ–°ä¸‹å»ã€‚\r\n\r\n**æœ€åï¼š**\r\n\r\nä»£ç ï¼š\r\n\r\n```\r\n# created by 10412\r\n# !/usr/bin/env python\r\n# -*- encoding: utf-8 -*-\r\n# Created on 2016-10-20 20:43:00\r\n# Project: V2EX\r\n\r\nfrom pyspider.libs.base_handler import *\r\n\r\nimport re\r\nimport random\r\nimport MySQLdb\r\n\r\nclass Handler(BaseHandler):\r\n    crawl_config = {\r\n    }\r\n\r\n    def __init__(self):\r\n        self.db = MySQLdb.connect(\'localhost\', \'root\', \'root\', \'wenda\', charset=\'utf8\')\r\n\r\n    def add_question(self, title, content):\r\n        try:\r\n            cursor = self.db.cursor()\r\n            sql = \'insert into question(title, content, user_id, created_date, comment_count) values (\"%s\",\"%s\",%d, %s, 0)\' % (title, content, random.randint(1, 10) , \'now()\');\r\n            print sql\r\n            cursor.execute(sql)\r\n            print cursor.lastrowid\r\n            self.db.commit()\r\n        except Exception, e:\r\n            print e\r\n            self.db.rollback()\r\n\r\n\r\n    @every(minutes=24 * 60)\r\n    def on_start(self):\r\n        self.crawl(\'https://www.v2ex.com/\', callback=self.index_page, validate_cert=False)\r\n\r\n    @config(age=10 * 24 * 60 * 60)\r\n    def index_page(self, response):\r\n        for each in response.doc(\'a[href^=\"https://www.v2ex.com/?tab=\"]\').items():\r\n            self.crawl(each.attr.href, callback=self.tab_page, validate_cert=False)\r\n\r\n\r\n    @config(age=10 * 24 * 60 * 60)\r\n    def tab_page(self, response):\r\n        for each in response.doc(\'a[href^=\"https://www.v2ex.com/go/\"]\').items():\r\n            self.crawl(each.attr.href, callback=self.board_page, validate_cert=False)\r\n\r\n\r\n    @config(age=10 * 24 * 60 * 60)\r\n    def board_page(self, response):\r\n        for each in response.doc(\'a[href^=\"https://www.v2ex.com/t/\"]\').items():\r\n            url = each.attr.href\r\n            if url.find(\'#reply\')>0:\r\n                url = url[0:url.find(\'#\')]\r\n            self.crawl(url, callback=self.detail_page, validate_cert=False)\r\n        for each in response.doc(\'a.page_normal\').items():\r\n            self.crawl(each.attr.href, callback=self.board_page, validate_cert=False)\r\n\r\n\r\n    @config(priority=2)\r\n    def detail_page(self, response):\r\n        title = response.doc(\'h1\').text()\r\n        content = response.doc(\'div.topic_content\').html().replace(\'\"\', \'\\\\\"\')\r\n        self.add_question(title, content)  #æ’å…¥æ•°æ®åº“\r\n        return {\r\n            \"url\": response.url,\r\n            \"title\": title,\r\n            \"content\": content,\r\n        }\r\n\r\n\r\n\r\n```', 1, 'post', 'publish', 'Pyspider,Python,çˆ¬è™«', 'Python', 31, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (6, 'ã€Šç–¯ç‹‚ Java çªç ´ç¨‹åºå‘˜åŸºæœ¬åŠŸçš„ 16 è¯¾ã€‹ è¯»ä¹¦ç¬”è®°', 'Java-16-lession', 1669740067, 1669740067, '## ç¬¬ 1 è¯¾ â€”â€” æ•°ç»„ä¸å†…å­˜æ§åˆ¶\r\n\r\n### æ•°ç»„åˆå§‹åŒ–\r\n\r\næ•°ç»„åˆå§‹åŒ–ä¹‹åï¼Œè¯¥æ•°ç»„çš„é•¿åº¦æ˜¯ä¸å¯å˜çš„ï¼ˆå¯é€šè¿‡æ•°ç»„çš„ length å±æ€§è®¿é—®æ•°ç»„çš„é•¿åº¦ï¼‰ã€‚Java ä¸­çš„æ•°ç»„å¿…é¡»ç»è¿‡åˆå§‹åŒ–ï¼ˆä¸ºæ•°ç»„å¯¹è±¡çš„å…ƒç´ åˆ†é…å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸ºæ¯ä¸ªæ•°ç»„å…ƒç´ æŒ‡å®šåˆå§‹å€¼ï¼‰æ‰å¯ä½¿ç”¨ã€‚\r\n\r\næ•°ç»„åˆå§‹åŒ–çš„å½¢å¼ï¼š\r\n\r\n+ é™æ€åˆå§‹åŒ–ï¼šåˆå§‹åŒ–æ—¶ç”±ç¨‹åºå‘˜æ˜¾ç¤ºçš„æŒ‡å®šæ¯ä¸ªæ•°ç»„çš„åˆå§‹å€¼ï¼Œç³»ç»Ÿå†³å®šæ•°ç»„é•¿åº¦ã€‚\r\n+ åŠ¨æ€åˆå§‹åŒ–ï¼šåˆå§‹åŒ–æ—¶ç¨‹åºå‘˜åªæŒ‡å®šæ•°ç»„çš„é•¿åº¦ï¼Œç³»ç»Ÿä¸ºæ•°ç»„å…ƒç´ åˆ†é…åˆå§‹å€¼ã€‚\r\n\r\n<!-- more -->\r\n### ä½¿ç”¨æ•°ç»„\r\n\r\næ•°ç»„å…ƒç´ å°±æ˜¯å˜é‡ï¼šä¾‹å¦‚ int[] æ•°ç»„å…ƒç´ ç›¸å½“äº int ç±»å‹çš„å˜é‡\r\n\r\nå½“é€šè¿‡ç´¢å¼•æ¥ä½¿ç”¨æ•°ç»„å…ƒç´ æ—¶ï¼ˆè®¿é—®æ•°ç»„å…ƒç´ çš„å€¼ã€ä¸ºæ•°ç»„å…ƒç´ èµ‹å€¼ï¼‰ï¼Œå°†è¯¥æ•°ç»„å…ƒç´ å½“æˆæ™®é€šå˜é‡ä½¿ç”¨å³å¯ã€‚\r\n\r\n\r\n\r\n## ç¬¬ 2 è¯¾ â€”â€” å¯¹è±¡ä¸å†…å­˜çš„æ§åˆ¶\r\n\r\nJava å†…å­˜ç®¡ç†åˆ†ä¸ºï¼šå†…å­˜åˆ†é…å’Œå†…å­˜å›æ”¶ã€‚\r\n\r\n> + å†…å­˜åˆ†é…ï¼šåˆ›å»º Java å¯¹è±¡æ—¶ JVM ä¸ºè¯¥å¯¹è±¡åœ¨å †å†…å­˜ä¸­æ‰€åˆ†é…çš„å†…å­˜ç©ºé—´ã€‚\r\n> + å†…å­˜å›æ”¶ï¼šå½“ Java å¯¹è±¡å¤±å»å¼•ç”¨ï¼Œå˜æˆåƒåœ¾ï¼ŒJVM çš„åƒåœ¾å›æ”¶æœºåˆ¶è‡ªåŠ¨æ¸…ç†è¯¥å¯¹è±¡ï¼Œå¹¶å›æ”¶å†…å­˜\r\n\r\n### å®ä¾‹å˜é‡ å’Œ ç±»å˜é‡\r\n\r\n#### å±€éƒ¨å˜é‡\r\n\r\nç‰¹ç‚¹ï¼šä½œç”¨æ—¶é—´çŸ­ï¼Œå­˜å‚¨åœ¨æ–¹æ³•çš„æ ˆå†…å­˜ä¸­\r\n\r\nç§ç±»ï¼š\r\n\r\n+ å½¢å‚ï¼šæ–¹æ³•ç­¾åä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œç”±æ–¹æ³•è°ƒç”¨è€…è´Ÿè´£ä¸ºå…¶èµ‹å€¼ï¼Œéšæ–¹æ³•ç»“æŸè€Œæ¶ˆäº¡\r\n+ æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡ï¼šæ–¹æ³•å†…å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œå¿…é¡»åœ¨æ–¹æ³•å†…å¯¹å…¶è¿›è¡Œæ˜¾ç¤ºåˆå§‹åŒ–ï¼Œä»åˆå§‹åŒ–åå¼€å§‹ç”Ÿæ•ˆï¼Œéšæ–¹æ³•ç»“æŸè€Œæ¶ˆäº¡\r\n+ ä»£ç å—å†…çš„å±€éƒ¨å˜é‡ï¼šåœ¨ä»£ç å—ä¸­å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œå¿…é¡»åœ¨ä»£ç å—ä¸­è¿›è¡Œæ˜¾ç¤ºåˆå§‹åŒ–ï¼Œä»åˆå§‹åŒ–åå¼€å§‹ç”Ÿæ•ˆï¼Œéšä»£ç å—ç»“æŸè€Œæ¶ˆäº¡\r\n\r\n#### æˆå‘˜å˜é‡\r\n\r\nç±»ä½“å†…å®šä¹‰çš„å˜é‡ï¼Œå¦‚æœè¯¥æˆå‘˜å˜é‡æ²¡æœ‰ä½¿ç”¨ static ä¿®é¥°ï¼Œé‚£è¯¥æˆå‘˜å˜é‡åˆè¢«ç§°ä¸ºéé™æ€å˜é‡æˆ–å®ä¾‹å˜é‡ï¼Œå¦‚æœä½¿ç”¨ static ä¿®é¥°ï¼Œåˆ™è¯¥æˆå‘˜å˜é‡åˆå¯è¢«ç§°ä¸ºé™æ€å˜é‡æˆ–ç±»å˜é‡ã€‚\r\n\r\n#### å®ä¾‹å˜é‡å’Œç±»å˜é‡çš„å±æ€§\r\n\r\nä½¿ç”¨ static ä¿®é¥°çš„æˆå‘˜å˜é‡æ˜¯ç±»å˜é‡ï¼Œå±äºè¯¥ç±»æœ¬èº«ï¼Œæ²¡æœ‰ä½¿ç”¨ static ä¿®é¥°çš„æˆå‘˜å˜é‡æ˜¯å®ä¾‹å˜é‡ï¼Œå±äºè¯¥ç±»çš„å®ä¾‹ï¼Œåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæ¯ä¸€ä¸ªç±»åªå¯¹åº”ä¸€ä¸ª Class å¯¹è±¡ï¼Œä½†æ¯ä¸ªç±»å¯ä»¥åˆ›å»ºå¤šä¸ªå¯¹è±¡ã€‚\r\n\r\nç”±äºåŒä¸€ä¸ª JVM å†…çš„æ¯ä¸ªç±»åªå¯¹åº”ä¸€ä¸ª CLass å¯¹è±¡ï¼Œå› æ­¤åŒä¸€ä¸ª JVM å†…çš„ä¸€ä¸ªç±»çš„ç±»å˜é‡åªéœ€è¦ä¸€å—å†…å­˜ç©ºé—´ï¼›ä½†å¯¹äºå®ä¾‹å˜é‡è€Œè¨€ï¼Œè¯¥ç±»æ¯åˆ›å»ºä¸€æ¬¡å®ä¾‹ï¼Œå°±éœ€è¦ä¸ºè¯¥å®ä¾‹å˜é‡åˆ†é…ä¸€å—å†…å­˜ç©ºé—´ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¨‹åºä¸­åˆ›å»ºäº†å‡ ä¸ªå®ä¾‹ï¼Œå®ä¾‹å˜é‡å°±éœ€è¦å‡ å—å†…å­˜ç©ºé—´ã€‚\r\n\r\nè¿™é‡Œæˆ‘æƒ³åˆ°ä¸€é“é¢è¯•é¢˜ç›®ï¼š\r\n\r\n```java\r\npublic class A{\r\n  {\r\n    System.out.println(\"æˆ‘æ˜¯ä»£ç å—\");\r\n  }\r\n  static{\r\n    System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\");\r\n  }\r\n  public static void main(String[] args) {\r\n        A a = new A();\r\n        A a1 = new A();\r\n    }\r\n}\r\n```\r\n\r\nç»“æœï¼š\r\n\r\n```\r\næˆ‘æ˜¯é™æ€ä»£ç å—\r\næˆ‘æ˜¯ä»£ç å—\r\næˆ‘æ˜¯ä»£ç å—\r\n```\r\n\r\né™æ€ä»£ç å—åªæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œä»£ç å—æ¯åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œå°±ä¼šæ‰“å°ä¸€æ¬¡ã€‚\r\n\r\n#### å®ä¾‹å˜é‡çš„åˆå§‹åŒ–æ—¶æœº\r\n\r\nç¨‹åºå¯åœ¨3ä¸ªåœ°æ–¹å¯¹å®ä¾‹å˜é‡æ‰§è¡Œåˆå§‹åŒ–ï¼š\r\n\r\n+ å®šä¹‰å®ä¾‹å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼\r\n+ éé™æ€åˆå§‹åŒ–å—ä¸­å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼\r\n+ æ„é€ å™¨ä¸­å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼\r\n\r\nä¸Šé¢ç¬¬ä¸€ç§å’Œç¬¬äºŒç§æ–¹å¼æ¯”ç¬¬ä¸‰ç§æ–¹å¼æ›´æ—©æ‰§è¡Œï¼Œä½†ç¬¬ä¸€ã€äºŒç§æ–¹å¼çš„æ‰§è¡Œé¡ºåºä¸ä»–ä»¬åœ¨æºç¨‹åºä¸­çš„æ’åˆ—é¡ºåºç›¸åŒã€‚\r\n\r\nåŒæ ·åœ¨ä¸Šé¢é‚£ä¸ªä»£ç ä¸ŠåŠ ä¸Šä¸€ä¸ªå˜é‡ weight çš„æˆå‘˜å˜é‡ï¼Œæˆ‘ä»¬æ¥éªŒè¯ä¸‹ä¸Šé¢çš„åˆå§‹åŒ–é¡ºåºï¼š\r\n\r\n1ã€`å®šä¹‰å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼` åœ¨ `éé™æ€åˆå§‹åŒ–å—å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼` ä¹‹å:\r\n\r\n```java\r\npublic class A{\r\n    {\r\n        weight = 2.1;\r\n        System.out.println(\"æˆ‘æ˜¯ä»£ç å—\");\r\n    }\r\n    double weight = 2.0;\r\n    static{\r\n        System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\");\r\n    }\r\n    public static void main(String[] args) {\r\n        A a = new A();\r\n        A a1 = new A();\r\n        System.out.println(a.weight);\r\n    }\r\n}\r\n```\r\n\r\nç»“æœæ˜¯ï¼š\r\n\r\n```\r\næˆ‘æ˜¯é™æ€ä»£ç å—\r\næˆ‘æ˜¯ä»£ç å—\r\næˆ‘æ˜¯ä»£ç å—\r\n2.0\r\n```\r\n\r\n2ã€`å®šä¹‰å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼` åœ¨ `éé™æ€åˆå§‹åŒ–å—å¯¹å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼` ä¹‹å‰:\r\n\r\n```java\r\npublic class A{\r\n	double weight = 2.0;\r\n    {\r\n        weight = 2.1;\r\n        System.out.println(\"æˆ‘æ˜¯ä»£ç å—\");\r\n    }\r\n    static{\r\n        System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\");\r\n    }\r\n    public static void main(String[] args) {\r\n        A a = new A();\r\n        A a1 = new A();\r\n        System.out.println(a.weight);\r\n    }\r\n}\r\n```\r\n\r\nç»“æœä¸ºï¼š\r\n\r\n```\r\næˆ‘æ˜¯é™æ€ä»£ç å—\r\næˆ‘æ˜¯ä»£ç å—\r\næˆ‘æ˜¯ä»£ç å—\r\n2.1\r\n```\r\n\r\nå¤§å®¶æœ‰æ²¡æœ‰è§‰å¾—å¾ˆå¥‡æ€ªï¼Ÿ\r\n\r\næˆ‘æ¥å¥½å¥½è¯´æ¸…æ¥šä¸‹ï¼š\r\n\r\n> å®šä¹‰å®ä¾‹å˜é‡æ—¶æŒ‡å®šçš„åˆå§‹å€¼ã€åˆå§‹ä»£ç å—ä¸­ä¸ºå®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼çš„è¯­å¥çš„åœ°ä½æ˜¯å¹³ç­‰çš„ï¼Œå½“ç»è¿‡ç¼–è¯‘å™¨å¤„ç†åï¼Œä»–ä»¬éƒ½å°†ä¼šè¢«æå–åˆ°æ„é€ å™¨ä¸­ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ¡è¯­å¥ `double weight = 2.0;` å®é™…ä¸Šä¼šè¢«åˆ†æˆå¦‚ä¸‹ 2 æ¬¡æ‰§è¡Œï¼š\r\n>\r\n> + `double weight;` : åˆ›å»º Java å¯¹è±¡æ—¶ç³»ç»Ÿæ ¹æ®è¯¥è¯­å¥ä¸ºè¯¥å¯¹è±¡åˆ†é…å†…å­˜ã€‚\r\n> + `weight = 2.1;` : è¿™æ¡è¯­å¥å°†ä¼šè¢«æå–åˆ° Java ç±»çš„æ„é€ å™¨ä¸­æ‰§è¡Œã€‚\r\n\r\nåªè¯´åŸç†ï¼Œå¤§å®¶è‚¯å®šä¸æ€ä¹ˆä¿¡ï¼Œé‚£ä¹ˆè¿˜æœ‰æ‹¿å‡ºæºç æ¥ï¼Œè¿™æ ·æ‰æœ‰ä¿¡æœèƒ½åŠ›çš„å—ï¼Ÿæ˜¯ä¸ï¼Ÿ\r\n\r\nè¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨è½¯ä»¶å°†ä»£ç çš„å­—èŠ‚ç æ–‡ä»¶åç¼–è¯‘è¿‡æ¥ï¼Œçœ‹çœ‹é‡Œé¢æ˜¯æ€æ ·çš„ç»„æˆï¼Ÿ\r\n\r\nç¬¬ä¸€ä¸ªä»£ç çš„åç¼–è¯‘æºç å¦‚ä¸‹ï¼š\r\n\r\n```java\r\npublic class A\r\n{\r\n  double weight;\r\n  public A()\r\n  {\r\n    this.weight = 2.1D;\r\n    System.out.println(\"æˆ‘æ˜¯ä»£ç å—\");\r\n    this.weight = 2.0D;\r\n  }\r\n  static\r\n  {\r\n    System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\");\r\n  }\r\n  public static void main(String[] args)\r\n  {\r\n    A a = new A();\r\n    A a1 = new A();\r\n    System.out.println(a.weight);\r\n  }\r\n}\r\n```\r\n\r\nç¬¬äºŒä¸ªä»£ç åç¼–è¯‘æºç å¦‚ä¸‹ï¼š\r\n\r\n```java\r\npublic class A\r\n{\r\n  double weight;\r\n  public A()\r\n  {\r\n    this.weight = 2.0D;\r\n    this.weight = 2.1D;\r\n    System.out.println(\"æˆ‘æ˜¯ä»£ç å—\");\r\n  }\r\n  static\r\n  {\r\n    System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\");\r\n  }\r\n  public static void main(String[] args)\r\n  {\r\n    A a = new A();\r\n    A a1 = new A();\r\n    System.out.println(a.weight);\r\n  }\r\n}\r\n```\r\n\r\nè¿™ä¸‹å­æ»¡æ„äº†å§ï¼\r\n\r\né€šè¿‡åç¼–è¯‘çš„æºç å¯ä»¥çœ‹åˆ°è¯¥ç±»å®šä¹‰çš„ weight å®ä¾‹å˜é‡æ—¶ä¸å†æœ‰åˆå§‹å€¼ï¼Œä¸º weight æŒ‡å®šåˆå§‹å€¼çš„ä»£ç ä¹Ÿè¢«æåˆ°äº†æ„é€ å™¨ä¸­å»äº†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥å‘ç°ä¹‹å‰è§„åˆ™ä¹Ÿæ˜¯æ»¡è¶³çš„ã€‚\r\n\r\nä»–ä»¬çš„èµ‹å€¼è¯­å¥éƒ½è¢«åˆå¹¶åˆ°æ„é€ å™¨ä¸­ï¼Œåœ¨åˆå¹¶è¿‡ç¨‹ä¸­ï¼Œå®šä¹‰çš„å˜é‡è¯­å¥è½¬æ¢å¾—åˆ°çš„èµ‹å€¼è¯­å¥ï¼Œåˆå§‹ä»£ç å—ä¸­çš„è¯­å¥éƒ½è½¬æ¢å¾—åˆ°çš„èµ‹å€¼è¯­å¥ï¼Œæ€»æ˜¯ä½äºæ„é€ å™¨çš„æ‰€æœ‰è¯­å¥ä¹‹å‰ï¼Œåˆå¹¶åï¼Œä¸¤ç§èµ‹å€¼è¯­å¥çš„é¡ºåºä¹Ÿä¿æŒäº†å®ƒä»¬åœ¨ Java æºä»£ç ä¸­çš„é¡ºåºã€‚\r\n\r\nå¤§è‡´è¿‡ç¨‹åº”è¯¥äº†è§£äº†å§ï¼Ÿå¦‚æœè¿˜ä¸æ€ä¹ˆæ¸…æ¥šçš„ï¼Œå»ºè®®è¿˜æ˜¯è‡ªå·±å°†æ€ä¸ªè¿‡ç¨‹åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šæ“ä½œä¸€éï¼Œæ¯•ç«Ÿå…‰çœ‹ä¸ç»ƒå‡æŠŠå¼ã€‚\r\n\r\n#### ç±»å˜é‡çš„åˆå§‹åŒ–æ—¶æœº\r\n\r\nJVM å¯¹æ¯ä¸€ä¸ª Java ç±»åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œå› æ­¤ Java ç¨‹åºæ¯è¿è¡Œä¸€æ¬¡ï¼Œç³»ç»Ÿåªä¸ºç±»å˜é‡åˆ†é…ä¸€æ¬¡å†…å­˜ç©ºé—´ï¼Œæ‰§è¡Œä¸€æ¬¡åˆå§‹åŒ–ã€‚ç¨‹åºå¯åœ¨ä¸¤ä¸ªåœ°æ–¹å¯¹ç±»å˜é‡æ‰§è¡Œåˆå§‹åŒ–ï¼š\r\n\r\n+ å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼\r\n+ é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼\r\n\r\nè¿™ä¸¤ç§æ–¹å¼çš„æ‰§è¡Œé¡ºåºä¸å®ƒä»¬åœ¨æºä»£ç ä¸­çš„æ’åˆ—é¡ºåºç›¸åŒã€‚\r\n\r\nè¿˜æ˜¯ç”¨ä¸Šé¢é‚£ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬åœ¨å…¶åŸºç¡€ä¸ŠåŠ ä¸ªè¢« static ä¿®é¥°çš„å˜é‡ heightï¼š\r\n\r\n1ã€`å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼` åœ¨ `é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼` ä¹‹åï¼š\r\n\r\n```java\r\npublic class A{\r\n    double weight = 2.0;\r\n    {\r\n        weight = 2.1;\r\n        System.out.println(\"æˆ‘æ˜¯ä»£ç å—\");\r\n    }\r\n    static{\r\n        height = 10.1;\r\n        System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\");\r\n    }\r\n    static double height = 10.0;\r\n    public static void main(String[] args) {\r\n        A a = new A();\r\n        A a1 = new A();\r\n        System.out.println(a.weight);\r\n        System.out.println(height);\r\n    }\r\n}\r\n```\r\n\r\nè¿è¡Œç»“æœï¼š\r\n\r\n```\r\næˆ‘æ˜¯é™æ€ä»£ç å—\r\næˆ‘æ˜¯ä»£ç å—\r\næˆ‘æ˜¯ä»£ç å—\r\n2.1\r\n10.0\r\n```\r\n\r\n2ã€`å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼` åœ¨ `é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼` ä¹‹å‰ï¼š\r\n\r\n```java\r\npublic class A{\r\n    static double height = 10.0;\r\n    double weight = 2.0;\r\n    {\r\n        weight = 2.1;\r\n        System.out.println(\"æˆ‘æ˜¯ä»£ç å—\");\r\n    }\r\n    static{\r\n        height = 10.1;\r\n        System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\");\r\n    }\r\n    public static void main(String[] args) {\r\n        A a = new A();\r\n        A a1 = new A();\r\n        System.out.println(a.weight);\r\n        System.out.println(height);\r\n    }\r\n}\r\n```\r\n\r\nè¿è¡Œç»“æœï¼š\r\n\r\n```\r\næˆ‘æ˜¯é™æ€ä»£ç å—\r\næˆ‘æ˜¯ä»£ç å—\r\næˆ‘æ˜¯ä»£ç å—\r\n2.1\r\n10.1\r\n```\r\n\r\nå…¶è¿è¡Œç»“æœæ­£å¦‚æˆ‘ä»¬é¢„æ–™ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯çœ‹çœ‹åç¼–è¯‘åçš„ä»£ç å§ï¼\r\n\r\nç¬¬ä¸€ç§æƒ…å†µä¸‹åç¼–è¯‘çš„ä»£ç ï¼š\r\n\r\n```java\r\npublic class A\r\n{\r\n  double weight;\r\n  public A()\r\n  {\r\n    this.weight = 2.0D;\r\n\r\n    this.weight = 2.1D;\r\n    System.out.println(\"æˆ‘æ˜¯ä»£ç å—\");\r\n  }\r\n  static\r\n  {\r\n    System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\");\r\n  }\r\n  static double height = 10.0D;\r\n  public static void main(String[] args)\r\n  {\r\n    A a = new A();\r\n    A a1 = new A();\r\n    System.out.println(a.weight);\r\n    System.out.println(height);\r\n  }\r\n}\r\n```\r\n\r\nç¬¬äºŒç§æƒ…å†µä¸‹åç¼–è¯‘çš„ä»£ç ï¼š\r\n\r\n```java\r\npublic class A\r\n{\r\n  static double height = 10.0D;\r\n  double weight;\r\n  public A()\r\n  {\r\n    this.weight = 2.0D;\r\n\r\n    this.weight = 2.1D;\r\n    System.out.println(\"æˆ‘æ˜¯ä»£ç å—\");\r\n  }\r\n  static\r\n  {\r\n    height = 10.1D;\r\n    System.out.println(\"æˆ‘æ˜¯é™æ€ä»£ç å—\");\r\n  }\r\n  public static void main(String[] args)\r\n  {\r\n    A a = new A();\r\n    A a1 = new A();\r\n    System.out.println(a.weight);\r\n    System.out.println(height);\r\n  }\r\n}\r\n```\r\n\r\né€šè¿‡åç¼–è¯‘æºç ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€ç§æƒ…å†µä¸‹(`å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼` åœ¨ `é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼` ä¹‹å):\r\n\r\næˆ‘ä»¬åœ¨ **é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼** å·²ç»ä¸å­˜åœ¨äº†ï¼Œåªæœ‰ä¸€ä¸ªç±»å˜é‡æŒ‡å®šçš„åˆå§‹å€¼ `static double height = 10.0D;` , è€Œåœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼ˆ`å®šä¹‰ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼` åœ¨ `é™æ€åˆå§‹åŒ–ä»£ç å—ä¸­å¯¹ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼` ä¹‹å‰ï¼‰å’Œä¹‹å‰çš„æºä»£ç é¡ºåºæ˜¯ä¸€æ ·çš„ï¼Œæ²¡å•¥åŒºåˆ«ã€‚\r\n\r\nä¸Šé¢çš„ä»£ç ä¸­å……åˆ†çš„å±•ç¤ºäº†ç±»å˜é‡çš„ä¸¤ç§åˆå§‹åŒ–æ–¹å¼ ï¼šæ¯æ¬¡è¿è¡Œè¯¥ç¨‹åºæ—¶ï¼Œç³»ç»Ÿä¼šä¸º A ç±»æ‰§è¡Œåˆå§‹åŒ–ï¼Œå…ˆä¸ºæ‰€æœ‰ç±»å˜é‡åˆ†é…å†…å­˜ç©ºé—´ï¼Œå†æŒ‰ç…§æºä»£ç ä¸­çš„æ’åˆ—é¡ºåºæ‰§è¡Œé™æ€åˆå§‹ä»£ç å—ä¸­æ‰€æŒ‡å®šçš„åˆå§‹å€¼å’Œå®šä¹‰ç±»å˜é‡æ—¶æ‰€æŒ‡å®šçš„åˆå§‹å€¼ã€‚\r\n\r\n###  çˆ¶ç±»æ„é€ å™¨\r\n\r\nå½“åˆ›å»ºä»»ä½• Java å¯¹è±¡æ—¶ï¼Œç¨‹åºæ€»ä¼šå…ˆä¾æ¬¡è°ƒç”¨æ¯ä¸ªçˆ¶ç±»éé™æ€åˆå§‹åŒ–ä»£ç å—ã€çˆ¶ç±»æ„é€ å™¨ï¼ˆæ€»æ˜¯ä» Object å¼€å§‹ï¼‰æ‰§è¡Œåˆå§‹åŒ–ï¼Œæœ€åæ‰è°ƒç”¨æœ¬ç±»çš„éé™æ€åˆå§‹åŒ–ä»£ç å—ã€æ„é€ å™¨æ‰§è¡Œåˆå§‹åŒ–ã€‚\r\n\r\n#### éšå¼è°ƒç”¨å’Œæ˜¾ç¤ºè°ƒç”¨\r\n\r\nå½“è°ƒç”¨æŸä¸ªç±»çš„æ„é€ å™¨æ¥åˆ›å»º Java å¯¹è±¡æ—¶ï¼Œç³»ç»Ÿæ€»ä¼šå…ˆè°ƒç”¨çˆ¶ç±»çš„éé™æ€åˆå§‹åŒ–ä»£ç å—è¿›è¡Œåˆå§‹åŒ–ã€‚è¿™ä¸ªè°ƒç”¨æ˜¯éšå¼æ‰§è¡Œçš„ï¼Œè€Œä¸”çˆ¶ç±»çš„é™æ€åˆå§‹åŒ–ä»£ç å—æ€»æ˜¯ä¼šè¢«æ‰§è¡Œã€‚æ¥ç€ä¼šè°ƒç”¨çˆ¶ç±»çš„ä¸€ä¸ªæˆ–å¤šä¸ªæ„é€ å™¨æ‰§è¡Œåˆå§‹åŒ–ï¼Œè¿™ä¸ªè°ƒç”¨æ—¢å¯ä»¥æ˜¯é€šè¿‡ super è¿›è¡Œæ˜¾ç¤ºè°ƒç”¨ï¼Œä¹Ÿå¯ä»¥æ˜¯éšå¼è°ƒç”¨ã€‚\r\n\r\nå½“æ‰€æœ‰çˆ¶ç±»çš„éé™æ€åˆå§‹ä»£ç å—ã€æ„é€ å™¨ä¾æ¬¡è°ƒç”¨å®Œæˆåï¼Œç³»ç»Ÿè°ƒç”¨æœ¬ç±»çš„éé™æ€ä»£ç å—ã€æ„é€ å™¨æ‰§è¡Œåˆå§‹åŒ–ï¼Œæœ€åè¿”å›æœ¬ç±»çš„å®ä¾‹ã€‚è‡³äºè°ƒç”¨çˆ¶ç±»çš„å“ªä¸ªæ„é€ å™¨æ‰§è¡Œåˆå§‹åŒ–ï¼Œåˆ†ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š\r\n\r\n+ å­ç±»æ„é€ å™¨æ‰§è¡Œä½“çš„ç¬¬ä¸€è¡Œä»£ç ä½¿ç”¨ super æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œç³»ç»Ÿå°†æ ¹æ® super è°ƒç”¨é‡Œä¼ å…¥çš„å®å‚åˆ—è¡¨æ¥ç¡®å®šè°ƒç”¨çˆ¶ç±»çš„å“ªä¸ªæ„é€ å™¨ï¼›\r\n+ å­ç±»æ„é€ å™¨æ‰§è¡Œä½“çš„ç¬¬ä¸€è¡Œä»£ç ä½¿ç”¨ this æ˜¾å¼è°ƒç”¨æœ¬ç±»ä¸­çš„é‡è½½æ„é€ å™¨ï¼Œç³»ç»Ÿå°†æ ¹æ® this è°ƒç”¨é‡Œä¼ å…¥çš„å®å‚åˆ—è¡¨æ¥ç¡®å®šå¥”é›·çš„å¦ä¸€ä¸ªæ„é€ å™¨ï¼ˆæ‰§è¡Œæœ¬ç±»ä¸­å¦ä¸€ä¸ªæ„é€ å™¨æ—¶å³è¿›å…¥ç¬¬ä¸€ç§æƒ…å†µï¼‰ï¼›\r\n+ å­ç±»æ„é€ å™¨ä¸­æ—¢æ²¡æœ‰ super è°ƒç”¨ï¼Œä¹Ÿæ²¡æœ‰ this è°ƒç”¨ï¼Œç³»ç»Ÿå°†ä¼šåœ¨æ‰§è¡Œå­ç±»æ„é€ å™¨ä¹‹å‰ï¼Œéšå¼è°ƒç”¨çˆ¶ç±»æ— å‚æ„é€ å™¨ã€‚\r\n\r\næ³¨ï¼šsuper å’Œ this å¿…é¡»åœ¨æ„é€ å™¨çš„ç¬¬ä¸€è¡Œï¼Œä¸”ä¸èƒ½åŒæ—¶å­˜åœ¨ã€‚\r\n\r\næ¨èä¸€ç¯‡åšå®¢ï¼š[Javaåˆå§‹åŒ–é¡ºåº](http://www.cnblogs.com/miniwiki/archive/2011/03/25/1995615.html) æ–‡ç« ä»æ— ç»§æ‰¿å’Œç»§æ‰¿ä¸¤ç§æƒ…å†µä¸‹åˆ†æäº† Java åˆå§‹åŒ–çš„é¡ºåºã€‚\r\n\r\n\r\n#### è®¿é—®å­ç±»å¯¹è±¡çš„å®ä¾‹å˜é‡\r\n\r\n\r\n\r\n#### è°ƒç”¨è¢«å­ç±»é‡å†™çš„æ–¹æ³•\r\n\r\n\r\n\r\n### çˆ¶å­å®ä¾‹çš„å†…å­˜æ§åˆ¶\r\n\r\n#### ç»§æ‰¿æˆå‘˜å˜é‡å’Œç»§æ‰¿æ–¹æ³•çš„åŒºåˆ«\r\n\r\næ–¹æ³•çš„è¡Œä¸ºæ€»æ˜¯è¡¨ç°å‡ºå®ƒä»¬å®é™…ç±»å‹çš„è¡Œä¸ºï¼›å®ä¾‹å˜é‡çš„å€¼æ€»æ˜¯è¡¨ç°å‡ºå£°æ˜è¿™äº›å˜é‡æ‰€ç”¨ç±»å‹çš„è¡Œä¸ºã€‚\r\n\r\n#### å†…å­˜ä¸­çš„å­ç±»å®ä¾‹\r\n\r\n\r\n\r\n#### çˆ¶ã€å­ç±»çš„ç±»å˜é‡\r\n\r\n\r\n\r\n### final ä¿®é¥°ç¬¦\r\n\r\nfinal å¯ä»¥ä¿®é¥°å˜é‡ã€æ–¹æ³•ã€ç±»ã€‚\r\n\r\n+ ä¿®é¥°å˜é‡ï¼Œå˜é‡è¢«èµ‹åˆå§‹å€¼ä¹‹åï¼Œä¸èƒ½å¤Ÿå¯¹ä»–åœ¨è¿›è¡Œä¿®æ”¹\r\n+ ä¿®é¥°æ–¹æ³•ï¼Œä¸èƒ½å¤Ÿè¢«é‡å†™\r\n+ ä¿®é¥°ç±»ï¼Œä¸èƒ½å¤Ÿè¢«ç»§æ‰¿\r\n\r\nfinal ä¿®é¥°çš„å®ä¾‹å˜é‡åªèƒ½åœ¨å¦‚ä¸‹ä½ç½®æŒ‡å®šåˆå§‹å€¼ï¼š\r\n\r\n+ å®šä¹‰ final å®ä¾‹å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼\r\n+ åœ¨éé™æ€ä»£ç å—ä¸­ä¸º final å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼\r\n+ åœ¨æ„é€ å™¨ä¸­ä¸º final å®ä¾‹å˜é‡æŒ‡å®šåˆå§‹å€¼\r\n\r\nfinal ä¿®é¥°çš„ç±»å˜é‡åªèƒ½åœ¨å¦‚ä¸‹ä½ç½®æŒ‡å®šåˆå§‹å€¼ï¼š\r\n\r\n+ å®šä¹‰ final ç±»å˜é‡æ—¶æŒ‡å®šåˆå§‹å€¼\r\n+ åœ¨é™æ€ä»£ç å—ä¸­ä¸º final ç±»å˜é‡æŒ‡å®šåˆå§‹å€¼\r\n\r\n\r\n\r\n## ç¬¬ 3 è¯¾ â€”â€” å¸¸è§ Java é›†åˆçš„å®ç°ç»†èŠ‚\r\n\r\nJava é›†åˆæ¡†æ¶ç±»å›¾ï¼š\r\n\r\n![](http://ohfk1r827.bkt.clouddn.com/Java%E9%9B%86%E5%90%88%E6%A1%86%E6%9E%B6%E7%B1%BB%E5%9B%BE.jpg)\r\n\r\n### Set å’Œ Map\r\n\r\nSet ä»£è¡¨ä¸€ç§é›†åˆå…ƒç´ æ— åºã€é›†åˆå…ƒç´ ä¸å¯é‡å¤çš„é›†åˆï¼ŒMap åˆ™ä»£è¡¨ä¸€ç§ç”±å¤šä¸ª key-value å¯¹ç»„åˆçš„é›†åˆï¼ŒMap é›†åˆç±»ä¼¼äºä¼ ç»Ÿçš„å…³è”æ•°ç»„ã€‚\r\n\r\n#### Set å’Œ Map çš„å…³ç³»\r\n\r\n1ã€Map é›†åˆä¸­çš„ key ä¸èƒ½é‡å¤ä¸”æ²¡æœ‰é¡ºåºã€‚å°†è¿™äº› key ç»„åˆèµ·æ¥å°±æ˜¯ä¸€ä¸ª Set é›†åˆã€‚æ‰€ä»¥æœ‰ä¸€ä¸ª `Set<k> keySet()` æ–¹æ³•æ¥è¿”å›æ‰€æœ‰ key ç»„æˆçš„ Set é›†åˆã€‚\r\n\r\n2ã€Set ä¹Ÿå¯ä»¥è½¬æ¢æˆ Mapã€‚ï¼ˆåœ¨ Set ä¸­å°† æ¯ä¸€å¯¹ key å’Œ value å­˜æ”¾åœ¨ä¸€èµ·ï¼‰\r\n\r\n#### HashMap å’Œ HashSet\r\n\r\nHashSetï¼šç³»ç»Ÿé‡‡ç”¨ Hash ç®—æ³•å†³å®šé›†åˆå…ƒç´ çš„å­˜å‚¨ä½ç½®ã€‚ï¼ˆåŸºäº HashMap å®ç°çš„ï¼‰\r\n\r\nHashMapï¼šç³»ç»Ÿå°† value å½“æˆ key çš„é™„å±ï¼Œç³»ç»Ÿæ ¹æ® Hash ç®—æ³•å†³å®š key çš„å­˜å‚¨ä½ç½®ã€‚\r\n\r\nHashSet çš„ç»å¤§éƒ¨åˆ†æ–¹æ³•éƒ½æ˜¯é€šè¿‡è°ƒç”¨ HashMap çš„æ–¹æ³•å®ç°çš„ï¼Œå› æ­¤ HashSet å’Œ HashMap ä¸¤ä¸ªé›†åˆåœ¨å®ç°æœ¬è´¨ä¸Šæ˜¯ç›¸åŒçš„ã€‚\r\n\r\n#### TreeMap å’Œ TreeSet\r\n\r\nTreeSet åº•å±‚ä½¿ç”¨ TreeMap æ¥åŒ…å« Set é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚\r\n\r\nTreeMap é‡‡ç”¨çš„æ˜¯ä¸€ç§â€œçº¢é»‘æ ‘â€çš„æ’åºäºŒå‰æ ‘æ¥ä¿å­˜ Map ä¸­æ¯ä¸ª Entry â€”â€” æ¯ä¸ª Entry éƒ½è¢«å½“æˆ â€œçº¢é»‘æ ‘â€ çš„ä¸€ä¸ªèŠ‚ç‚¹å¯¹å¾…ã€‚\r\n\r\n### Map å’Œ List\r\n\r\n#### Map çš„ values() æ–¹æ³•\r\n\r\nä¸ç®¡æ˜¯ HashMap è¿˜æ˜¯ TreeMap ï¼Œå®ƒä»¬çš„ values() æ–¹æ³•éƒ½å¯ä»¥è¿”å›å…¶æ‰€æœ‰ value ç»„æˆçš„ Collection é›†åˆï¼Œå…¶å®æ˜¯ä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„ Collection é›†åˆï¼Œå½“ç¨‹åºéå† Collection é›†åˆæ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯éå† Map å¯¹è±¡çš„ valueã€‚\r\n\r\nHashMap å’Œ TreeMap çš„ values() æ–¹æ³•å¹¶æœªæŠŠ Map ä¸­çš„ values é‡æ–°ç»„åˆæˆä¸€ä¸ªåŒ…å«å…ƒç´ çš„é›†åˆå¯¹è±¡ï¼Œè¿™æ ·å°±å¯ä»¥é™ä½ç³»ç»Ÿå†…å­˜å¼€é”€ã€‚\r\n\r\n#### Map å’Œ List çš„å…³ç³»\r\n\r\nåº•å±‚å®ç°å¾ˆç›¸ä¼¼ï¼›ç”¨æ³•ä¸Šå¾ˆç›¸ä¼¼ã€‚\r\n\r\n+ Map æ¥å£æä¾› get(K key) æ–¹æ³•å…è®¸ Map å¯¹è±¡æ ¹æ® key æ¥å–å¾— valueï¼›\r\n+ List æ¥å£æä¾›äº† get(int index) æ–¹æ³•å…è®¸ List å¯¹è±¡æ ¹æ®å…ƒç´ ç´¢å¼•æ¥å–å¾— valueï¼›\r\n\r\n### ArrayList å’Œ LinkedList\r\n\r\nList é›†åˆçš„å®ç°ç±»ï¼Œä¸»è¦æœ‰ ArrayList ã€Vector å’Œ LinkedListã€‚\r\n\r\n+ **ArrayListÂ **æ˜¯ä¸€ä¸ªå¯æ”¹å˜å¤§å°çš„æ•°ç»„.å½“æ›´å¤šçš„å…ƒç´ åŠ å…¥åˆ° ArrayList ä¸­æ—¶, å…¶å¤§å°å°†ä¼šåŠ¨æ€åœ°å¢é•¿.  å†…éƒ¨çš„å…ƒç´ å¯ä»¥ç›´æ¥é€šè¿‡ get ä¸ set æ–¹æ³•è¿›è¡Œè®¿é—®, å› ä¸º ArrayList æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ•°ç»„.\r\n+ **LinkedListÂ **æ˜¯ä¸€ä¸ªåŒé“¾è¡¨, åœ¨æ·»åŠ å’Œåˆ é™¤å…ƒç´ æ—¶å…·æœ‰æ¯” ArrayList æ›´å¥½çš„æ€§èƒ½. ä½†åœ¨ get ä¸ set æ–¹é¢å¼±äºArrayList. å½“ç„¶, è¿™äº›å¯¹æ¯”éƒ½æ˜¯æŒ‡æ•°æ®é‡å¾ˆå¤§æˆ–è€…æ“ä½œå¾ˆé¢‘ç¹çš„æƒ…å†µä¸‹çš„å¯¹æ¯”, å¦‚æœæ•°æ®å’Œè¿ç®—é‡å¾ˆå°,é‚£ä¹ˆå¯¹æ¯”å°†å¤±å»æ„ä¹‰.\r\n+ **VectorÂ **å’Œ ArrayList ç±»ä¼¼, ä½†å±äºå¼ºåŒæ­¥ç±»ã€‚å¦‚æœä½ çš„ç¨‹åºæœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„(thread-safe,æ²¡æœ‰åœ¨å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«åŒä¸€ä¸ªé›†åˆ/å¯¹è±¡),é‚£ä¹ˆä½¿ç”¨ ArrayList æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚\r\n\r\nVector å’Œ ArrayList åœ¨æ›´å¤šå…ƒç´ æ·»åŠ è¿›æ¥æ—¶ä¼šè¯·æ±‚æ›´å¤§çš„ç©ºé—´ã€‚Vector æ¯æ¬¡è¯·æ±‚å…¶å¤§å°çš„åŒå€ç©ºé—´ï¼Œè€Œ ArrayListæ¯æ¬¡å¯¹ size å¢é•¿ 50%.\r\n\r\nè€ŒÂ LinkedListÂ è¿˜å®ç°äº†Â QueueÂ æ¥å£, è¯¥æ¥å£æ¯” List æä¾›äº†æ›´å¤šçš„æ–¹æ³•,åŒ…æ‹¬ offer(), peek(), poll()ç­‰.\r\n\r\næ³¨æ„: é»˜è®¤æƒ…å†µä¸‹ ArrayList çš„åˆå§‹å®¹é‡éå¸¸å°, æ‰€ä»¥å¦‚æœå¯ä»¥é¢„ä¼°æ•°æ®é‡çš„è¯, åˆ†é…ä¸€ä¸ªè¾ƒå¤§çš„åˆå§‹å€¼å±äºæœ€ä½³å®è·µ, è¿™æ ·å¯ä»¥å‡å°‘è°ƒæ•´å¤§å°çš„å¼€é”€ã€‚\r\n\r\nArrayListä¸LinkedListæ€§èƒ½å¯¹æ¯”\r\n\r\næ—¶é—´å¤æ‚åº¦å¯¹æ¯”å¦‚ä¸‹:\r\n\r\n![](http://www.programcreek.com/wp-content/uploads/2013/03/arraylist-vs-linkedlist-complexity.png)\r\n\r\nLinkedList æ›´é€‚ç”¨äº:\r\n\r\n+ æ²¡æœ‰å¤§è§„æ¨¡çš„éšæœºè¯»å–\r\n+ å¤§é‡çš„å¢åŠ /åˆ é™¤æ“ä½œ\r\n\r\n### Iterator è¿­ä»£å™¨\r\n\r\næ˜¯ä¸€ä¸ªè¿­ä»£å™¨æ¥å£ï¼Œä¸“é—¨ç”¨äºè¿­ä»£å„ç§ Collection é›†åˆï¼ŒåŒ…æ‹¬ Set  é›†åˆå’Œ List é›†åˆã€‚\r\n\r\n\r\n\r\n## ç¬¬ 4 è¯¾ â€”â€” Java çš„å†…å­˜å›æ”¶\r\n\r\n### Java å¼•ç”¨çš„ç§ç±»\r\n\r\n#### å¯¹è±¡åœ¨å†…å­˜ä¸­çš„çŠ¶æ€\r\n\r\nJVM åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œæ˜¯å¦å›æ”¶ä¸€ä¸ªå¯¹è±¡çš„æ ‡å‡†åœ¨äºï¼šæ˜¯å¦è¿˜æœ‰å¼•ç”¨å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼Ÿåªè¦æœ‰å¼•ç”¨å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶å°±ä¸ä¼šå›æ”¶å®ƒã€‚\r\n\r\nJava è¯­è¨€å¯¹å¯¹è±¡çš„å¼•ç”¨æœ‰ï¼š\r\n\r\n+ å¼ºå¼•ç”¨\r\n+ è½¯å¼•ç”¨\r\n+ å¼±å¼•ç”¨\r\n+ è™šå¼•ç”¨\r\n\r\n#### å¼ºå¼•ç”¨\r\n\r\nç¨‹åºåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶æŠŠè¿™ä¸ªå¯¹è±¡èµ‹ç»™ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œè¿™ä¸ªå¼•ç”¨å˜é‡å°±æ˜¯å¼ºå¼•ç”¨ã€‚å½“ä¸€ä¸ªå¯¹è±¡è¢«ä¸€ä¸ªæˆ–è€…ä¸€ä¸ªä»¥ä¸Šçš„å¼ºå¼•ç”¨å˜é‡æ‰€å¼•ç”¨æ—¶ï¼Œå®ƒå¤„äºå¯è¾¾çŠ¶æ€ï¼Œå®ƒæ˜¯ä¸ä¼šè¢«ç³»ç»Ÿçš„åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚\r\n\r\n#### è½¯å¼•ç”¨\r\n\r\nè½¯å¼•ç”¨éœ€è¦é€šè¿‡ SoftReference ç±»æ¥å®ç°ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åªå…·æœ‰è½¯å¼•ç”¨æ—¶ï¼Œå®ƒæœ‰å¯èƒ½ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚å¯¹äºåªæœ‰è½¯å¼•ç”¨çš„å¯¹è±¡è€Œè¨€ï¼Œå½“ç³»ç»Ÿå†…å­˜ç©ºé—´è¶³å¤Ÿæ—¶ï¼Œå®ƒä¸ä¼šè¢«ç³»ç»Ÿå›æ”¶ï¼Œç¨‹åºä¹Ÿå¯ä½¿ç”¨è¯¥å¯¹è±¡ï¼›å½“ç³»ç»Ÿå†…å­˜ç©ºé—´ä¸è¶³æ—¶ï¼Œç³»ç»Ÿå°†ä¼šå›æ”¶å®ƒã€‚\r\n\r\n#### å¼±å¼•ç”¨\r\n\r\nå¼±å¼•ç”¨å’Œè½¯å¼•ç”¨æœ‰ç‚¹ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå¼±å¼•ç”¨æ‰€å¼•ç”¨å¯¹è±¡çš„ç”Ÿå­˜æœŸæ›´çŸ­ã€‚\r\n\r\n#### è™šå¼•ç”¨\r\n\r\nè™šå¼•ç”¨ä¸»è¦ç”¨äºè·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶çš„çŠ¶æ€ï¼Œè™šå¼•ç”¨ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œè™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ—è”åˆä½¿ç”¨ã€‚\r\n\r\n### Java çš„å†…å­˜æ³„æ¼\r\n\r\nArrayList.java ä¸­çš„ remove æ–¹æ³•\r\n\r\n```java\r\npublic E remove(int index) {\r\n        rangeCheck(index);\r\n        modCount++;\r\n        E oldValue = elementData(index);\r\n        int numMoved = size - index - 1;\r\n        if (numMoved > 0)\r\n            System.arraycopy(elementData, index+1, elementData, index,\r\n                             numMoved);\r\n        elementData[--size] = null; // clear to let GC do its work\r\n        return oldValue;\r\n    }\r\n```\r\n\r\nå…¶ä¸­ `elementData[--size] = null; // clear to let GC do its work` è¯­å¥æ˜¯æ¸…é™¤æ•°ç»„å…ƒç´ çš„å¼•ç”¨ï¼Œé¿å…å†…å­˜çš„æ³„æ¼ï¼Œå¦‚æœæ²¡æœ‰è¿™å¥çš„è¯ï¼Œé‚£ä¹ˆå°±æ˜¯åªæœ‰ä¸¤ä¸ªä½œç”¨ï¼š\r\n\r\n+ ä¿®é¥° Stack çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯å°†å€¼å‡ 1ï¼›\r\n+ è¿”å›ç´¢å¼•ä¸º size -1 çš„å€¼ã€‚\r\n\r\n### åƒåœ¾å›æ”¶æœºåˆ¶\r\n\r\n+ è·Ÿè¸ªå¹¶ç›‘æ§æ¯ä¸ª Java å¯¹è±¡ï¼Œå½“æŸä¸ªå¯¹è±¡å¤„äºä¸å¯è¾¾çŠ¶æ€æ—¶ï¼Œå›æ”¶è¯¥å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ã€‚\r\n+ æ¸…ç†å†…å­˜åˆ†é…ï¼Œå›æ”¶è¿‡ç¨‹ä¸­äº§ç”Ÿçš„å†…å­˜ç¢ç‰‡ã€‚\r\n\r\n#### åƒåœ¾å›æ”¶çš„åŸºæœ¬ç®—æ³•\r\n\r\nå¯¹äºä¸€ä¸ªåƒåœ¾å›æ”¶å™¨çš„è®¾è®¡ç®—æ³•æ¥è¯´ï¼Œå¤§æ¦‚æœ‰å¦‚ä¸‹å‡ ä¸ªè®¾è®¡ï¼š\r\n\r\n+ ä¸²è¡Œå›æ”¶ å’Œ å¹¶è¡Œå›æ”¶\r\n\r\n  > ä¸²è¡Œå›æ”¶ï¼šä¸ç®¡ç³»ç»Ÿæœ‰å¤šå°‘ä¸ª CPUï¼Œå§‹ç»ˆä½¿ç”¨ä¸€ä¸ª CPU æ¥æ‰§è¡Œåƒåœ¾å›æ”¶æ“ä½œ\r\n  >\r\n  > å¹¶è¡Œå›æ”¶ï¼šæŠŠæ•´ä¸ªå›æ”¶å·¥ä½œæ‹†åˆ†æˆå¤šéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†ç”±ä¸€ä¸ª CPU è´Ÿè´£ï¼Œä»è€Œè®©å¤šä¸ª CPU å¹¶è¡Œå›æ”¶\r\n\r\n+ å¹¶å‘æ‰§è¡Œ å’Œ åº”ç”¨ç¨‹åºåœæ­¢\r\n\r\n+ å‹ç¼© å’Œ ä¸å‹ç¼© å’Œ å¤åˆ¶\r\n\r\n  > + å¤åˆ¶ï¼šå°†å †å†…åˆ†æˆä¸¤ä¸ªç›¸åŒçš„ç©ºé—´ï¼Œä»æ ¹å¼€å§‹è®¿é—®æ¯ä¸€ä¸ªå…³è”çš„å¯è¾¾å¯¹è±¡ï¼Œå°†ç©ºé—´Açš„å¯è¾¾å¯¹è±¡å…¨éƒ¨å¤åˆ¶åˆ°ç©ºé—´Bï¼Œç„¶åä¸€æ¬¡æ€§å›æ”¶æ•´ä¸ªç©ºé—´Aã€‚\r\n  > + æ ‡è®°æ¸…é™¤ï¼šä¹Ÿå°±æ˜¯ ä¸å‹ç¼© çš„å›æ”¶æ–¹å¼ã€‚åƒåœ¾å›æ”¶å™¨å…ˆä»æ ¹å¼€å§‹è®¿é—®æ‰€æœ‰å¯è¾¾å¯¹è±¡ï¼Œå°†å®ƒä»¬æ ‡è®°ä¸ºå¯è¾¾çŠ¶æ€ï¼Œç„¶åå†éå†ä¸€æ¬¡æ•´ä¸ªå†…å­˜åŒºåŸŸï¼ŒæŠŠæ‰€æœ‰æ²¡æœ‰æ ‡è®°ä¸ºå¯è¾¾çš„å¯¹è±¡è¿›è¡Œå›æ”¶å¤„ç†ã€‚\r\n  > + æ ‡è®°å‹ç¼©ï¼šè¿™æ˜¯å‹ç¼©æ–¹å¼ï¼Œè¿™ç§æ–¹å¼å……åˆ†åˆ©ç”¨ä¸Šè¿°ä¸¤ç§ç®—æ³•çš„ä¼˜ç‚¹ï¼Œåƒåœ¾å›æ”¶å™¨å…ˆä»æ ¹å¼€å§‹è®¿é—®æ‰€æœ‰å¯è¾¾å¯¹è±¡ï¼Œå°†ä»–ä»¬æ ‡è®°ä¸ºå¯è¾¾çŠ¶æ€ï¼Œæ¥ä¸‹æ¥åƒåœ¾å›æ”¶å™¨ä¼šå°†è¿™äº›æ´»åŠ¨å¯¹è±¡æ¬è¿åœ¨ä¸€èµ·ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšå†…å­˜å‹ç¼©ï¼Œç„¶ååƒåœ¾å›æ”¶æœºåˆ¶å†æ¬¡å›æ”¶é‚£äº›ä¸å¯è¾¾å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œè¿™æ ·å°±é¿å…äº†å›æ”¶äº§ç”Ÿçš„å†…å­˜ç¢ç‰‡ã€‚\r\n\r\n#### å †å†…å­˜çš„åˆ†ä»£å›æ”¶\r\n\r\n1ã€Young ä»£\r\n\r\n2ã€Old ä»£\r\n\r\n3ã€Permanent ä»£\r\n\r\n### å†…å­˜ç®¡ç†å°æŠ€å·§\r\n\r\n+ å°½é‡ä½¿ç”¨ç›´æ¥é‡\r\n+ ä½¿ç”¨ StringBuilder å’Œ StringBuffer è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥\r\n+ å°½æ—©é‡Šæ”¾æ— ç”¨å¯¹è±¡çš„å¼•ç”¨\r\n+ å°½é‡å°‘ç”¨é™æ€å˜é‡\r\n+ é¿å…åœ¨ç»å¸¸è°ƒç”¨çš„æ–¹æ³•ã€å¾ªç¯ä¸­åˆ›å»º Java å¯¹è±¡\r\n+ ç¼“å­˜ç»å¸¸ä½¿ç”¨çš„å¯¹è±¡\r\n+ å°½é‡ä¸è¦ä½¿ç”¨ finalize æ–¹æ³•\r\n+ è€ƒè™‘ä½¿ç”¨ SoftReference\r\n\r\n\r\n\r\n## ç¬¬ 5 è¯¾ â€”â€” è¡¨è¾¾å¼ä¸­çš„é™·é˜±\r\n\r\n### å…³äºå­—ç¬¦ä¸²çš„é™·é˜±\r\n\r\n#### JVM å¯¹å­—ç¬¦ä¸²çš„å¤„ç†\r\n\r\n`String java = new String(\"Java\")` è¿™å¥åˆ›å»ºäº†ä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯ â€œJavaâ€ è¿™ä¸ªç›´æ¥é‡å¯¹åº”çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯ new String() æ„é€ å™¨è¿”å›çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚\r\n\r\nJava ç¨‹åºä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼š\r\n\r\n+ é€šè¿‡ new è°ƒç”¨æ„é€ å™¨åˆ›å»º Java å¯¹è±¡\r\n+ é€šè¿‡ Class å¯¹è±¡çš„ newInstance() æ–¹æ³•è°ƒç”¨æ„é€ å™¨åˆ›å»º Java å¯¹è±¡\r\n+ é€šè¿‡ Java çš„ååºåˆ—åŒ–æœºåˆ¶ä» IO æµä¸­æ¢å¤ Java å¯¹è±¡\r\n+ é€šè¿‡ Java å¯¹è±¡æä¾›çš„ clone() æ–¹æ³•å¤åˆ¶ä¸€ä¸ªæ–°çš„ Java å¯¹è±¡\r\n+ å¯¹äºå­—ç¬¦ä¸²ä»¥åŠ Byteã€Shortã€Intã€Longã€Characterã€Floatã€Double å’Œ Boolean è¿™äº›åŸºæœ¬ç±»å‹çš„åŒ…è£…ç±»\r\n+ ç›´æ¥é‡çš„æ–¹å¼æ¥åˆ›å»º Java å¯¹è±¡  Integer in = 5ï¼›\r\n+ é€šè¿‡ç®€å•çš„ç®—æ³•è¡¨è¾¾å¼ï¼Œè¿æ¥è¿ç®—æ¥åˆ›å»º Java å¯¹è±¡ String str = \"a\" + \"b\"; ï¼ˆå¦‚æœè¿™ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼çš„å€¼åœ¨ç¼–è¯‘æ—¶ç¡®å®šä¸‹æ¥ï¼Œé‚£ä¹ˆ JVM ä¼šåœ¨ç¼–è¯‘æ—¶è®¡ç®—è¯¥å­—ç¬¦ä¸²å˜é‡çš„å€¼ï¼Œå¹¶è®©å®ƒæŒ‡å‘å­—ç¬¦ä¸²æ± ä¸­å¯¹åº”çš„å­—ç¬¦ä¸²ã€‚å¦‚æœè¿™äº›ç®—æ³•è¡¨è¾¾å¼éƒ½æ˜¯å­—ç¬¦ä¸²ç›´æ¥é‡ã€æ•´æ•°ç›´æ¥é‡ï¼Œæ²¡æœ‰å˜é‡å’Œæ–¹æ³•å‚ä¸ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ç¼–è¯‘æœŸå°±å¯ä»¥ç¡®å®šå­—ç¬¦ä¸²çš„å€¼ï¼›å¦‚æœä½¿ç”¨äº†å˜é‡ã€è°ƒç”¨äº†æ–¹æ³•ï¼Œé‚£ä¹ˆåªæœ‰ç­‰åˆ°è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šå­—ç¬¦ä¸²è¡¨è¾¾å¼çš„å€¼ï¼›å¦‚æœå­—ç¬¦ä¸²è¿æ¥è¿ç®—æ‰€æœ‰çš„å˜é‡éƒ½å¯æ‰§è¡Œ â€œå®æ›¿æ¢â€ï¼ˆä½¿ç”¨ final ä¿®é¥°çš„å˜é‡ï¼‰ï¼Œé‚£åœ¨ç¼–è¯‘æ—¶æœŸä¹Ÿèƒ½ç¡®å®šå­—ç¬¦ä¸²è¿æ¥è¡¨è¾¾å¼çš„å€¼ï¼‰\r\n\r\nå¯¹äº Java ç¨‹åºçš„å­—ç¬¦ç›´æ¥é‡ï¼ŒJVM ä¼šä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ± æ¥ä¿æŠ¤å®ƒä»¬ï¼›å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨æŸä¸ªå­—ç¬¦ä¸²ç›´æ¥é‡æ—¶ï¼ŒJVM ä¼šå°†å®ƒæ”¾å…¥å­—ç¬¦ä¸²æ± è¿›è¡Œç¼“å­˜ã€‚åœ¨ä¸€èˆ¬çš„æƒ…å†µä¸‹ï¼Œå­—ç¬¦ä¸²æ± ä¸­çš„å­—ç¬¦ä¸²å¯¹è±¡ä¸ä¼šè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼Œå½“ç¨‹åºå†æ¬¡éœ€è¦ä½¿ç”¨è¯¥å­—ç¬¦ä¸²æ—¶ï¼Œæ— éœ€é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ç›´æ¥è®©å¼•ç”¨å˜é‡æŒ‡å‘å­—ç¬¦ä¸²æ± ä¸­å·²æœ‰çš„å­—ç¬¦ä¸²ã€‚\r\n\r\n#### ä¸å¯å˜çš„å­—ç¬¦ä¸²\r\n\r\nString ç±»æ˜¯ä¸€ä¸ªä¸å¯å˜ç±»ï¼Œå½“ä¸€ä¸ª String å¯¹è±¡åˆ›å»ºå®Œæˆåï¼Œè¯¥ String ç±»é‡ŒåŒ…å«çš„å­—ç¬¦åºåˆ—å°±è¢«å›ºå®šä¸‹æ¥ï¼Œä»¥åæ°¸è¿œä¸èƒ½ä¿®æ”¹ã€‚\r\n\r\nå¦‚æœç¨‹åºéœ€è¦ä¸€ä¸ªå­—ç¬¦åºåˆ—ä¼šå‘ç”Ÿæ”¹å˜çš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå»ºè®®ä½¿ç”¨ StringBuilder ï¼ˆæ•ˆç‡æ¯” StringBuffer é«˜ï¼‰\r\n\r\n#### å­—ç¬¦ä¸²æ¯”è¾ƒ\r\n\r\nå¦‚æœè¦æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒï¼Œç”¨ == è¿›è¡Œåˆ¤æ–­å°±è¡Œï¼Œä½†å¦‚æœè¦åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ‰€åŒ…å«çš„å­—ç¬¦åºåˆ—æ˜¯å¦ç›¸åŒï¼Œåˆ™åº”è¯¥ç”¨ String é‡å†™è¿‡çš„ equals() æ–¹æ³•è¿›è¡Œæ¯”è¾ƒã€‚\r\n\r\n```java\r\npublic boolean equals(Object anObject) {\r\n        //å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸åŒ\r\n        if (this == anObject) {\r\n            return true;\r\n        }\r\n        //å¦‚æœanObjectæ˜¯Stringç±»å‹\r\n        if (anObject instanceof String) {\r\n            String anotherString = (String)anObject;\r\n            //nä»£è¡¨å­—ç¬¦ä¸²çš„é•¿åº¦\r\n            int n = value.length;\r\n            //å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦ç›¸ç­‰\r\n            if (n == anotherString.value.length) {\r\n                //è·å–å½“å‰å­—ç¬¦ä¸²ã€anotherStringåº•å±‚å°è£…çš„å­—ç¬¦æ•°ç»„\r\n                char v1[] = value;\r\n                char v2[] = anotherString.value;\r\n                int i = 0;\r\n                //é€ä¸€æ¯”è¾ƒv1 å’Œ v2æ•°ç»„ä¸­çš„æ¯ä¸ªå­—ç¬¦\r\n                while (n-- != 0) {\r\n                    if (v1[i] != v2[i])\r\n                        return false;\r\n                    i++;\r\n                }\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n```\r\n\r\nè¿˜å¯ä»¥ä½¿ç”¨ String æä¾›çš„ compareTo() æ–¹æ³•è¿”å›ä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°\r\n\r\n```java\r\npublic int compareTo(String anotherString) {\r\n        int len1 = value.length;\r\n        int len2 = anotherString.value.length;\r\n        int lim = Math.min(len1, len2);\r\n        char v1[] = value;\r\n        char v2[] = anotherString.value;\r\n\r\n        int k = 0;\r\n        while (k < lim) {\r\n            char c1 = v1[k];\r\n            char c2 = v2[k];\r\n            if (c1 != c2) {\r\n                return c1 - c2;\r\n            }\r\n            k++;\r\n        }\r\n        return len1 - len2;\r\n    }\r\n```\r\n\r\n### è¡¨è¾¾å¼ç±»å‹çš„é™·é˜±\r\n\r\n#### è¡¨è¾¾å¼ç±»å‹çš„è‡ªåŠ¨æå‡\r\n\r\n+ æ‰€æœ‰ byteã€shortã€charç±»å‹å°†è¢«æå‡åˆ° int ç±»å‹å‚ä¸è¿ç®—\r\n\r\n+ æ•´ä¸ªç®—æœ¯è¡¨è¾¾å¼çš„æ•°æ®ç±»å‹è‡ªåŠ¨æå‡åˆ°ä¸è¡¨è¾¾å¼ä¸­æœ€é«˜ç­‰çº§æ“ä½œæ•°åŒæ ·çš„ç±»å‹ï¼Œæ“ä½œæ•°çš„ç­‰çº§æ’åˆ—å¦‚ä¸‹ï¼šchar -> int -> long ->float -> double\r\n\r\n  byte -> short -> int -> long ->float -> double\r\n\r\n#### å¤åˆèµ‹å€¼è¿ç®—ç¬¦çš„é™·é˜±\r\n\r\nJava è¯­è¨€å…è®¸æ‰€æœ‰çš„åŒç›®è¿ç®—ç¬¦å’Œ = ä¸€èµ·ç»“åˆç»„æˆå¤åˆèµ‹å€¼è¿ç®—ç¬¦ï¼Œå¦‚ +=ã€-=ã€*=ã€/=ã€%= ã€&= ç­‰ï¼Œå¤åˆèµ‹å€¼è¿ç®—ç¬¦åŒ…å«äº†ä¸€ä¸ªéšå¼çš„ç±»å‹è½¬æ¢ã€‚\r\n\r\n```java\r\n//ä¸‹é¢è¿™ä¸¤æ¡è¯­å¥ä¸ç­‰ä»·\r\na = a + 5;		//\r\na += 5;			//å®é™…ä¸Šç­‰ä»·äº a = (açš„ç±»å‹) (a + 5);\r\n```\r\n\r\nå¤åˆèµ‹å€¼è¿ç®—ç¬¦ä¼šè‡ªåŠ¨çš„å°†å®ƒè®¡ç®—çš„ç»“æœå€¼å¼ºåˆ¶è½¬æ¢ä¸ºå…¶å·¦ä¾§å˜é‡çš„ç±»å‹ã€‚\r\n\r\n### è¾“å…¥æ³•å¯¼è‡´çš„é™·é˜±\r\n\r\n### æ³¨é‡Šçš„å­—ç¬¦å¿…é¡»åˆæ³•\r\n\r\n### è½¬ä¹‰å­—ç¬¦çš„é™·é˜±\r\n\r\n+ æ…ç”¨å­—ç¬¦çš„ Unicode è½¬ä¹‰å½¢å¼\r\n+ ä¸­æ­¢è¡Œæ³¨é‡Šçš„è½¬ä¹‰å­—ç¬¦\r\n\r\n### æ³›å‹å¯èƒ½å¼•èµ·çš„é”™è¯¯\r\n\r\n#### åŸå§‹ç±»å‹å˜é‡çš„èµ‹å€¼\r\n\r\n+ å½“ç¨‹åºæŠŠä¸€ä¸ªåŸå§‹ç±»å‹çš„å˜é‡èµ‹ç»™ä¸€ä¸ªå¸¦æœ‰æ³›å‹ä¿¡æ¯çš„å˜é‡æ—¶ï¼Œæ€»æ˜¯å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼ˆåªæ˜¯ä¼šæç¤ºè­¦å‘Šä¿¡æ¯ï¼‰\r\n+ å½“ç¨‹åºè¯•å›¾è®¿é—®å¸¦æ³›å‹å£°æ˜çš„é›†åˆçš„é›†åˆå…ƒç´ æ—¶ï¼Œç¼–è¯‘å™¨æ€»æ˜¯æŠŠé›†åˆå…ƒç´ å½“æˆæ³›å‹ç±»å‹å¤„ç†ï¼ˆå®ƒå¹¶ä¸å…³å¿ƒé›†åˆé‡Œé›†åˆå…ƒç´ çš„å®é™…ç±»å‹ï¼‰\r\n+ å½“ç¨‹åºè¯•å›¾è®¿é—®å¸¦æ³›å‹å£°æ˜çš„é›†åˆçš„é›†åˆå…ƒç´ æ—¶ï¼ŒJVMä¼šéå†æ¯ä¸ªé›†åˆå…ƒç´ è‡ªåŠ¨æ‰§è¡Œå¼ºåˆ¶è½¬å‹ï¼Œå¦‚æœé›†åˆå…ƒç´ çš„å®é™…ç±»å‹ä¸é›†åˆæ‰€å¸¦çš„æ³›å‹ä¿¡æ¯ä¸åŒ¹é…ï¼Œè¿è¡Œæ—¶å°†å¼•å‘ ClassCastException\r\n\r\n#### åŸå§‹ç±»å‹å¸¦æ¥çš„æ“¦é™¤\r\n\r\nå½“æŠŠä¸€ä¸ªå…·æœ‰æ³›å‹ä¿¡æ¯çš„å¯¹è±¡èµ‹ç»™å¦ä¸€ä¸ªæ²¡æœ‰æ³›å‹ä¿¡æ¯çš„å˜é‡æ—¶ï¼Œæ‰€æœ‰åœ¨å°–æ‹¬å·ä¹‹é—´çš„ç±»å‹ä¿¡æ¯éƒ½ä¼šä¸¢å¼ƒã€‚\r\n\r\n#### åˆ›å»ºæ³›å‹æ•°ç»„çš„é™·é˜±\r\n\r\nJava ä¸­ä¸å…è®¸åˆ›å»ºæ³›å‹æ•°ç»„\r\n\r\n### æ­£åˆ™è¡¨è¾¾å¼çš„é™·é˜±\r\n\r\næœ‰äº›ç¬¦å·æœ¬èº«å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ç¬¦å·åšè½¬ä¹‰è¿ç®—ã€‚\r\n\r\n### å¤šçº¿ç¨‹çš„é™·é˜±\r\n\r\n#### ä¸è¦è°ƒç”¨ run æ–¹æ³•\r\n\r\nå¼€å¯çº¿ç¨‹æ˜¯ç”¨ start() æ–¹æ³•ï¼Œè€Œä¸æ˜¯ run() æ–¹æ³•ã€‚\r\n\r\n#### é™æ€çš„åŒæ­¥æ–¹æ³•\r\n\r\nå¯¹äºåŒæ­¥ä»£ç å—è€Œè¨€ï¼Œç¨‹åºå¿…é¡»æ˜¾å¼ä¸ºå®ƒæŒ‡å®šåŒæ­¥ç›‘è§†å™¨ï¼›å¯¹äºåŒæ­¥éé™æ€æ–¹æ³•è€Œè¨€ï¼Œè¯¥æ–¹æ³•çš„åŒæ­¥ç›‘è§†å™¨æ˜¯ this â€”â€” å³è°ƒç”¨è¯¥æ–¹æ³•çš„ Java å¯¹è±¡ï¼›å¯¹äºé™æ€çš„åŒæ­¥æ–¹æ³•è€Œè¨€ï¼Œè¯¥æ–¹æ³•çš„åŒæ­¥ç›‘è§†å™¨ä¸æ˜¯ thisï¼Œè€Œæ˜¯è¯¥ç±»æœ¬èº«ã€‚\r\n\r\n\r\n\r\n\r\n\r\n## ç¬¬ 6 è¯¾ â€”â€” æµç¨‹æ§åˆ¶çš„é™·é˜±\r\n\r\n### switch è¯­å¥é™·é˜±\r\n\r\nbreak è¯­å¥ä¸è¦å¿˜è®°å†™\r\n\r\nswitch çš„è¡¨è¾¾å¼ç±»å‹ï¼š\r\n\r\n+ byte\r\n+ short\r\n+ int\r\n+ char\r\n+ enum\r\n+ String ï¼ˆJdk 1.7 ä»¥åæœ‰ Stringï¼‰\r\n\r\n### æ ‡ç­¾å¼•èµ·çš„é™·é˜±\r\n\r\nJava ä¸­çš„æ ‡ç­¾é€šå¸¸æ˜¯å’Œå¾ªç¯ä¸­çš„ break å’Œ continue ç»“åˆä½¿ç”¨ï¼Œè®© break ç›´æ¥ç»ˆæ­¢æ ‡ç­¾æ‰€æ ‡è¯†çš„å¾ªç¯ï¼Œè®© continue è¯­å¥å¿½ç•¥æ ‡ç­¾æ‰€æ ‡è¯†çš„å¾ªç¯çš„å‰©ä¸‹è¯­å¥ã€‚\r\n\r\nã€‚ã€‚\r\n\r\n\r\n\r\n## ç¬¬ 7 è¯¾ â€”â€” é¢å‘å¯¹è±¡çš„é™·é˜±\r\n\r\n### instanceof  è¿ç®—ç¬¦çš„é™·é˜±\r\n\r\ninstanceof å®ƒç”¨äºåˆ¤æ–­å‰é¢çš„å¯¹è±¡æ˜¯å¦æ˜¯åé¢çš„ç±»æˆ–å…¶å­ç±»ã€å®ç°ç±»çš„å®ä¾‹ã€‚å¦‚æœæ˜¯è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚\r\n\r\ninstanceof è¿ç®—ç¬¦å‰é¢æ“ä½œæ•°çš„ç¼–è¯‘æ—¶ç±»å‹å¿…é¡»æ˜¯ï¼š\r\n\r\n+ è¦ä¹ˆä¸åé¢çš„ç±»ç›¸åŒ\r\n+ è¦ä¹ˆæ˜¯åé¢ç±»çš„çˆ¶ç±»\r\n+ è¦ä¹ˆæ˜¯åé¢ç±»å‹çš„å­ç±»\r\n\r\n\r\n### æ„é€ å™¨é™·é˜±\r\n\r\næ„é€ å™¨æ˜¯ Java ä¸­æ¯ä¸ªç±»éƒ½ä¼šæä¾›çš„ä¸€ä¸ªâ€œç‰¹æ®Šæ–¹æ³•â€ã€‚æ„é€ å™¨è´Ÿè´£å¯¹ Java å¯¹è±¡æ‰§è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä¸ç®¡æ˜¯å®šä¹‰å®ä¾‹å˜é‡æ—¶æŒ‡å®šçš„åˆå§‹å€¼ï¼Œè¿˜æ˜¯åœ¨éé™æ€åˆå§‹åŒ–ä»£ç å—ä¸­æ‰€åšçš„æ“ä½œï¼Œå®é™…ä¸Šéƒ½ä¼šè¢«æå–åˆ°æ„é€ å™¨ä¸­æ‰§è¡Œã€‚\r\n\r\næ„é€ å™¨ä¸èƒ½å£°æ˜è¿”å›å€¼ç±»å‹ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨voidå£°æ˜æ„é€ å™¨æ²¡æœ‰è¿”å›å€¼ã€‚\r\n\r\n#### æ„é€ å™¨åˆ›å»ºå¯¹è±¡å—\r\n\r\næ„é€ å™¨å¹¶ä¸ä¼šåˆ›å»º Java å¯¹è±¡ï¼Œæ„é€ å™¨åªæ˜¯è´Ÿè´£æ‰§è¡Œåˆå§‹åŒ–ï¼Œåœ¨æ„é€ å™¨æ‰§è¡Œä¹‹å‰ï¼ŒJava å¯¹è±¡æ‰€éœ€è¦çš„å†…å­˜ç©ºé—´ï¼Œæ˜¯ç”± new å…³é”®å­—ç”³è¯·å‡ºæ¥çš„ã€‚ç»å¤§éƒ¨åˆ†æ—¶å€™ï¼Œç¨‹åºä½¿ç”¨ new å…³é”®å­—ä¸ºä¸€ä¸ª Java å¯¹è±¡ç”³è¯·ç©ºé—´ä¹‹åï¼Œéƒ½éœ€è¦ä½¿ç”¨æ„é€ å™¨ä¸ºè¿™ä¸ªå¯¹è±¡æ‰§è¡Œåˆå§‹åŒ–ï¼Œä½†åœ¨æŸäº›æ—¶å€™ï¼Œç¨‹åºåˆ›å»º Java å¯¹è±¡æ— éœ€è°ƒç”¨æ„é€ å™¨ï¼Œå¦‚ä¸‹ï¼š\r\n\r\n+ ä½¿ç”¨ååºåˆ—åŒ–çš„æ–¹å¼æ¢å¤ Java å¯¹è±¡\r\n+ ä½¿ç”¨ clone æ–¹æ³•å¤åˆ¶ Java å¯¹è±¡\r\n\r\n```java\r\npackage com.zhisheng.test;\r\n\r\nimport java.io.*;\r\n\r\n/**\r\n * Created by 10412 on 2022/5/31.\r\n */\r\nclass Wolf implements Serializable\r\n{\r\n    private String name;\r\n\r\n    public Wolf(String name) {\r\n        System.out.println(\"è°ƒç”¨äº†æœ‰å‚æ„é€ æ–¹æ³•\");\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o) {\r\n        if (this == o) return true;\r\n        if (o == null || getClass() != o.getClass()) return false;\r\n\r\n        Wolf wolf = (Wolf) o;\r\n\r\n        return name != null ? name.equals(wolf.name) : wolf.name == null;\r\n\r\n    }\r\n\r\n    @Override\r\n    public int hashCode() {\r\n        return name != null ? name.hashCode() : 0;\r\n    }\r\n}\r\n\r\npublic class SerializableTest\r\n{\r\n    public static void main(String[] args) {\r\n        Wolf w = new Wolf(\"ç°å¤ªç‹¼\");\r\n        System.out.println(\"å¯¹è±¡åˆ›å»ºå®Œæˆ\");\r\n        Wolf w2 = null;\r\n        ObjectInputStream ois = null;\r\n        ObjectOutputStream oos = null;\r\n        try {\r\n            //åˆ›å»ºè¾“å‡ºå¯¹è±¡æµ\r\n            oos = new ObjectOutputStream(new FileOutputStream(\"a.bin\"));\r\n            //åˆ›å»ºè¾“å…¥å¯¹è±¡æµ\r\n            ois = new ObjectInputStream(new FileInputStream(\"a.bin\"));\r\n            //åºåˆ—è¾“å‡ºjava å¯¹è±¡\r\n            oos.writeObject(w);\r\n            oos.flush();\r\n            //ååºåˆ—åŒ–æ¢å¤javaå¯¹è±¡\r\n            w2 = (Wolf) ois.readObject();\r\n            System.out.println(w);\r\n            System.out.println(w2);\r\n            //ä¸¤ä¸ªå¯¹è±¡çš„å®ä¾‹å˜é‡å€¼å®Œå…¨ç›¸ç­‰ï¼Œè¾“å‡ºtrue\r\n            System.out.println(w.equals(w2));\r\n            //ä¸¤ä¸ªå¯¹è±¡ä¸åŒï¼Œè¾“å‡ºfalse\r\n            System.out.println(w == w2);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } catch (ClassNotFoundException e) {\r\n            e.printStackTrace();\r\n        }finally {\r\n            if (ois!=null)\r\n                try {\r\n                    ois.close();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            if (oos!=null)\r\n                try {\r\n                    oos.close();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n        }\r\n\r\n    }\r\n}\r\n```\r\n\r\nç¨‹åºè¿è¡Œç»“æœï¼š\r\n\r\n```java\r\nè°ƒç”¨äº†æœ‰å‚æ„é€ æ–¹æ³•\r\nå¯¹è±¡åˆ›å»ºå®Œæˆ\r\ncom.zhisheng.test.Wolf@1b15382\r\ncom.zhisheng.test.Wolf@1b15382\r\ntrue\r\nfalse\r\n```\r\n\r\næ­£å¦‚ç»“æœæ‰€ç¤ºï¼šåˆ›å»º Wolf å¯¹è±¡æ—¶ï¼Œç¨‹åºè°ƒç”¨äº†ç›¸åº”çš„æ„é€ å™¨æ¥å¯¹è¯¥å¯¹è±¡æ‰§è¡Œåˆå§‹åŒ–ï¼›å½“ç¨‹åºé€šè¿‡ååºåˆ—åŒ–æœºåˆ¶æ¢å¤ Java å¯¹è±¡æ—¶ï¼Œç³»ç»Ÿæ— éœ€åœ¨è°ƒç”¨æ„é€ å™¨æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚é€šè¿‡ååºåˆ—åŒ–æ¢å¤å‡ºæ¥çš„ Wolf å¯¹è±¡å’ŒåŸæ¥çš„ Wolf å¯¹è±¡å…·æœ‰å®Œå…¨ç›¸åŒçš„å®ä¾‹å˜é‡å€¼ï¼Œä½†ç³»ç»Ÿä¼šäº§ç”Ÿä¸¤ä¸ªå¯¹è±¡ã€‚\r\n\r\n#### æ— é™é€’å½’æ„é€ å™¨\r\n\r\n```java\r\npublic class ConstrutionTest\r\n{\r\n    ConstrutionTest ct;\r\n    {\r\n        ct = new ConstrutionTest();\r\n    }\r\n    public ConstrutionTest() {\r\n        System.out.println(\"æ— å‚æ„é€ å™¨\");\r\n    }\r\n    public static void main(String[] args) {\r\n        ConstrutionTest ct = new ConstrutionTest();\r\n    }\r\n}\r\n```\r\n\r\nè¿è¡Œç»“æœæŠ›å‡ºå¼‚å¸¸ `java.lang.StackOverflowError`\r\n\r\nå› ä¸ºä¸ç®¡å®šä¹‰å®ä¾‹å˜é‡æ—¶æŒ‡å®šçš„åˆå§‹å€¼ï¼Œè¿˜æ˜¯åœ¨éé™æ€åˆå§‹åŒ–ä»£ç å—ä¸­æ‰§è¡Œçš„åˆå§‹åŒ–æ“ä½œï¼Œæœ€ç»ˆéƒ½å°†æå–åˆ°æ„é€ å™¨ä¸­æ‰§è¡Œï¼Œå› ä¸ºä»£ç ä¸­é€’å½’è°ƒç”¨äº†ç±»çš„æ„é€ å™¨ï¼Œæœ€ç»ˆå¯¼è‡´å‡ºç° `java.lang.StackOverflowError` å¼‚å¸¸ã€‚\r\n\r\n### åˆ°åº•è°ƒç”¨å“ªä¸ªé‡è½½æ–¹æ³•\r\n\r\n1ã€ç¬¬ä¸€é˜¶æ®µ JVM å°†ä¼šé€‰å–æ‰€æœ‰å¯è·å¾—å¹¶åŒ¹é…è°ƒç”¨çš„æ–¹æ³•æˆ–è€…æ„é€ å™¨\r\n\r\n2ã€ç¬¬äºŒä¸ªé˜¶æ®µå†³å®šåˆ°åº•è¦è°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œæ­¤æ—¶ JVM ä¼šåœ¨ç¬¬ä¸€é˜¶æ®µæ‰€é€‰å–çš„æ–¹æ³•æˆ–è€…æ„é€ å™¨ä¸­å†æ¬¡é€‰å–æœ€ç²¾ç¡®åŒ¹é…çš„é‚£ä¸€ä¸ªã€‚\r\n\r\n```java\r\npublic class OverrideTest\r\n{\r\n    public void info(Object obj, int a) {\r\n        System.out.println(\"obj å‚æ•°\" + obj);\r\n        System.out.println(\"æ•´å‹å‚æ•° \" + a);\r\n    }\r\n\r\n    public void info(Object[] obj, double a) {\r\n        System.out.println(\"obj å‚æ•°\" + obj);\r\n        System.out.println(\"æ•´å‹å‚æ•° \" + a);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        OverrideTest o = new OverrideTest();\r\n        o.info(null, 5);\r\n    }\r\n}\r\n```\r\n\r\næŠ¥é”™å¦‚ä¸‹ï¼š\r\n\r\n```\r\nError:(20, 10) java: å¯¹infoçš„å¼•ç”¨ä¸æ˜ç¡®\r\n  com.zhisheng.test.OverrideTest ä¸­çš„æ–¹æ³• info(java.lang.Object,int) å’Œ com.zhisheng.test.OverrideTest ä¸­çš„æ–¹æ³• info(java.lang.Object[],double) éƒ½åŒ¹é…\r\n```\r\n\r\nåœ¨è¿™ç§å¤æ‚çš„æ¡ä»¶ä¸‹ï¼ŒJVM æ— æ³•åˆ¤æ–­å“ªä¸ªæ–¹æ³•æ›´åŒ¹é…å®é™…è°ƒç”¨ï¼Œå°†ä¼šå¯¼è‡´ç¨‹åºç¼–è¯‘é”™è¯¯ã€‚\r\n\r\n### æ–¹æ³•é‡å†™çš„é™·é˜±\r\n\r\næ— æ³•é‡å†™çˆ¶ç±» private æ–¹æ³•ã€‚å¦‚æœå­ç±»æœ‰ä¸€ä¸ªä¸çˆ¶ç±» private æ–¹æ³•å…·æœ‰ç›¸åŒæ–¹æ³•åã€ç›¸åŒå½¢å‚åˆ—è¡¨ã€ç›¸åŒè¿”å›å€¼ç±»å‹çš„æ–¹æ³•ï¼Œä¾ç„¶ä¸æ˜¯é‡å†™ï¼Œåªæ˜¯å­ç±»å®šä¹‰äº†ä¸€ä¸ªä¸çˆ¶ç±»ç›¸åŒçš„æ–¹æ³•ã€‚\r\n\r\n### static å…³é”®å­—\r\n\r\nstatic å¯ä»¥ä¿®é¥°ç±»ä¸­å®šä¹‰çš„æˆå‘˜ï¼šfieldã€æ–¹æ³•ã€å†…éƒ¨ç±»ã€åˆå§‹åŒ–ä»£ç å—ã€å†…éƒ¨æšä¸¾ç±»\r\n\r\n#### é™æ€æ–¹æ³•å±äºç±»\r\n\r\nè¢« static ä¿®é¥°çš„æˆå‘˜ï¼ˆfieldã€æ–¹æ³•ã€å†…éƒ¨ç±»ã€åˆå§‹åŒ–å—ã€å†…éƒ¨æšä¸¾ç±»ï¼‰å±äºç±»æœ¬èº«ï¼Œè€Œä¸æ˜¯å•ä¸ªçš„ Java å¯¹è±¡ã€‚é™æ€æ–¹æ³•ä¹Ÿæ˜¯å±äºç±»ã€‚\r\n\r\n\r\n\r\n## ç¬¬ 8 è¯¾ â€”â€” å¼‚å¸¸æ•æ‰çš„é™·é˜±\r\n\r\n### æ­£ç¡®å…³é—­èµ„æºçš„æ–¹å¼\r\n\r\n+ ä½¿ç”¨ finally å—æ¥ä¿è¯å›æ”¶ï¼Œä¿è¯å…³é—­æ“ä½œæ€»æ˜¯ä¼šè¢«æ‰§è¡Œ\r\n+ å…³é—­æ¯ä¸ªèµ„æºä¹‹å‰é¦–å…ˆä¿è¯å¼•ç”¨è¯¥èµ„æºçš„å¼•ç”¨å˜é‡ä¸ä¸º null\r\n+ ä¸ºæ¯ä¸ªç‰©ç†èµ„æºå•ç‹¬ä½¿ç”¨ try .. catch å—å…³é—­èµ„æºï¼Œä¿è¯å…³é—­èµ„æºæ—¶å¼•å‘çš„å¼‚å¸¸ä¸ä¼šå½±å“å…¶ä»–èµ„æºçš„å…³é—­ã€‚\r\n\r\n### finally å—é™·é˜±\r\n\r\nfinally æ‰§è¡Œé¡ºåºï¼Œçœ‹æˆ‘ä»¥å‰å†™çš„ä¸€ç¯‡æ–‡ç« [ã€Šæ·±åº¦æ¢ç©¶Java ä¸­ finally è¯­å¥å—ã€‹](http://www.54tianzhisheng.cn/2022/03/28/%E6%B7%B1%E5%BA%A6%E6%8E%A2%E7%A9%B6Java%20%E4%B8%AD%20finally%20%E8%AF%AD%E5%8F%A5%E5%9D%97/)ã€‚\r\n\r\n### catch å—ç”¨æ³•\r\n\r\nåœ¨ try å—åä½¿ç”¨ catch å—æ¥æ•è·å¤šä¸ªå¼‚å¸¸æ—¶ï¼Œç¨‹åºåº”è¯¥å°å¿ƒå¤šä¸ª catch å—ä¹‹é—´çš„é¡ºåºï¼šæ•è·çˆ¶ç±»å¼‚å¸¸çš„ catch å—éƒ½åº”è¯¥æ’åœ¨æ•è·å­ç±»å¼‚å¸¸çš„ catch å—ä¹‹åï¼ˆå…ˆå¤„ç†å°å¼‚å¸¸ï¼Œå†å¤„ç†å¤§å¼‚å¸¸ï¼‰ï¼Œå¦åˆ™å‡ºç°ç¼–è¯‘é”™è¯¯ã€‚\r\n\r\n### ç»§æ‰¿å¾—åˆ°çš„å¼‚å¸¸\r\n\r\nå­ç±»é‡å†™çˆ¶ç±»æ–¹æ³•æ—¶ï¼Œä¸èƒ½å£°æ˜æŠ›å‡ºæ¯”çˆ¶ç±»æ–¹æ³•ç±»å‹æ›´å¤šã€èŒƒå›´æ›´å¤§çš„å¼‚å¸¸ã€‚\r\n\r\n\r\näºŒå‰æ ‘æ€§è´¨ï¼š\r\n\r\n+ äºŒå‰æ ‘ç¬¬ i å±‚ä¸Šçš„èŠ‚ç‚¹æ•°ç›®è‡³å¤šä¸º 2 ^(i - 1)   (i >= 1)\r\n\r\n+ æ·±åº¦ä¸º k çš„äºŒå‰æ ‘è‡³å¤šæœ‰ 2 ^ k - 1 ä¸ªèŠ‚ç‚¹\r\n\r\n+ åœ¨ä»»ä½•ä¸€é¢—äºŒå‰æ ‘ä¸­ï¼Œå¦‚æœå…¶å¶å­ç»“ç‚¹çš„æ•°é‡ä¸º n0ï¼Œåº¦ä¸º 2 çš„å­èŠ‚ç‚¹æ•°é‡ä¸º n2ï¼Œåˆ™ n0 = n2 + 1\r\n\r\n+ å…·æœ‰ n ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦ä¸º log n   +  1   (log çš„åº•ä¸º 2)\r\n\r\n+ å¯¹äºä¸€æ£µæœ‰ n ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹æŒ‰å±‚è‡ªå·¦å‘å³ç¼–å·ï¼Œåˆ™å¯¹ä»»ä¸€ç¼–å·ä¸º i çš„èŠ‚ç‚¹æœ‰å¦‚ä¸‹æ€§è´¨ï¼š\r\n\r\n  å½“ i == 1 æ—¶ï¼ŒèŠ‚ç‚¹ i æ˜¯äºŒå‰æ ‘çš„æ ¹ï¼›è‹¥ i > 1 æ—¶ï¼Œåˆ™èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯ i/2\r\n\r\n  å½“ 2i <= nï¼Œåˆ™èŠ‚ç‚¹ i æœ‰å·¦å­©å­ï¼Œå·¦å­©å­çš„ç¼–å·æ˜¯ 2iï¼Œå¦åˆ™ï¼ŒèŠ‚ç‚¹æ— å·¦å­©å­ï¼Œå¹¶ä¸”æ˜¯å¶å­ç»“ç‚¹\r\n\r\n  è‹¥ 2i + 1 <= n ï¼Œåˆ™èŠ‚ç‚¹ i æœ‰å³å­©å­ï¼Œå³å­©å­çš„ç¼–å·æ˜¯ 2i + 1ï¼›å¦åˆ™ï¼ŒèŠ‚ç‚¹æ— å³å­©å­ã€‚\r\n\r\n+ å¯¹äºä¸€é¢— n ä¸ªèŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹æŒ‰å±‚è‡ªå·¦å‘å³ç¼–å·ï¼Œ1 ~ n/2 èŒƒå›´çš„èŠ‚ç‚¹éƒ½æ˜¯æœ‰å­©å­èŠ‚ç‚¹çš„éå¶å­ç»“ç‚¹ï¼Œå…¶ä½™çš„èŠ‚ç‚¹å…¨éƒ¨éƒ½æ˜¯å¶å­ç»“ç‚¹ã€‚ç¼–å·ä¸º n/2 çš„èŠ‚ç‚¹æœ‰å¯èƒ½åªæœ‰å·¦èŠ‚ç‚¹ï¼Œä¹Ÿå¯èƒ½æ—¢æœ‰å·¦èŠ‚ç‚¹ï¼Œåˆæœ‰å³èŠ‚ç‚¹ã€‚\r\n\r\n\r\n\r\n### é€‰æ‹©æ’åº\r\n\r\n#### ç›´æ¥é€‰æ‹©æ’åº\r\n\r\néœ€è¦ç»è¿‡ n - 1 è¶Ÿæ¯”è¾ƒ\r\n\r\nç¬¬ä¸€è¶Ÿæ¯”è¾ƒï¼šç¨‹åºå°†è®°å½•å®šä½åœ¨ç¬¬ä¸€ä¸ªæ•°æ®ä¸Šï¼Œæ‹¿ç¬¬ä¸€ä¸ªæ•°æ®ä¾æ¬¡å’Œå®ƒåé¢çš„æ¯ä¸ªæ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ•°æ®å¤§äºåé¢æŸä¸ªæ•°æ®ï¼Œäº¤æ¢å®ƒä»¬ã€‚ã€‚ä¾æ­¤ç±»æ¨ï¼Œç»è¿‡ç¬¬ä¸€è¶Ÿæ¯”è¾ƒï¼Œè¿™ç»„æ•°æ®ä¸­æœ€å°çš„æ•°æ®è¢«é€‰å‡ºæ¥ï¼Œå®ƒè¢«æ’åœ¨ç¬¬ä¸€ä½ã€‚\r\n\r\nç¬¬äºŒè¶Ÿæ¯”è¾ƒï¼šç¨‹åºå°†è®°å½•å®šä½åœ¨ç¬¬äºŒä¸ªæ•°æ®ä¸Šï¼Œæ‹¿ç¬¬äºŒä¸ªæ•°æ®ä¾æ¬¡å’Œå®ƒåé¢æ¯ä¸ªæ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç¬¬äºŒä¸ªæ•°æ®å¤§äºåé¢æŸä¸ªæ•°æ®ï¼Œäº¤æ¢å®ƒä»¬ã€‚ã€‚ä¾æ¬¡ç±»æ¨ï¼Œç»è¿‡ç¬¬äºŒè¶Ÿæ¯”è¾ƒï¼Œè¿™ç»„æ•°æ®ä¸­ç¬¬äºŒå°çš„æ•°æ®è¢«é€‰å‡ºï¼Œå®ƒæ’åœ¨ç¬¬äºŒä½\r\n\r\nã€‚ã€‚\r\n\r\næŒ‰æ­¤è§„åˆ™ä¸€å…±è¿›è¡Œ n-1 è¶Ÿæ¯”è¾ƒï¼Œè¿™ç»„æ•°æ®ä¸­ç¬¬ n - 1å°ï¼ˆç¬¬äºŒå¤§ï¼‰çš„æ•°æ®è¢«é€‰å‡ºï¼Œè¢«æ’åœ¨ç¬¬ n -1 ä½ï¼ˆå€’æ•°ç¬¬ä¸€ä½ï¼‰ï¼›å‰©ä¸‹çš„å°±æ˜¯æœ€å¤§çš„æ•°æ®ï¼Œå®ƒæ’åœ¨æœ€åã€‚\r\n\r\nç›´æ¥é€‰æ‹©æ’åºçš„ä¼˜ç‚¹å°±æ˜¯ç®—æ³•ç®€å•ï¼Œå®¹æ˜“å®ç°ï¼Œç¼ºç‚¹å°±æ˜¯æ¯è¶Ÿåªèƒ½ç¡®å®šä¸€ä¸ªå…ƒç´ ï¼Œnä¸ªæ•°ç»„éœ€è¦è¿›è¡Œ n-1 è¶Ÿæ¯”è¾ƒã€‚\r\n\r\n#### å †æ’åº\r\n\r\n+ å»ºå †\r\n+ æ‹¿å †çš„æ ¹èŠ‚ç‚¹å’Œæœ€åä¸€ä¸ªèŠ‚ç‚¹äº¤æ¢\r\n\r\n### äº¤æ¢æ’åº\r\n\r\n#### å†’æ³¡æ’åº\r\n\r\nç¬¬ä¸€è¶Ÿï¼šä¾æ¬¡æ¯”è¾ƒ0å’Œ1ï¼Œ1å’Œ2ï¼Œ2å’Œ3 ... n-2 å’Œ n - 1 ç´¢å¼•çš„å…ƒç´ ï¼Œå¦‚æœå‘ç°ç¬¬ä¸€ä¸ªæ•°æ®å¤§äºåä¸€ä¸ªæ•°æ®ï¼Œäº¤æ¢å®ƒä»¬ï¼Œç»è¿‡ç¬¬ä¸€è¶Ÿï¼Œæœ€å¤§çš„å…ƒç´ æ’åˆ°äº†æœ€åã€‚\r\n\r\nç¬¬äºŒè¶Ÿï¼šä¾æ¬¡æ¯”è¾ƒ0å’Œ1ï¼Œ1å’Œ2ï¼Œ2å’Œ3 ... n-3 å’Œ n - 2 ç´¢å¼•çš„å…ƒç´ ï¼Œå¦‚æœå‘ç°ç¬¬ä¸€ä¸ªæ•°æ®å¤§äºåä¸€ä¸ªæ•°æ®ï¼Œäº¤æ¢å®ƒä»¬ï¼Œç»è¿‡ç¬¬äºŒè¶Ÿï¼Œç¬¬äºŒå¤§çš„å…ƒç´ æ’åˆ°äº†å€’æ•°ç¬¬äºŒä½\r\n\r\nã€‚ã€‚\r\n\r\nç¬¬ n -1 è¶Ÿï¼šä¾æ¬¡æ¯”è¾ƒ0å’Œ1å…ƒç´ ï¼Œå¦‚æœå‘ç°ç¬¬ä¸€ä¸ªæ•°æ®å¤§äºåä¸€ä¸ªæ•°æ®ï¼Œäº¤æ¢å®ƒä»¬ï¼Œç»è¿‡ç¬¬ n - 1 è¶Ÿï¼Œç¬¬äºŒå°çš„å…ƒç´ æ’åˆ°äº†ç¬¬äºŒä½ã€‚\r\n\r\n#### å¿«é€Ÿæ’åº\r\n\r\nä»å¾…æ’çš„æ•°æ®åºåˆ—ä¸­ä»»å–ä¸€ä¸ªæ•°æ®ä½œä¸ºåˆ†ç•Œå€¼ï¼Œæ‰€æœ‰æ¯”å®ƒå°çš„æ•°æ®å…ƒç´ ä¸€å¾‹æ”¾åœ¨å·¦è¾¹ï¼Œæ‰€æœ‰æ¯”ä»–å¤§çš„å…ƒç´ ä¸€å¾‹æ”¾åœ¨å³è¾¹ï¼Œè¿™æ ·ä¸€è¶Ÿä¸‹æ¥ï¼Œè¯¥åºåˆ—å°±åˆ†æˆäº†ä¸¤ä¸ªå­åºåˆ—ï¼Œæ¥ä¸‹æ¥å¯¹ä¸¤ä¸ªå­åºåˆ—è¿›è¡Œé€’å½’ï¼Œç›´åˆ°æ¯ä¸ªå­åºåˆ—åªå‰©ä¸€ä¸ªï¼Œæ’åºå®Œæˆã€‚\r\n\r\n### æ’å…¥æ’åº\r\n\r\n#### ç›´æ¥æ’å…¥æ’åº\r\n\r\nä¾æ¬¡å°†å¾…æ’åºçš„æ•°æ®å…ƒç´ æŒ‰å…¶å…³é”®å­—å€¼çš„å¤§å°æ’å…¥å‰é¢çš„æœ‰åºåºåˆ—ã€‚\r\n\r\n#### æŠ˜åŠæ’å…¥æ’åº\r\n\r\nå½“ç¬¬ i - 1 è¶Ÿéœ€è¦å°†ç¬¬ i ä¸ªå…ƒç´ æ’å…¥å‰é¢çš„ 0 ~ i -1 ä¸ªå…ƒç´ åºåˆ—ä¸­æ—¶ï¼š\r\n\r\n+ è®¡ç®— 0 ~ i - 1 ç´¢å¼•çš„ä¸­é—´ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç”¨ i ç´¢å¼•å¤„çš„å…ƒç´ å’Œ ï¼ˆ0 + i - 1ï¼‰/2 ç´¢å¼•å¤„çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœ i ç´¢å¼•å¤„çš„å…ƒç´ å¤§ï¼Œå°±ç›´æ¥åœ¨ ï¼ˆï¼ˆ0 + i - 1ï¼‰/2 ï¼‰ ~ ï¼ˆi - 1ï¼‰ååŠä¸ªèŒƒå›´å†…è¿›è¡Œæœç´¢ï¼Œåä¹‹åœ¨å‰åŠä¸ªèŒƒå›´æœç´¢ã€‚\r\n+ é‡å¤ä¸Šé¢æ­¥éª¤\r\n+ ç¡®å®šç¬¬ i ä¸ªå…ƒç´ çš„æ’å…¥ä½ç½®ï¼Œå°±å°†è¯¥ä½ç½®çš„åé¢æ‰€æœ‰å…ƒç´ æ•´ä½“åç§»ä¸€ä½ï¼Œç„¶åå°†ç¬¬ i ä¸ªå…ƒç´ æ”¾å…¥è¯¥ä½ç½®ã€‚\r\n', 1, 'post', 'publish', 'Java', 'Java', 26, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (9, '1232', '', 1670933704, 0, '2311112', 0, 'post', 'draft', '1', 'é»˜è®¤åˆ†ç±»', 0, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (21, 'about my blog', 'about01', 1669740067, 1669740067, '## Blog\r\n\r\n[Blog](https://github.com/zhisheng17/blog)  fork from [My Blog](https://github.com/ZHENFENG13/My-Blog) , è¯¥ä½œè€…æ˜¯åœ¨ [Tale](https://github.com/otale/tale) åšå®¢ç³»ç»ŸåŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹çš„ã€‚\r\n\r\n`Tale` ä½¿ç”¨äº†è½»é‡çº§ mvc æ¡†æ¶ `Blade` å¼€å‘ï¼Œé»˜è®¤ä¸»é¢˜ä½¿ç”¨äº†æ¼‚äº®çš„ `pinghsu` ã€‚\r\n\r\n`My-Blog` ä½¿ç”¨çš„æ˜¯ Docker + SpringBoot + Mybatis + thymeleaf æ‰“é€ çš„ä¸€ä¸ªä¸ªäººåšå®¢æ¨¡æ¿ã€‚\r\n\r\n***\r\n\r\n[Blog](https://github.com/zhisheng17/blog)  åœ¨  [My Blog](https://github.com/ZHENFENG13/My-Blog)  çš„åŸºç¡€ä¸Šå»é™¤äº† Dockerï¼Œé‡‡ç”¨çš„æ˜¯ SpringBoot + Mybatis + thymeleaf  + MySQL æ­å»ºçš„ä¸€ä¸ªåšå®¢ï¼Œå…¶ä¸­åœ¨åŸæ¥ä½œè€…çš„åŸºç¡€ä¸Šä¼˜åŒ–äº†ã€‚\r\n\r\n## å¼€æºåè®®\r\n\r\n[MIT](./LICENSE)\r\n\r\n## æ„Ÿè°¢\r\n\r\n[ZHENFENG13](https://github.com/ZHENFENG13)\r\n\r\n[otale](https://github.com/otale)\r\n', 1, 'page', 'publish', NULL, NULL, 68, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (22, 'about my blog', 'about01', 1669740067, 1669740067, '## Blog\r\n\r\n[Blog](https://github.com/zhisheng17/blog)  fork from [My Blog](https://github.com/ZHENFENG13/My-Blog) , è¯¥ä½œè€…æ˜¯åœ¨ [Tale](https://github.com/otale/tale) åšå®¢ç³»ç»ŸåŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹çš„ã€‚\r\n\r\n`Tale` ä½¿ç”¨äº†è½»é‡çº§ mvc æ¡†æ¶ `Blade` å¼€å‘ï¼Œé»˜è®¤ä¸»é¢˜ä½¿ç”¨äº†æ¼‚äº®çš„ `pinghsu` ã€‚\r\n\r\n`My-Blog` ä½¿ç”¨çš„æ˜¯ Docker + SpringBoot + Mybatis + thymeleaf æ‰“é€ çš„ä¸€ä¸ªä¸ªäººåšå®¢æ¨¡æ¿ã€‚\r\n\r\n***\r\n\r\n[Blog](https://github.com/zhisheng17/blog)  åœ¨  [My Blog](https://github.com/ZHENFENG13/My-Blog)  çš„åŸºç¡€ä¸Šå»é™¤äº† Dockerï¼Œé‡‡ç”¨çš„æ˜¯ SpringBoot + Mybatis + thymeleaf  + MySQL æ­å»ºçš„ä¸€ä¸ªåšå®¢ï¼Œå…¶ä¸­åœ¨åŸæ¥ä½œè€…çš„åŸºç¡€ä¸Šä¼˜åŒ–äº†ã€‚\r\n\r\n## å¼€æºåè®®\r\n\r\n[MIT](./LICENSE)\r\n\r\n## æ„Ÿè°¢\r\n\r\n[ZHENFENG13](https://github.com/ZHENFENG13)\r\n\r\n[otale](https://github.com/otale)\r\n', 1, 'page', 'publish', NULL, NULL, 68, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (23, 'about my blog', 'about01', 1669740067, 1669740067, '## Blog\r\n\r\n[Blog](https://github.com/zhisheng17/blog)  fork from [My Blog](https://github.com/ZHENFENG13/My-Blog) , è¯¥ä½œè€…æ˜¯åœ¨ [Tale](https://github.com/otale/tale) åšå®¢ç³»ç»ŸåŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹çš„ã€‚\r\n\r\n`Tale` ä½¿ç”¨äº†è½»é‡çº§ mvc æ¡†æ¶ `Blade` å¼€å‘ï¼Œé»˜è®¤ä¸»é¢˜ä½¿ç”¨äº†æ¼‚äº®çš„ `pinghsu` ã€‚\r\n\r\n`My-Blog` ä½¿ç”¨çš„æ˜¯ Docker + SpringBoot + Mybatis + thymeleaf æ‰“é€ çš„ä¸€ä¸ªä¸ªäººåšå®¢æ¨¡æ¿ã€‚\r\n\r\n***\r\n\r\n[Blog](https://github.com/zhisheng17/blog)  åœ¨  [My Blog](https://github.com/ZHENFENG13/My-Blog)  çš„åŸºç¡€ä¸Šå»é™¤äº† Dockerï¼Œé‡‡ç”¨çš„æ˜¯ SpringBoot + Mybatis + thymeleaf  + MySQL æ­å»ºçš„ä¸€ä¸ªåšå®¢ï¼Œå…¶ä¸­åœ¨åŸæ¥ä½œè€…çš„åŸºç¡€ä¸Šä¼˜åŒ–äº†ã€‚\r\n\r\n## å¼€æºåè®®\r\n\r\n[MIT](./LICENSE)\r\n\r\n## æ„Ÿè°¢\r\n\r\n[ZHENFENG13](https://github.com/ZHENFENG13)\r\n\r\n[otale](https://github.com/otale)\r\n', 1, 'page', 'publish', NULL, NULL, 66, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (24, '11', '', 1671074031, 0, '1323', 0, 'post', 'draft', '11', 'é»˜è®¤åˆ†ç±»', 0, 0, 0, 0, 0, 0);
INSERT INTO `t_contents` VALUES (25, '1111', '', 1671074031, 0, '', 0, '', '', '', '', 0, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (26, 'about my blog', 'about', 1670932505, 1669740067, '## Blog\n\n[Blog](https://github.com/zhisheng17/blog)  fork from [My Blog](https://github.com/ZHENFENG13/My-Blog) , è¯¥ä½œè€…æ˜¯åœ¨ [Tale](https://github.com/otale/tale) åšå®¢ç³»ç»ŸåŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹çš„ã€‚\n\n`Tale` ä½¿ç”¨äº†è½»é‡çº§ mvc æ¡†æ¶ `Blade` å¼€å‘ï¼Œé»˜è®¤ä¸»é¢˜ä½¿ç”¨äº†æ¼‚äº®çš„ `pinghsu` ã€‚\n\n`My-Blog` ä½¿ç”¨çš„æ˜¯ Docker + SpringBoot + Mybatis + thymeleaf æ‰“é€ çš„ä¸€ä¸ªä¸ªäººåšå®¢æ¨¡æ¿ã€‚\n\n***\n\n[Blog](https://github.com/zhisheng17/blog)  åœ¨  [My Blog](https://github.com/ZHENFENG13/My-Blog)  çš„åŸºç¡€ä¸Šå»é™¤äº† Dockerï¼Œé‡‡ç”¨çš„æ˜¯ SpringBoot + Mybatis + thymeleaf  + MySQL æ­å»ºçš„ä¸€ä¸ªåšå®¢ï¼Œå…¶ä¸­åœ¨åŸæ¥ä½œè€…çš„åŸºç¡€ä¸Šä¼˜åŒ–äº†ã€‚\n\n## å¼€æºåè®®\n\n[MIT](./LICENSE)\n\n## æ„Ÿè°¢\n\n[ZHENFENG13](https://github.com/ZHENFENG13)\n\n[otale](https://github.com/otale)\n![22è€ƒç ”è®¡ç®—æœºå­¦é™¢ä¸“ä¸šç›®å½•.PNG](http://110.40.220.17:18001/group1/M00/00/00/CgAMDWOYaAaAF7akAAG5YQF40YI043.PNG)\n', 1, 'page', 'publish', 'blog', 'é»˜è®¤åˆ†ç±»', 93, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (27, 'about my blog', 'about', 1670932505, 1669740067, '## Blog\n\n[Blog](https://github.com/zhisheng17/blog)  fork from [My Blog](https://github.com/ZHENFENG13/My-Blog) , è¯¥ä½œè€…æ˜¯åœ¨ [Tale](https://github.com/otale/tale) åšå®¢ç³»ç»ŸåŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹çš„ã€‚\n\n`Tale` ä½¿ç”¨äº†è½»é‡çº§ mvc æ¡†æ¶ `Blade` å¼€å‘ï¼Œé»˜è®¤ä¸»é¢˜ä½¿ç”¨äº†æ¼‚äº®çš„ `pinghsu` ã€‚\n\n`My-Blog` ä½¿ç”¨çš„æ˜¯ Docker + SpringBoot + Mybatis + thymeleaf æ‰“é€ çš„ä¸€ä¸ªä¸ªäººåšå®¢æ¨¡æ¿ã€‚\n\n***\n\n[Blog](https://github.com/zhisheng17/blog)  åœ¨  [My Blog](https://github.com/ZHENFENG13/My-Blog)  çš„åŸºç¡€ä¸Šå»é™¤äº† Dockerï¼Œé‡‡ç”¨çš„æ˜¯ SpringBoot + Mybatis + thymeleaf  + MySQL æ­å»ºçš„ä¸€ä¸ªåšå®¢ï¼Œå…¶ä¸­åœ¨åŸæ¥ä½œè€…çš„åŸºç¡€ä¸Šä¼˜åŒ–äº†ã€‚\n\n## å¼€æºåè®®\n\n[MIT](./LICENSE)\n\n## æ„Ÿè°¢\n\n[ZHENFENG13](https://github.com/ZHENFENG13)\n\n[otale](https://github.com/otale)\n![22è€ƒç ”è®¡ç®—æœºå­¦é™¢ä¸“ä¸šç›®å½•.PNG](http://110.40.220.17:18001/group1/M00/00/00/CgAMDWOYaAaAF7akAAG5YQF40YI043.PNG)\n', 1, 'page', 'publish', 'blog', 'é»˜è®¤åˆ†ç±»', 93, 0, 1, 1, 1, 0);
INSERT INTO `t_contents` VALUES (28, 'æˆ‘çš„åšå®¢', '', 1671075356, 0, '## äºŒçº§æ ‡é¢˜', 0, 'post', 'publish', '', '', 0, 0, 1, 1, 1, 0);

-- ----------------------------
-- Table structure for t_logs
-- ----------------------------
DROP TABLE IF EXISTS `t_logs`;
CREATE TABLE `t_logs`  (
                           `id` int(0) UNSIGNED NOT NULL AUTO_INCREMENT,
                           `action` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                           `data` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                           `author_id` int(0) NULL DEFAULT NULL,
                           `ip` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                           `created` int(0) NULL DEFAULT NULL,
                           PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 45 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of t_logs
-- ----------------------------
INSERT INTO `t_logs` VALUES (1, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (2, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (3, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (4, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (5, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (6, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (7, 'ä¿å­˜ç³»ç»Ÿè®¾ç½®', '{\"site_keywords\":\"Blog\",\"site_description\":\"SpringBoot+Mybatis+thymeleaf æ­å»ºçš„ Java åšå®¢ç³»ç»Ÿ\",\"site_title\":\"Blog\",\"site_theme\":\"default\",\"allow_install\":\"\"}', 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (8, 'ä¿å­˜ç³»ç»Ÿè®¾ç½®', '{\"site_keywords\":\"Blog\",\"site_description\":\"SpringBoot+Mybatis+thymeleaf æ­å»ºçš„ Java åšå®¢ç³»ç»Ÿ\",\"site_title\":\"Blog\",\"site_theme\":\"default\",\"allow_install\":\"\"}', 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (9, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (10, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (11, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (12, 'ä¿å­˜ç³»ç»Ÿè®¾ç½®', '{\"social_zhihu\":\"https://www.zhihu.com/people/tian-zhisheng/activities\",\"social_github\":\"https://github.com/zhisheng17\",\"social_twitter\":\"\",\"social_weibo\":\"\"}', 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (13, 'ä¿®æ”¹ä¸ªäººä¿¡æ¯', '{\"uid\":1,\"email\":\"1041218129@qq.com\",\"screenName\":\"admin\"}', 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (14, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (15, 'ç™»å½•åå°', NULL, 1, '127.0.0.1', 1669740067);
INSERT INTO `t_logs` VALUES (16, 'ç™»å½•åå°', NULL, 1, '127.0.0.1', 1669740067);
INSERT INTO `t_logs` VALUES (17, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (18, 'åˆ é™¤æ–‡ç« ', '2', 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (19, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (20, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (21, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (22, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (23, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (24, 'ä¿®æ”¹ä¸ªäººä¿¡æ¯', '{\"uid\":1,\"email\":\"1041218129@qq.com\",\"screenName\":\"admin\"}', 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (25, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (26, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (27, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (28, 'ç™»å½•åå°', NULL, 1, '127.0.0.1', 1669740067);
INSERT INTO `t_logs` VALUES (29, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (30, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669701180);
INSERT INTO `t_logs` VALUES (31, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669739728);
INSERT INTO `t_logs` VALUES (32, 'ä¿å­˜ç³»ç»Ÿè®¾ç½®', '{\"social_zhihu\":\"\",\"social_github\":\"https://github.com/hanbing777\",\"social_twitter\":\"\",\"social_weibo\":\"\"}', 1, '0:0:0:0:0:0:0:1', 1669740067);
INSERT INTO `t_logs` VALUES (33, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669771904);
INSERT INTO `t_logs` VALUES (34, 'åˆ é™¤æ–‡ç« ', '/upload/2022/06/t93vgdj6o8irgo87ds56u0ou0s.jpeg', 1, '0:0:0:0:0:0:0:1', 1669772115);
INSERT INTO `t_logs` VALUES (35, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669775809);
INSERT INTO `t_logs` VALUES (36, 'ç™»å½•åå°', NULL, 1, '0:0:0:0:0:0:0:1', 1669776383);
INSERT INTO `t_logs` VALUES (37, 'åˆ é™¤æ–‡ç« ', '8', 1, '0:0:0:0:0:0:0:1', 1669776499);
INSERT INTO `t_logs` VALUES (38, 'åå°ç™»å½•', NULL, 1, '127.0.0.1', 1670920287);
INSERT INTO `t_logs` VALUES (39, 'åå°ç™»å½•', NULL, 1, '127.0.0.1', 1670921814);
INSERT INTO `t_logs` VALUES (40, 'åå°ç™»å½•', NULL, 1, '127.0.0.1', 1670922047);
INSERT INTO `t_logs` VALUES (41, 'åå°ç™»å½•', NULL, 1, '127.0.0.1', 1670943571);
INSERT INTO `t_logs` VALUES (42, 'åå°ç™»å½•', NULL, 1, '127.0.0.1', 1670981125);
INSERT INTO `t_logs` VALUES (43, 'åå°ç™»å½•', NULL, 1, '127.0.0.1', 1670985055);
INSERT INTO `t_logs` VALUES (44, 'åå°ç™»å½•', NULL, 1, '127.0.0.1', 1670986010);

-- ----------------------------
-- Table structure for t_metas
-- ----------------------------
DROP TABLE IF EXISTS `t_metas`;
CREATE TABLE `t_metas`  (
                            `mid` int(0) UNSIGNED NOT NULL AUTO_INCREMENT,
                            `name` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                            `slug` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                            `type` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '',
                            `description` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                            `sort` int(0) UNSIGNED NULL DEFAULT 0,
                            `parent` int(0) UNSIGNED NULL DEFAULT 0,
                            PRIMARY KEY (`mid`) USING BTREE,
                            INDEX `slug`(`slug`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 25 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of t_metas
-- ----------------------------
INSERT INTO `t_metas` VALUES (1, 'é»˜è®¤åˆ†ç±»', NULL, 'category', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (6, 'my github', 'https://github.com/hanbing777', 'link', 'https://cravatar.cn/avatar/b4dfd72ba6ce524a1715bbbd79c1921a?s=256&d=mm', 1, 0);
INSERT INTO `t_metas` VALUES (7, 'my website', 'https://blog.hanbing777.top/', 'link', 'https://cravatar.cn/avatar/b4dfd72ba6ce524a1715bbbd79c1921a?s=256&d=mm', 0, 0);
INSERT INTO `t_metas` VALUES (8, 'éšç¬”', 'éšç¬”', 'tag', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (9, 'Java', 'Java', 'tag', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (10, 'Java', 'Java', 'category', 'æœ‰å…³Javaçš„åšå®¢', 0, 0);
INSERT INTO `t_metas` VALUES (11, 'HashMap', 'HashMap', 'tag', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (12, 'HashTable', 'HashTable', 'tag', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (13, 'HashSet', 'HashSet', 'tag', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (14, 'ConcurrentHashMap', 'ConcurrentHashMap', 'tag', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (15, 'Pyspider', 'Pyspider', 'tag', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (16, 'Python', 'Python', 'tag', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (17, 'çˆ¬è™«', 'çˆ¬è™«', 'tag', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (19, 'Python', 'Python', 'category', 'æœ‰å…³Pythonçš„åšå®¢', 0, 0);
INSERT INTO `t_metas` VALUES (20, 'éšç¬”', NULL, 'category', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (21, '1', '1', 'tag', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (22, 'vue', NULL, 'category', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (23, 'web', NULL, 'category', NULL, 0, 0);
INSERT INTO `t_metas` VALUES (24, 'æˆ‘çš„åšå®¢', 'http://110.40.220.17/', 'link', 'æˆ‘çš„åšå®¢', 0, 0);

-- ----------------------------
-- Table structure for t_options
-- ----------------------------
DROP TABLE IF EXISTS `t_options`;
CREATE TABLE `t_options`  (
                              `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '',
                              `value` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '',
                              `description` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                              PRIMARY KEY (`name`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of t_options
-- ----------------------------
INSERT INTO `t_options` VALUES ('allow_install', 'èƒ¡å†™ä¸ªæ ‡é¢˜', 'èƒ¡å†™ä¸ªå†…å®¹');
INSERT INTO `t_options` VALUES ('site_description', 'SpringBoot+Mybatis+thymeleaf æ­å»ºçš„ Java åšå®¢ç³»ç»Ÿ', 'åšå®¢æè¿°');
INSERT INTO `t_options` VALUES ('site_keywords', 'Blog', 'å…³é”®è¯');
INSERT INTO `t_options` VALUES ('site_theme', 'é»˜è®¤ä¸»é¢˜', 'ä¸»é¢˜');
INSERT INTO `t_options` VALUES ('site_title', 'MyBlog', 'åšå®¢æ ‡é¢˜');
INSERT INTO `t_options` VALUES ('social_github', 'https://github.com/hanbing777', 'github');
INSERT INTO `t_options` VALUES ('social_twitter', '', 'twitter');
INSERT INTO `t_options` VALUES ('social_weibo', '', 'å¾®åš');
INSERT INTO `t_options` VALUES ('social_zhihu', '', 'çŸ¥ä¹');

-- ----------------------------
-- Table structure for t_relationships
-- ----------------------------
DROP TABLE IF EXISTS `t_relationships`;
CREATE TABLE `t_relationships`  (
                                    `cid` int(0) UNSIGNED NOT NULL,
                                    `mid` int(0) UNSIGNED NOT NULL,
                                    PRIMARY KEY (`cid`, `mid`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of t_relationships
-- ----------------------------
INSERT INTO `t_relationships` VALUES (3, 9);
INSERT INTO `t_relationships` VALUES (3, 10);
INSERT INTO `t_relationships` VALUES (4, 9);
INSERT INTO `t_relationships` VALUES (4, 10);
INSERT INTO `t_relationships` VALUES (4, 11);
INSERT INTO `t_relationships` VALUES (4, 12);
INSERT INTO `t_relationships` VALUES (4, 13);
INSERT INTO `t_relationships` VALUES (4, 14);
INSERT INTO `t_relationships` VALUES (5, 1);
INSERT INTO `t_relationships` VALUES (5, 15);
INSERT INTO `t_relationships` VALUES (5, 16);
INSERT INTO `t_relationships` VALUES (5, 17);
INSERT INTO `t_relationships` VALUES (6, 9);
INSERT INTO `t_relationships` VALUES (6, 10);
INSERT INTO `t_relationships` VALUES (7, 19);
INSERT INTO `t_relationships` VALUES (7, 21);

-- ----------------------------
-- Table structure for t_users
-- ----------------------------
DROP TABLE IF EXISTS `t_users`;
CREATE TABLE `t_users`  (
                            `uid` int(0) UNSIGNED NOT NULL AUTO_INCREMENT,
                            `username` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                            `password` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                            `email` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                            `home_url` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                            `screen_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
                            `created` int(0) UNSIGNED NULL DEFAULT 0,
                            `activated` int(0) UNSIGNED NULL DEFAULT 0,
                            `logged` int(0) UNSIGNED NULL DEFAULT 0,
                            `group_name` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT 'visitor',
                            PRIMARY KEY (`uid`) USING BTREE,
                            UNIQUE INDEX `name`(`username`) USING BTREE,
                            UNIQUE INDEX `mail`(`email`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 2 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of t_users
-- ----------------------------
INSERT INTO `t_users` VALUES (1, 'admin', '$2a$10$3R04OztA2HiyN9/3oLeGX.IFBsKeIYuW8A5te8rLy7BZ78qALYjkC', '742608569@qq.com', NULL, 'admin', 1669740067, 0, 0, 'visitor');

SET FOREIGN_KEY_CHECKS = 1;
